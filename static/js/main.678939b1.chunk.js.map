{"version":3,"sources":["audio/Weapons/Lasers/sfx_wpn_laser1.wav","assets/enemy/enemy-explosion-00.png","assets/enemy/enemy-explosion-01.png","assets/enemy/enemy-explosion-02.png","assets/enemy/enemy-explosion-03.png","assets/enemy/enemy-explosion-04.png","assets/enemy/enemy-explosion-05.png","audio/Explosions/Long/sfx_exp_long1.wav","audio/Music/game-menu.mp3","audio/Music/game-main.mp3","audio/Music/game-end.mp3","audio/Music/game-main-summary.mp3","audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav","audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav","audio/General Sounds/Interactions/sfx_sounds_interaction1.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav","audio/Weapons/Cannon/sfx_wpn_cannon1.wav","audio/Explosions/Short/sfx_exp_short_soft5.wav","audio/Explosions/Short/sfx_exp_short_hard12.wav","audio/Explosions/Clusters/sfx_exp_cluster1.wav","audio/Explosions/Odd/sfx_exp_odd1.wav","assets/player/ship.png","assets/player/explosion-1/explosion-1-01.png","assets/player/explosion-1/explosion-1-02.png","assets/player/explosion-1/explosion-1-03.png","assets/player/explosion-1/explosion-1-04.png","assets/player/explosion-1/explosion-1-05.png","assets/enemy/enemy-ship.png","assets/crab-bug/crab-bug-ship.png","assets/helmet-bug/helmet-bug-ship.png","assets/pincer-bug/pincer-bug-ship.png","assets/sonic-enemy/sonic-enemy-ship.png","engine/utils.ts","engine/components/nameable.ts","events.ts","engine/components/killable.ts","engine/components/withGeometry.ts","engine/components/withRandomWalk.ts","engine/components/isCollidable.ts","engine/components/lootable.ts","engine/components/withWrapAroundPosition.ts","engine/components/withBoundary.ts","engine/components/withTexture.ts","engine/components/withBugWiggle.ts","game/factories/enemy.ts","game/Domain/mob.ts","game/catalogue.ts","client/Hoc/withEntity.tsx","client/hooks/withAnimationState.ts","client/hooks/withSoundEffects.ts","client/Hoc/withSpriteEffects.tsx","client/Containers/Player/Player.tsx","client/Containers/NPCs/Bug.tsx","client/Containers/NPCs/CrabBug.tsx","client/Containers/NPCs/HelmetBug.tsx","client/Containers/NPCs/PincerBug.tsx","client/Containers/NPCs/SonicBug.tsx","client/Containers/Sprites.ts","client/Hoc/withTexture.tsx","client/utils.ts","client/Development/FPS.tsx","client/Development/Dev.tsx","client/Layouts/Base.tsx","client/Containers/Intro.tsx","client/Components/Lives.tsx","client/Components/HighScore.tsx","client/Components/Credits.tsx","client/Components/LevelStatus.tsx","client/Components/RestartButton.tsx","client/Layouts/Gui.tsx","client/Backgrounds/NewGame.tsx","extern/Key.js","extern/Keyboard.js","client/hooks/withEnterKeyEffect.ts","client/Containers/Menu.tsx","client/Backgrounds/StarField.tsx","client/Levels/Base.tsx","client/Containers/Weapons/Bullet.tsx","client/Hoc/withGameLevel.tsx","client/Levels/Directory.ts","client/Levels/Demo/Demo.tsx","client/Levels/1/Level.1.tsx","client/Levels/2/Level.2.tsx","client/Levels/3/Level.3.tsx","client/Levels/4/Level.4.tsx","client/Levels/End/End.tsx","client/Components/Countdown.tsx","client/Levels/Loader.tsx","client/Components/LevelSummary.tsx","client/Containers/Game.tsx","client/Backgrounds/GameOver.tsx","client/Containers/Outro.tsx","engine/components/withPosition.ts","engine/components/combatable.ts","engine/components/withPlayerControls.ts","game/factories/player.ts","game/Domain/character.ts","engine/components/withMomentum.ts","engine/components/withOffscreen.ts","engine/components/withCollisions.ts","game/factories/bullet.ts","game/Domain/projectile.ts","extern/Vector2.js","extern/Mouse.js","engine/services/InputManager.ts","engine/services/StorageManager.ts","engine/components/controllable.ts","engine/components/index.ts","engine/components/ageable.ts","engine/services/ComponentManager.ts","engine/services/EntityManager.ts","engine/services/EventManager.ts","engine/services/AudioManager.ts","engine/services/SystemManager.ts","game/index.ts","game/factories/system.ts","App.tsx","index.tsx"],"names":["module","exports","__webpack_require__","p","createSelector","path","system","entity","searchResult","components","filter","o","b","id","state","undefined","hasState","length","first","createSetter","selector","component","factory","config","mkEntity","array","defaultIdGenerator","epoch","arguments","next","keys","Object","once","fn","called","apply","clamp","min","max","num","ifStateProp","obj","boxMullerRandomGeneratorFactory","random","x1","x2","w","z","phase","Math","sqrt","log","throttle","wait","last","isCalled","setTimeout","KeysEnum","defaultBoundary","top","left","bottom","right","nameableFactory","events","registerComponent","name","entityId","update","ON_START_GAME","ON_GAME_OVER","ON_LEVEL_LOAD","ON_LEVEL_BEGIN","ON_LEVEL_COMPLETE","ON_PLAYER_ATTACK","ON_COLLISION","ON_ENEMY_DEATH","ON_ENEMY_FREE","ON_START_ENGINE","ON_STOP_ENGINE","COMPONENT_NAMESPACE","killableFactory","health","isDead","immortal","wasDeadBefore","isDeadNow","value","onChange","withGeometryFactory","geometry","width","height","defaults","direction","x","y","moving","speed","disabled","jitter","withRandomWalkFactory","randomWalkGeneratorX","randomWalkGeneratorY","options","controls","setJitter","level","deltaX","deltaY","handleMovement","_component$state$dire","handleMovingFlag","isCollidableFactory","collidable","lootableFactory","loot","withWarpAroundPositionFactory","position","getEntityComponent","_controls$state","boundaryComponent","geometryComponent","_geometryComponent$st","boundary","_component$state$posi","handleMovementState","withBoundaryFactory","boundedEntities","getEntitiesByComponentTypes","map","getEntityModel","ownBounds","forEach","pos","dimensions","own","other","otherBounds","breakingOut","key","handleBoundaries","withTextureFactory","texture","BRAKE","PULSE_WIDTH","withBugWiggleFactory","wiggling","wiggleState","counter","increment","positionComponent","_component$state$wigg","handleBugWiggle","createEnemy","textureId","withName","withHealth","withPosition","withGeometry","withTexture","withRandomWalk","withBugWiggle","isCollidable","withBoundary","isLootable","registerEntity","createMob","points","SpriteTextureIds","mkAudioSrc","src","opts","objectSpread","Sfx","NEW_GAME","GAMEOVER","YOU_WIN","LEVEL_WIN","PAUSE","UNPAUSE","NEXT_LEVEL","Songs","MENU","GAME","END","SUMMARY","SongLibrary","_SongLibrary","defineProperty","MenuMusic","volume","MainMusic","EndMusic","SummaryMusic","SfxLibrary","_SfxLibrary","GameOverSound","LevelWinSound","NextLevelSound","YouWinSound","NewGameSound","PauseGameSound","UnPauseGameSound","withEntity","Component","props","rest","objectWithoutProperties","model","react","assign","withAnimationState","_useState","useState","animations","_useState2","slicedToArray","_useState3","currentFrame","currentState","frame","getDefaultFrame","_useState4","setCurrentFrame","_useState5","_useState6","setCurrentState","_useState7","_useState8","timers","setTimers","queueFrame","when","push","buffer","_ref","duration","timer","onFinished","concat","fr","withSoundEffects","playDeathAudio","collectionKey","mkAudioCollectionKey","audio","playSound","playAttackAudio","useEffect","registerEvent","sounds","registerSound","unRegisterEvent","actionType","unRegisterSound","action","withSpriteEffects","_React$useState","React","_React$useState2","hidden","setHidden","_React$useState3","_React$useState4","dead","setDead","_withAnimationState","styles","backgroundImage","backgroundSize","backgroundPosition","display","cssDisplayValue","elementId","className","style","ConnectedPlayer","normal","require","death","shoot","ShootSound","DeathSound","AnimatedBug","AnimatedCrabBug","AnimatedHelmetBug","AnimatedPincerBug","AnimatedSonicBug","SpriteTextureCollection","_SpriteTextureCollect","Player","Bug","CrabBug","HelmetBug","PincerBug","SonicBug","ConnectedComponent","loadLevel","enemyPositions","enemies","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","row","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","enemyTypeId","JSON","stringify","err","return","FPS","_React$Component","_getPrototypeOf2","_this","classCallCheck","this","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","lastLoop","Date","getMilliseconds","count","fps","throttled","countFps","currentLoop","loop","handler","requestAnimationFrame","setFps","setState","updateFrequency","inherits","createClass","cancelAnimationFrame","defaultProps","classNames","classes","join","Layout","topLeft","topCenter","topRight","middleLeft","middleCenter","middleRight","bottomLeft","bottomCenter","bottomRight","background","children","after","Intro","document","addEventListener","onPlayerInput","removeEventListener","Lives","HighScore","Credits","LevelStatus","RestartButton","onClick","Gui","lives","score","credits","onRestart","NewGame","Key","pressed","justPressed","justReleased","Keyboard","actions","i","window","event","keyCode","DOWN","UP","RESET","prototype","set","reset","end","shift","keyPressed","keyJustPressed","keyJustReleased","dispose","TAB","ENTER","SHIFT","CTRL","ALT","CAPS_LOCK","ESC","SPACEBAR","PAGE_UP","PAGE_DOWN","HOME","INSERT","DEL","LEFT","RIGHT","NUM0","NUM1","NUM2","NUM3","NUM4","NUM5","NUM6","NUM7","NUM8","NUM9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","withEnterKeyEffect","onEnter","enterKeyHandler","e","Menu","ready","setReady","handleStartGame","emit","playSong","stopSong","Backgrounds_NewGame","onMouseUp","StarField","Level","Bullet","outline","borderRadius","offscreen","getStyles","withGameLevel","LevelHOC","levelId","enemiesDead","countDeath","onLevelComplete","completeEvent","clearInterval","interval","enemyFree","items","maybeComponent","floor","controlComponent","enemyGroup","startFreeEnemyInterval","setInterval","_this$props","nextProps","nextState","unRegisterEntity","_this$props$state","player","bullet1","bullet2","Base_Level","enemy","ConnectedEnemy","Levels","demo","level1","level2","level3","level4","_props$state","humanizedLevelNames","Countdown","time","setTime","_loop","onReady","Loader","levels","currentLevel","setLevel","GameLevel","current","getThisLevel","LevelSummary","onNextLevel","shots","hits","round","Game","complete","completed","registerEvents","handleLevelLoading","handleLevelBegin","handleLevelComplete","handleEnemyDeath","handleBulletCollisions","handleGameOver","unRegisterEvents","collisions","toConsumableArray","Set","killEntity","getBullet","fireBullet","bullet","reviveEntity","source","location","startNewGame","nextLevel","getNextLevel","attacking","center","_this$state","Backgrounds_StarField","GameOver","Outro","final","setFinalScore","serialized","qs","tokens","searchString","split","params","re","exec","decodeURIComponent","getQueryParams","search","parse","Backgrounds_GameOver","withPositionFactory","clampedX","clampedY","combatableFactory","attackPower","input","KeyCodes","handleAttack","withPlayerControlsFactory","handleVerticalMovement","handleHorizontalMovement","_ref2","neg","createPlayer","withControls","withAttack","createCharacter","withMomentumFactory","momentum","_component$state$mome","withOffscreenFactory","screenSize","innerWidth","innerHeight","handleOffscreenFlag","withCollisionsFactory","collidableEntities","getBounds","a","lastCollisions","handleCollisions","createBullet","withMomentum","withOffscreen","withCollisions","createProjectile","Vector2","Mouse","_keys","_position","_positionUpdated","_delta","_wheel","_wheelUpdated","_doubleClicked","delta","wheel","doubleClicked","canvas","self","onmousewheel","detail","navigator","msMaxTouchPoints","lastTouch","touch","touches","clientX","clientY","updateKey","rect","getBoundingClientRect","updatePosition","movementX","movementY","which","MIDDLE","setCanvas","mouseInside","insideCanvas","setLock","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","buttonPressed","button","buttonDoubleClicked","buttonJustPressed","buttonJustReleased","xDiff","yDiff","InputManager","mouse","keyboard","StorageManager","saveGame","saveState","getSerializableState","loadGame","loadedFromStorage","loadStateFromKey","hydratedComponents","hydrateLoadedComponents","loadHydratedState","localStorage","setItem","getItem","_this2","componentInitializerCache","componentInitializer","cached","getComponentFactory","onUpdate","eventName","defaultComponentFactories","age","attack","wiggle","configDefaults","debug","logging","version","ComponentManager","init","idGenerator","unRegisterComponent","componentId","get","toString","EntityManager","entities","EventManager","callback","emitter","addListener","removeListener","data","EventEmitter2","delimiter","wildcard","maxListeners","AudioManager","songs","soundFactory","Howl","audioEngine","Howler","stop","unload","sprite","play","Error","on","off","SystemManager","epochs","object","entityComponentCache","entityManager","registered","componentManager","entityComponentSetter","getComponent","getComponentById","getComponentIdsForEntity","entityComponents","componentFactories","unRegisterComponentsForEntity","deleteEntityComponents","clearEntityComponentCache","componentName","reduce","acc","val","groupEntityComponents","componentNames","cacheKey","isValidComponent","indexOf","step","updateSystemEntities","updateComponentsForEntity","updateComponent","getState","storage","n","setValue","_ref$version","_ref$logging","createSystem","App","gameAudioInitialize","registerSong","gameAudioCleanup","unRegisterSong","moUntWOrld","tick","_","start","_update","save","load","restart","BrowserRouter","Route","exact","render","Intro_Intro","Game_Game","ReactDOM","src_App","getElementById"],"mappings":"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","file":"static/js/main.678939b1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_laser1.7c857ee1.wav\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAjklEQVRYR+2WQQrAIAwENz9p/v+o9CeWQANSvLiUBsp6FExmJyIampc194cAZEAGZOA/BiJiuPt2oO0D9XSzDZ9PPw2QhRLicMcZASZ91qAAKv0ARjZPCAOMsUIBzGMoA7nHWKAAKmmN4Fb5rYEZgk1P34HVJ4aZ/6sA7M+KugNss9U5AciADMiADLQbuADnnjshOGarxwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVRYR+2UwQ3EMAgEoZPQf1G4E59AwUK+ewCXyB/8ipSEXQYvCIcPHtaHNtAEmsAjBJh5ElGpVumnfwT3vZMyMCdMKYAIaCa8GXkv7zLLLfWxFPYiu4nXDXwJwk0Ecl17QmECO2orYuO4iGAwg1zGCTAxaCpswASl+OpAnlyFqGiJgP9JLyOCdnxdpCZMPJuQMAHDKgKCe+tC62TFNVGZyKwx3HEcg8HMrPkno5gyoN0Lcnf8TrCY2q6INJcy8IuAreAK/voIXMyqwivGEUxvflMawZOG2kATaAJN4DiBDzrKfCHGS/waAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABAklEQVRYR+2VSw4DIQhA4Sbj/Q/lUWyw0jCIBWya2dhNMz95Pj4iPPzDh+PDATgGjgHXQK21lVKm9/T9BtAQ8l3lAsg5IYO2Bg0RUN7bgUoBEAzvVO6YYOgZAdH/ypo19EIAt513hjcJB+yXw0g2FSEAi9xLQdRCCsCqAUt5NHhPm3cYkdLx4pTfVdGxHW/tEAAvEln0U6BGh6xgXAPywxXEt1b0LLgAOu+cNBo6mVz/bICDZSxEAF0DFjkvbBUhF2ykZsJFqANNgcUQ+gsAW6DA11X6pTUFvYLbHsW6FXn2axAdIJIGtwZuh844cnW/Zw8gCeoC7GjNfHMAjoFj4HEDL4r0ziE3SigHAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABW0lEQVRYR91WWw7EIAjEm9T7H8rexA1NbCzyGNwmm2z/2iIMwzha6MdP+XF9ggB0ol4Ii802BAHIJs3EpwH0Tp0LlPJkpLXWa61Lvoi9NACtO1k8KjrnCAFYnXES7Z8Xr4EPAYxFSGIkRoJQAVhzHotnineKqiOIEjGoIbxoxhmA7ggGKI0R/ncc9WrmBjaBRLcirIEooWTQYlR+fw3ArQ/hE9FoHwDkbPn9bI00g/EYmfWiCdf1gRlxJDZOhAjOY8EcgdZFRKcEFOnmErAVNAAgRT17jjzlAWC3GNKpNU6bAecO4G0xBiNFu6UBpCsrJsNkqAHr1NOKS+EiQMzDaNird9ZfdlwrK/nKo+5/4wIzGkg5IbozEP+AACzO2Kmf5+qMu56x+ADiatYFZfd2lBqBFJ5WVGPD21EwAETRlhBfAWBRv+P/7mn4jQHtrIVHgCRHx/S/DCAsyZgPlF0MMIC1WsUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABEElEQVRYR81XWxLDIAiEo+T+h9Kb2DEdM2pFF3yk/Q3iviAN08QvEAUm4okW+OEQKDBj9c65cF2XCCx//hSNDmkAaBQpUKKXjMBKAFrnpvzTMJVquwBiyLxz1PMzNkaVa4F4TYEEeisAJCvwFCT5kKaabGxVIAci5eQYANMUaKQs2CpWtKjAij2PEIAsmJlzCUQiCAFAmFhrOLKLh9E3neYiZGR/FNjpfSTrfbnaj1rQytJRAH/1Mkpgmgog4dGEsVf7igV5Fvgk2+MZQMiZLFi5mk0AVgXw3sCtZrV0iJRWUGoFRmDq5/Vqr+27AfT2/0q/k0rFGFqls/4Dqu97LNjBNL9Msu5rgeLLd4VieY8P2WaPIboXUNsAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAs0lEQVRYR+2XSw6AMAgF4SZy/0P1KBiMIDV+YuKzLnCljSnTwZgHU7qUSJmI8xr6viuGArjaNwDsJT8twsLZ/h0AayNlsR683obFwsH+XaHWmorI68XNrBswCOKtxmcA+WPOBx0CYDAOMQzAISD9fvLvKIAyUAbKQBkoA2XgPwZQkfwuG/SpGJCG9wARTtdaCwByJrDslyFksnwusRQAyJlgP/7Zs88e0QLkTHD1HRTAcAMzqEdXu+U9kUQAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_long1.e65a7e8b.wav\";","module.exports = __webpack_public_path__ + \"static/media/game-menu.277a07d7.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main.62197df4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-end.4f698af1.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main-summary.430d3f4f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare1.aae78736.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup3.da47f034.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare3.25f989ff.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup2.35e9b099.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_interaction1.60988248.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_in.b7b7a7b9.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_out.959daf2a.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_cannon1.75bcd782.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_soft5.c6e20b31.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_hard12.ffa98eb5.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_cluster1.7a7460e6.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_odd1.6d3db534.wav\";","module.exports = __webpack_public_path__ + \"static/media/ship.8745c391.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABvElEQVRYR+1XW5LDIAwjN1nufyj2Jt6BYlYYv5LpTH/an6YktYQsY+cqH/5c78RvrVGt9VbMWw8PstRofF8CqK/3Neu+sdM8ARkYf8/r9vtCGSowoUDimIAA7jIvEFaEd26p4pDwCcAuqBS6SokJT7BF9EdJFxAKCdBVO2oaeIiCZINU2IGp0QI3gpiqcNo0s4p0uASW0+8SQG/I6xQBatQd3d3s1balwJECRwldAahpJiKN3EF4LeMRayOuuaLdZwhEhrQVUGTDYJoCrin5jBB+OghEu2a5nxBYsYHEqcC8qe2G1xAc0+Caktp//zAJYEOZkknZuwIZAgcZJfbI8ubuBIGofWOK1OqwPMBnNwNwX7eMZxHxCGj+eingnNde3j0S2cNIJyC6YCR7pAbftxUopWAKKrRQWW6aAWUlyAOKgV0CKxXz39wJGVDWP1cDVoX2TA+3AUcH0TbTYUtWdPaGFPTOIJYqQwA5Rq+HRnjWCxBMm3K1AVXOg8mZIBzJeCjxjmZZytI3Xn+JZz1lKt5ePsBU2yCKKmrqzPsxAQ7kvXDgDNhdj+8HgXfyBBImfGLctxJIcDwe+RL4A6hvfDDjUhdcAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACBUlEQVRYR8VXQXLEIAyDnyz/fxT7EzpmMRXCBmdmO82lmSTFsizZ3pz++cozfqut3+fy++yvwEGsPZi8PIFAoHrPwE9nUKJ2th4bGNBiB4C3lFpOaWeYwPp0jyyWgxhALnm+t0AzWwaz53ojlXDYElQO9UoxWKq1tlJsbcVLMILUd0r9sFs5gGoBoBVjIDHFKxNWUGSA2Qi4agNwFQ+A6Gy8gl51nOX3ASNbCWhdQivS/Col5VY/PYXFSXo5a0ApHCXQIFpHDCqfKhBhpeULiMGI3Yg0TchAxaeK5r/yLxMgluXEQi7ZB0CCYvpntoN+LkPXhmFRtmQYgBy2ZDgoFNG+a/1YE33P4ryKENUV6fdAOQtzgrk0qC6xTdVGcBGUZImXUi6KZwZUD5tFQ62YUbfaGADTLQG79VJa7OjpABM5u0BrOvyPQruJsNtSdWA5YZx97wPQC9QJGJxLqEJdSnPQwmMAFv0WM3P4sB1xhG8idMavtlNsRpYgl2dGYKuN31cyZyZMisHvAnB5bu0KtK7Fx3Fw6M3PDsI7u0DeehMsMvsNwfEQu9twNIylb0dA4fTU+9Exn61kQoJutZYwuRzWJgQA+ufOqm5qYNuEsYVac8J7T0Ct5fTugqfi46HG/f/oAoemBYPx28DEeDoLWIzZ0MoqAjbA3jMAXwp67wMB5N/65Afslf0wgQfXLAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACd0lEQVRYR51XQYIDIQjTn9T/P8r+ZHaxYEMMs+320tZhAEOC2Ns3n2tey7yPvr7jP/qwZ7we9hzrmtfb0Y2RzFEFutsM+7ck++ivBGI3yqhyWiUQ6330OV+IjYc7wXc8Vk4ggoHhfL4Wx6hhRxsLarb4vZOADV6tGfyAgJXUF7G+5jwc7kSueUXQyBltELSdDKCAcd4ICKhtF48x2nPO9DQl9GjtSIbWFnpM4KjKEdcN2WnAiOuWnH04QWW7kyCeZQQAWoQOg25CeeZcItwQopdQMKOKhEfNBcSMmkrWgvdrrvIwP1AVqaF8Gvxw6Kw/ElP8ID7kjgba5TreBf0kIdv12qCpAWR+m0AFNdc2Gk7IdDcgQGYncIcAluAgUGuNm0wkGOvpf+w4mhKUAwmZOuHuaGgMjiwABlO/EQ1GBJtW9IWjFUedZDLejlW7jVZdlUMFX2pMdfYTagUA0iTyhP79oEmOi2dVcH0aij6PUKrWfEfKePZVI+Ig+yQUHNgHFEnm4EIcRtAFcwnoDIgSlF0P+IBJcOANP88E5TxAg0Q6B4iELMNEQFBStOVlT0PJSUKD2YeQv3bPz0Omav2YivroPheQOSgB2zHzQGlcSTF87EHWFjyGliEhUE06mABPTNiK1/bUMOJrH5UAAygZKjRK7ZcqiDeKWZ/ZXSViblRfSIMMTEUbATWQJna4Oiq4JfFoTkhE9BfuLyaIBsqTegDCHW1cJbRlCA+PqVgiQZeQSqab8az3COjQI0klCVWm8h7oiuExPUmOoODZIXHAdVnfFQo5yalZ3DUD3fNiUlwayjreKYbgLn3sy+l/g6PnT6/jnM3vez/v0LVIfdTdDwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFUlEQVRYR8VXQY7EIAyDnwz/fxTzE1ahBJnghLLSaudSTVsSx3EMzemff7nnb7X1ay7P/z/81frkKuXJtSRsKbVs7iEWXCzvfmtN5WOASzFeIaTQrWKLUAHI/Z4spVS/O0Va0WQUQChYrFwjUMp7slKyXnvSQV0PMqrG92xwy5bHrNtzlhxBzeeDVmFlYWGUiHGYtF61YKl+MPMpJeVWl5jYGgVj11oQR9VbmjGAMjLpb7UxENFQLQA2uiCgJpPKRf3eT/TR2wHXaLypDyBtJ0tAFuRdBTj1AmPK2uFqQGn1lG5BMoY8ECjWFQChXBlgE+CNqV2DIzoNjDmhWLKOU9QGD4wnUAXAnHYXIZgMqwSrEZB9HMG+t9ZYqzai2jSAFEUz7DFk53/bK0IArbaWn4retAAZwrhsLXNJWfNahCwZc0irg6krpxUUgJpI5HoqqMgpl1F+BcDsehiAjaM1Kc8bepwbAMjA5vewy1mAnhnheNtRnC1Y9gHHD6ztMoYiE2K2/nozWvQQnIwWsWohSj85rh23Y6WPofd2Rq9tRwbkhe1MCAdJfBYJzrol/rcg3BZ4mugBCChv5K6PZMoCO5Tqqbi/M07G3eHgXMhGLgJBzwPo52ihrAX2uev9zvfC1YcJE5F7jyQMt+PTVxEKlO0LC5Dg68iK/DyGEBl939vdrljadsNg9UnNt4n1/SsGfpskWvcD7otZP/TRmLkAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAu0lEQVRYR+2X3Q2AIAyEj1HYzg2cwQ3crm6CQUFb42/i6Uv7BiHl61GSa4CORhL6GMweeWEvYwGc5F0B8qEaDBUO8hsAaYHYAZRnaCTt5TdPkIAUAE4PFAUmiLj22XcAqpl1ob8AZJYK8RuAgiB/9Iv0nIZ7UJMDuAKugCvgCrgCroB1xQw3fNsPsGaCLUC156XYWQHiTJC9n2YYRGbrX2IBoM4E2/Evr40CyqU+cFOvHF2akDqUnKA6wAgOWExlxHkIvQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAAwklEQVRIS+2UUQ7EIAhE4Si9nT3R9nYehQ0IDau1YrPxq8SkPzjPGUgRFhQuYMALmUr5Pq6UCY7tp4cICLGK+aLPv2I8ExVgcZEmAPsKbABg2BjCXSkTHVt5nEH4cspQO73KMQZhbXZSVRNbZ1IxCEfCoI+6YRd7LpLVzJ45UYBALDKLyhQHoPF2OSEqE5FCPu4Bd476EC+gsfi5nJvl8+k4ikH0cuNEN+/k/AOiG0wSlVUgsth2Tf1E2uYXMhXgkri+xNVLFbLUHXYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAm0lEQVQ4T+2UQRLDIAhF/z+Kh0kPnRwmRyFDFWvRatO6yCJu0AHf8AElJi5OZOGGxWoKIARotlfjumayCxiIZCuY85fwNswiFKrZrRA+UrMU5vz52EzbLjBQQTlYgYXP322PxlTYU1uUI1t4qVr2uE/yv8usiKpkdto5fAF/w96657v5S2Yl0MM/8boyTWKescEXM6zZmS/qurAD5VJKFMb8mZ4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAjUlEQVQ4T9XUwQ2AMAgFUBil+w/VUb5BxRCEFhMucqz15ResTI3FjRb9HQOBeH+K2jE7MNCEDIgxCDzPWTGNNED6wEI68R24xCSRFFjSXaSAWboYkx6ZstizHAxkiwmkpenu5r3efWMu1fKGuHQ5phst7tdKmO9H9J0Fa3GyNixqUscN+Pp7qt3NotqKHVslNhRW8lxOAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import { ITypes, IEntity, IdGeneratorFunc, ISystem, IComponent, IComponentEvents, AnonymousCB, EntityIdType } from \"./types\";\n\nexport const pp = (obj: object | null | undefined) => JSON.stringify(obj, null, '  ')\n\nexport type Setter<T> = (system: ISystem, entity: IEntity, state: T) => null | undefined;\n\nexport type Selector<T> = (system: ISystem, entity: IEntity) => null | IComponent<T>\n\nexport function createSelector<T>(path: string): Selector<T> {\n  return (system: ISystem, entity: IEntity): null | IComponent<T> => {\n    const searchResult = system\n      .components\n      .filter(o =>\n        isSameEntity(o, entity)\n        && hasState(path, o.state));\n\n    if (searchResult.length === 0) {\n      return null;\n    };\n\n    return first(searchResult);\n  }\n}\n\nexport function createSetter<T>(selector: Selector<T>): Setter<T> {\n  return (system: ISystem, entity: IEntity, state: T) => {\n    const component = selector(system, entity);\n\n    if (component === null) {\n      return component;\n    }\n\n    component.state = state;\n  }\n}\n\nexport function hasState(path: string, state: any) {\n  return state[path] !== undefined;\n}\n\nexport function factory<T extends ITypes>(config: T): T {\n  return config;\n}\n\nexport function mkEntity(id: EntityIdType): IEntity {\n  return { id };\n}\n\nexport function isSameEntity(a: IEntity, b: IEntity) {\n  return a.id === b.id;\n}\n\nexport function values(obj: any) {\n  return Object.keys(obj).map(key => obj[key]);\n}\n\nexport function first<T>(array: T[]): T {\n  return array[0];\n}\n\nexport const defaultIdGenerator = (genesis: number = 0): IdGeneratorFunc => {\n  let epoch: number = genesis;\n  return () => ({ next: () => epoch++ })\n}\n\nexport const defaultComponentEvents = (): IComponentEvents => ({\n  onUpdate: (component: IComponent, entity: IEntity) => null,\n  onChange: (eventName: string, component: IComponent, entity: IEntity) => null,\n})\n\nexport function partialSetValue(object: any) {\n  return (path: (string | number)[], value: any) => setValue(object, path, value);\n}\n\nexport function setValue(object: any, path: (string | number)[], value: any) {\n  let a = path;\n  let o = object;\n\n  for (let i = 0; i < a.length - 1; i++) {\n      let n = a[i];\n      if (n in o) {\n          o = o[n];\n      } else {\n          o[n] = {};\n          o = o[n];\n      }\n  }\n\n  o[a[a.length - 1]] = value;\n}\n\nexport function getValue<T extends any>(object: T, path: string) {\n  let o = object;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  let a = path.split('.');\n\n  while (a.length) {\n      let n = a.shift() as string;\n\n      if (n in o) {\n          o = o[n];\n      } else {\n          return;\n      }\n  }\n\n  return o;\n}\n\nexport function keys<O>(o: O) {\n  return Object.keys(o) as (keyof O)[];\n}\n\nexport function once(fn: AnonymousCB) {\n  let called = false;\n  return (...args: any[]) => {\n    if (!called) {\n      called = true;\n      return fn(...args);\n    }\n    return undefined;\n  }\n}\n\nexport const clamp = (min: number, max: number, num: number) => {\n  return num < min ? min : num > max ? max : num;\n}\n\nexport const ifStateProp = (obj: any) => {\n  return obj && obj.state !== undefined;\n}\nexport function boxMullerRandomGeneratorFactory() {\n  let phase:      number = 0;\n  let random:     () => number;\n  let x1:         number;\n  let x2:         number;\n  let w:          number;\n  let z:          number;\n\n  random = Math.random;\n\n  return function () {\n      if (!phase) {\n          do {\n              x1 = 2.0 * random() - 1.0;\n              x2 = 2.0 * random() - 1.0;\n              w = x1 * x1 + x2 * x2;\n          } while (w >= 1.0);\n\n          w = Math.sqrt((-2.0 * Math.log(w)) / w);\n          z = x1 * w;\n      } else {\n          z = x2 * w;\n      }\n\n      phase ^= 1;\n\n      return z;\n  }\n};\n\n/**\n * limits your function to be called at most every W milliseconds, where W is wait.\n * Calls over W get dropped.\n * Thanks to Pat Migliaccio.\n * see https://medium.com/@pat_migliaccio/rate-limiting-throttling-consecutive-function-calls-with-queues-4c9de7106acc\n * @param fn\n * @param wait\n * @example let throttledFunc = throttle(myFunc,500);\n */\nexport function throttle<T>(fn: Function, wait: number){\n  let isCalled = false;\n  let last: T;\n  return function(...args: any[]): T {\n    if (!isCalled){\n      last = fn(...args);\n      isCalled = true;\n      setTimeout(function(){\n        isCalled = false;\n      }, wait)\n    }\n    return last;\n  };\n}\n\nexport const defaultBoundary = {\n  top:    0,\n  left:   0,\n  bottom: 600,\n  right:  800,\n}\n\nexport enum KeysEnum {\n  Backspace = 8,\n  Tab = 9,\n  Enter = 13,\n  Shift = 16,\n  Ctrl = 17,\n  Alt = 18,\n  PauseBreak = 19,\n  CapsLock = 20,\n  Escape = 27,\n  Space = 32,\n  PageUp = 33,\n  PageDown = 34,\n  End = 35,\n  Home = 36,\n\n  LeftArrow = 37,\n  UpArrow = 38,\n  RightArrow = 39,\n  DownArrow = 40,\n\n  Insert = 45,\n  Delete = 46,\n\n  Zero = 48,\n  ClosedParen = Zero,\n  One = 49,\n  ExclamationMark = One,\n  Two = 50,\n  AtSign = Two,\n  Three = 51,\n  PoundSign = Three,\n  Hash = PoundSign,\n  Four = 52,\n  DollarSign = Four,\n  Five = 53,\n  PercentSign = Five,\n  Six = 54,\n  Caret = Six,\n  Hat = Caret,\n  Seven = 55,\n  Ampersand = Seven,\n  Eight = 56,\n  Star = Eight,\n  Asterik = Star,\n  Nine = 57,\n  OpenParen = Nine,\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  LeftWindowKey = 91,\n  RightWindowKey = 92,\n  SelectKey = 93,\n\n  Numpad0 = 96,\n  Numpad1 = 97,\n  Numpad2 = 98,\n  Numpad3 = 99,\n  Numpad4 = 100,\n  Numpad5 = 101,\n  Numpad6 = 102,\n  Numpad7 = 103,\n  Numpad8 = 104,\n  Numpad9 = 105,\n\n  Multiply = 106,\n  Add = 107,\n  Subtract = 109,\n  DecimalPoint = 110,\n  Divide = 111,\n\n  F1 = 112,\n  F2 = 113,\n  F3 = 114,\n  F4 = 115,\n  F5 = 116,\n  F6 = 117,\n  F7 = 118,\n  F8 = 119,\n  F9 = 120,\n  F10 = 121,\n  F11 = 122,\n  F12 = 123,\n\n  NumLock = 144,\n  ScrollLock = 145,\n\n  SemiColon = 186,\n  Equals = 187,\n  Comma = 188,\n  Dash = 189,\n  Period = 190,\n  UnderScore = Dash,\n  PlusSign = Equals,\n  ForwardSlash = 191,\n  Tilde = 192,\n  GraveAccent = Tilde,\n\n  OpenBracket = 219,\n  ClosedBracket = 221,\n  Quote = 222\n}\n  ","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nexport type WithName = { name: string };\n\nexport function nameableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithName, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithName>>({\n        id,\n        name: 'name',\n        entityId: entity.id,\n        state: { name: state.name },\n        update: () => null,\n      }))\n  }\n}\n","export const ON_START_GAME      = 'game:start';\nexport const ON_GAME_WIN        = 'game:win';\nexport const ON_GAME_OVER       = 'game:lose';\n\nexport const ON_LEVEL_LOAD      = 'level:load';\nexport const ON_LEVEL_BEGIN     = 'level:begin';\nexport const ON_LEVEL_COMPLETE  = 'level:finished';\n\nexport const ON_ATTACK          = 'attack:*';\nexport const ON_PLAYER_ATTACK   = 'attack:player';\nexport const ON_ENEMY_ATTACK    = 'attack:enemy';\n\nexport const ON_COLLISION       = 'collision:begin';\n\nexport const ON_DEATH           = 'dead:*';\nexport const ON_ENEMY_DEATH     = 'dead:enemy';\nexport const ON_CHARACTER_DEATH = 'dead:player';\n\nexport const ON_ENEMY_FREE      = 'enemy:free';\nexport const ON_ENEMY_GROUP     = 'enemy:group';\nexport const ON_ENEMY_PATH      = 'enemy:path';\n\nexport const ON_START_ENGINE    = 'engine:start';\nexport const ON_STOP_ENGINE     = 'engine:stop';\n\n// !!! Move to the catalogue I think\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, defaultComponentEvents } from \"../utils\";\nimport { ON_ENEMY_DEATH } from \"../../events\";\n\nconst COMPONENT_NAMESPACE = 'health';\n\nexport interface WithHealth {\n  health: {\n    value: number;\n    immortal?: boolean;\n  };\n};\n\nexport type WithHealthState = WithHealth & { isDead?: boolean; };\n\nexport function killableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithHealthState, events: IComponentEvents, id: number = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithHealthState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { health: state.health, isDead: state.isDead },\n        update: (system: ISystemManager, component: IComponent<WithHealthState>) => {\n\n          if (component.state.health.immortal) {\n            return;\n          }\n\n          const wasDeadBefore = component.state.isDead;\n          const isDeadNow = !(component.state.health.value > 0);\n\n          component.state.isDead = isDeadNow;\n\n          if (!wasDeadBefore && isDeadNow) {\n            // sad times\n            events.onChange!(ON_ENEMY_DEATH, component, entity)\n          }\n        },\n      }))\n  }\n}\n\nexport type IKillableEntity = IComponent<WithHealthState>\n\nexport const selectKillableState = createSelector<WithHealthState>(COMPONENT_NAMESPACE);\nexport const setKillableState    = createSetter<WithHealthState>(selectKillableState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents, IVector } from \"../types\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'geometry';\n\nexport type IGeometry  = { width: number; height: number; };\nexport type WithGeometry = { geometry: IGeometry };\n\nexport function withGeometryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithGeometry, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithGeometry>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { geometry: { width: state.geometry.width, height: state.geometry.height } },\n        update: (system: ISystemManager, component: IWithGeometryEntity) => {\n        },\n      }))\n  }\n}\n\nexport type IWithGeometryEntity = IComponent<WithGeometry>\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, boxMullerRandomGeneratorFactory, clamp, throttle } from \"../utils\";\n\nexport type WithRandomWalkArgs = { controls?: Partial<WithRandomWalk> };\nexport type WithRandomWalk = { direction: IVector; moving: boolean; speed: IVector; disabled: boolean; jitter: number; };\n\nconst defaults = { direction: { x: 0, y: 0 }, moving: true, speed: { x: 2, y: 1.65 }, disabled: false, jitter: 400 }\n\nexport function withRandomWalkFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithRandomWalkArgs, events: IComponentEvents, id = -1) => {\n\n    const options = state.controls || defaults;\n\n    let jitter: number = options.jitter || defaults.jitter;\n    let randomWalkGeneratorX: () => number;\n    let randomWalkGeneratorY: () => number;\n\n    const setJitter = (level?: number) => {\n      jitter = level || defaults.jitter;\n      randomWalkGeneratorX = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n      randomWalkGeneratorY = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n    }\n\n    setJitter(jitter);\n\n    return system.registerComponent(\n      factory<IComponent<WithRandomWalk>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: options.direction || { x: 0, y: 0 },\n          moving: options.moving || true,\n          speed: options.speed || { x: 2, y: 1.65 },\n          disabled: options.disabled || false,\n          jitter,\n        },\n        update: (system: ISystemManager, component: IWithRandomWalkEntity) => {\n\n          if (component.state.jitter !== jitter) {\n            setJitter(jitter);\n          }\n\n          if (!component.state.disabled) {\n            handleMovement(entity, component, system, events, randomWalkGeneratorX, randomWalkGeneratorY);\n  \n            handleMovingFlag(entity, component, system, events);\n          }\n        },\n      }))\n  }\n}\n\ntype IWithRandomWalkEntity = IComponent<WithRandomWalk & Partial<WithPosition>>;\ntype RNGFunc = (...args: any[]) => number;\n\nfunction handleMovement(entity: IEntity, component: IWithRandomWalkEntity, system: ISystemManager, events: IComponentEvents, randomWalkGeneratorX: RNGFunc, randomWalkGeneratorY: RNGFunc) {\n\n  const deltaX = randomWalkGeneratorX();\n  const deltaY = randomWalkGeneratorY();\n\n  component.state.direction.x = clamp(-1, 1, deltaX);\n\n  component.state.direction.y = clamp(-1, 1, deltaY);\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IWithRandomWalkEntity, system: ISystemManager, events: IComponentEvents) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'collidable';\n\nexport type IsCollidable = { collidable?: boolean; };\n\nexport function isCollidableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: IsCollidable, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsCollidable>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collidable: state.collidable || true },\n        update: (system: ISystemManager, component: ICollidableEntity) => {\n          // handleCollisions(component, system);\n        },\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<IsCollidable & WithGeometry & WithPosition>;\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'loot';\n\nexport type IsLootable<T extends any = {}> = { loot?: T; };\n\nexport function lootableFactory<T>(system: ISystemManager) {\n  return (entity: IEntity, state: IsLootable<T>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsLootable<T>>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { loot: state.loot },\n        update: (system: ISystemManager, component: LootableEntity) => {\n          // handleCollisions(component, system);\n        },\n      }))\n  }\n}\n\nexport type LootableEntity<T extends any = {}> = IComponent<IsLootable<T> & WithGeometry & WithPosition>\n\nexport const selectLootableState = createSelector<LootableEntity>(COMPONENT_NAMESPACE);\nexport const setLootableState    = createSetter<LootableEntity>(selectLootableState);\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; }\n\nexport function withWarpAroundPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPosition>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: state.position },\n        update: (system: ISystemManager, component: IComponent<WithPosition>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n  \nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPosition>, events: IComponentEvents) {\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n  \n  if (ifStateProp(boundaryComponent) && ifStateProp(boundaryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n\n    const {x, y} = component.state.position;\n    component.state.position.x = (x < boundary.left) ? (boundary.right - width) : (x > boundary.right) ? boundary.left : x;\n    component.state.position.y = (y < boundary.top) ? (boundary.bottom - height) : (y > boundary.bottom) ? boundary.top : y;\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IComponent, ISystemManager, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents, BoundedTouchingState, BoundedTouchingStateKeys } from \"../types\";\nimport { factory, createSelector, createSetter, keys, defaultBoundary } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'boundary';\n\nexport type WithBoundary = { boundary: Bounds; };\n\nexport function withBoundaryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBoundary, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBoundary>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { boundary: state.boundary || defaultBoundary },\n        update: (system: ISystemManager, component: IBoundedEntity) => {\n          handleBoundaries(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype IBoundedEntity = IComponent<WithGeometry & WithPosition & WithBoundary>\n\nfunction handleBoundaries(entity: IEntity, component: IBoundedEntity, system: ISystemManager, events: IComponentEvents) {\n\n  const boundedEntities = system\n    .getEntitiesByComponentTypes(['geometry', 'position', 'boundary'])\n    .map(id => system.getEntityModel<WithGeometry & WithPosition & WithBoundary>({ id }));\n\n  const ownBounds = component.state.boundary;\n\n  boundedEntities.forEach(o => {\n    const otherBounds = getBounds(o.position, o.geometry);\n    const breakingOut = breakingBounds(ownBounds, otherBounds);\n\n    if (any(breakingOut)) {\n      events.onChange('boundary', component, entity)\n    }\n  });\n}\n\nexport const selectBoundaryState = createSelector<IBoundedEntity>(COMPONENT_NAMESPACE);\nexport const setBoundaryState    = createSetter<IBoundedEntity>(selectBoundaryState);\n\nfunction getBounds(pos: IVector, dimensions: IDimensions) {\n  return {\n    left: pos.x - (dimensions.width / 2),\n    right: pos.x + (dimensions.width / 2),\n    top: pos.y,\n    bottom: pos.y + dimensions.height,\n  }\n}\n\nfunction breakingBounds(own: Bounds, other: Bounds): BoundedTouchingState {\n  const result = {\n    left:   other.left < own.left,\n    top:    other.top < own.top,\n    right:  other.right > own.right,\n    bottom: other.bottom > own.bottom,\n  }\n\n  return result;\n}\n\nfunction any(obj: any) {\n  return Object.keys(obj)\n    .filter(key => !!obj[key]).length > 0;\n}\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'texture';\n\nexport type WithTexture = { texture: string | number; };\n\nexport function withTextureFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithTexture, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithTexture>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state:    { texture: state.texture },\n        update:   (system: ISystemManager, component: IWithTextureEntity) => null,\n      }))\n  }\n}\n\nexport type IWithTextureEntity = IComponent<WithTexture>\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\n\nimport { factory } from \"../utils\";\nimport { WithPosition } from \"./withPosition\";\n\ntype WiggleState = { counter: number; increment: number; };\n\nexport type WithBugWiggleArgs = { wiggling: boolean; wiggleState?: WiggleState; };\nexport type WithBugWiggle = { wiggling: boolean; wiggleState: WiggleState; };\n\nconst BRAKE       = 0.1;\nconst PULSE_WIDTH = 4;\n\nexport function withBugWiggleFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBugWiggleArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBugWiggle>>({\n        id,\n        entityId: entity.id,\n        name: 'wiggle',\n        state: {\n          wiggling: state.wiggling,\n\n          wiggleState: {\n            counter: 0,\n            increment: +1,\n          }\n        },\n        update: (system: ISystemManager, component: IWithBugWiggleEntity) => {\n\n          if (component.state.wiggling) {\n            handleBugWiggle(entity, component, system, events);\n          }\n        },\n      }))\n  }\n}\n\ntype IWithBugWiggleEntity = IComponent<WithBugWiggle & Partial<WithPosition>>;\n\nfunction handleBugWiggle(entity: IEntity, component: IWithBugWiggleEntity, system: ISystemManager, events: IComponentEvents) {\n\n  if (!component.state.wiggling) {\n    return;\n  }\n\n  const positionComponent = system.getEntityComponent<WithPosition>(entity, 'position');\n\n  let {counter, increment} = component.state.wiggleState;\n\n  if(counter == PULSE_WIDTH) {\n    component.state.wiggleState.increment = -1;\n  };\n\n  if(counter == -PULSE_WIDTH) {\n    component.state.wiggleState.increment = +1;\n  };\n\n  component.state.wiggleState.counter+= increment;\n  positionComponent.state.position.x += (counter * BRAKE);\n}\n","import { ISystemManager, IVector, IDimensions } from \"../../engine/types\";\nimport { createMob } from \"../Domain/mob\";\nimport { defaultBoundary } from \"../../engine/utils\";\n\nexport function createEnemy(\n    system:           ISystemManager,\n    textureId:        number,\n    name:             string,\n    position?:        IVector,\n    geometry?:        IDimensions,\n) {\n\n  const entity = createMob(system, {\n    name,\n\n    texture: textureId,\n\n    wiggling: true,\n\n    controls: {\n      disabled: true,\n    },\n\n    health: {\n      value: 1,\n    },\n\n    position: position || {\n      x: -999,\n      y: -999,\n    },\n\n    geometry: geometry ||{\n      width:  64,\n      height: 64,\n    },\n\n    loot: {\n      points: 10,\n    },\n\n    boundary: defaultBoundary,\n  });\n\n  return entity;\n}\n","import { IEntity, ISystemManager } from \"../../engine/types\";\nimport { nameableFactory,               WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,               WithHealthState } from \"../../engine/components/killable\";\nimport { withGeometryFactory,           WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withRandomWalkFactory,         WithRandomWalkArgs } from \"../../engine/components/withRandomWalk\";\nimport { isCollidableFactory,           IsCollidable } from \"../../engine/components/isCollidable\";\nimport { lootableFactory,               IsLootable } from \"../../engine/components/lootable\";\nimport { withWarpAroundPositionFactory, WithPosition } from \"../../engine/components/withWrapAroundPosition\";\nimport { IPointsLoot } from \"../types\";\nimport { withBoundaryFactory, WithBoundary } from \"../../engine/components/withBoundary\";\nimport { WithPositionState } from \"../../engine/components/withPosition\";\nimport { withTextureFactory, WithTexture } from \"../../engine/components/withTexture\";\nimport { withBugWiggleFactory, WithBugWiggle, WithBugWiggleArgs } from \"../../engine/components/withBugWiggle\";\n\n\nexport function createMob(\n  system:   ISystemManager,\n  options:  MobModelArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withHealth      = killableFactory(system);\n  const withPosition    = withWarpAroundPositionFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withTexture     = withTextureFactory(system);\n  const withRandomWalk  = withRandomWalkFactory(system);\n  const withBugWiggle   = withBugWiggleFactory(system);\n  const isCollidable    = isCollidableFactory(system);\n  const withBoundary    = withBoundaryFactory(system);\n  const isLootable      = lootableFactory<IPointsLoot>(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withHealth(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withTexture(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBoundary(entity, options, system.events)\n  );\n  system.registerComponent(\n    withRandomWalk(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBugWiggle(entity, options, system.events)\n  );\n  system.registerComponent(\n    isCollidable(entity, options, system.events)\n  );\n  system.registerComponent(\n    isLootable(entity, options, system.events)\n  );\n  return entity;\n}\n\nexport type MobModelArgs =\n  WithName                &\n  WithHealthState         &\n  WithPosition            &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggleArgs       &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n\nexport type MobModel =\n  WithName                &\n  WithHealthState         &\n  WithPositionState       &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggle           &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n","import MenuMusic from '../audio/Music/game-menu.mp3'\nimport MainMusic from '../audio/Music/game-main.mp3'\nimport EndMusic from '../audio/Music/game-end.mp3'\nimport SummaryMusic from '../audio/Music/game-main-summary.mp3'\n\nimport GameOverSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav'\nimport YouWinSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav'\nimport LevelWinSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav'\nimport NextLevelSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav'\nimport NewGameSound from '../audio/General Sounds/Interactions/sfx_sounds_interaction1.wav'\nimport PauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav'\nimport UnPauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav'\nimport { Omit } from 'react-router';\n\n\nexport const mkAudioSrc = (src: string, opts?: Omit<IHowlProperties, 'src'>) => ({ src: [src], ...opts });\n\nexport enum SpriteTextureIds {\n  Player          = 0,\n  Bug             = 1,\n  CrabBug         = 2,\n  HelmetBug       = 3,\n  PincerBug       = 4,\n  SonicBug        = 5,\n}\n\nexport const Sfx = {\n  NEW_GAME:     'newgame',\n  GAMEOVER:     'gameover',\n  YOU_WIN:      'youwin',\n  LEVEL_WIN:    'levelwin',\n  PAUSE:        'pause',\n  UNPAUSE:      'unpause',\n  NEXT_LEVEL:   'nextlevel',\n}\n\nexport const Songs = {\n  MENU:     'game-menu',\n  GAME:     'game-main',\n  END:      'game-end',\n  SUMMARY:  'game-main-summary',\n}\n\nexport const SongLibrary = {\n  [Songs.MENU]:     mkAudioSrc(MenuMusic,     { volume: 0.8 }),\n  [Songs.GAME]:     mkAudioSrc(MainMusic,     { volume: 0.4 }),\n  [Songs.END]:      mkAudioSrc(EndMusic,      { volume: 0.8 }),\n  [Songs.SUMMARY]:  mkAudioSrc(SummaryMusic,  { volume: 0.8 }),\n}\n\nexport const SfxLibrary = {\n  [Sfx.GAMEOVER]:    mkAudioSrc(GameOverSound),\n  [Sfx.LEVEL_WIN]:   mkAudioSrc(LevelWinSound),\n  [Sfx.NEXT_LEVEL]:  mkAudioSrc(NextLevelSound),\n  [Sfx.YOU_WIN]:     mkAudioSrc(YouWinSound),\n  [Sfx.NEW_GAME]:    mkAudioSrc(NewGameSound),\n  [Sfx.PAUSE]:       mkAudioSrc(PauseGameSound),\n  [Sfx.UNPAUSE]:     mkAudioSrc(UnPauseGameSound),\n}\n","import { IEntity, WithComponentMeta, ISystemManager } from \"../../engine/types\";\nimport * as React from 'react';\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\ninterface WithEntityProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withEntity = <P extends MobModel | CharacterModel> (\n    Component: React.ComponentType<IModelType<P>>,\n): React.ComponentType<WithEntityProps> => {\n  function WithEntity(props: WithEntityProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <Component {...rest} model={model} system={system} />;\n  };\n\n  return WithEntity;\n}\n","import {useState} from 'react';\n\n\nexport const withAnimationState = (options: WithAnimationOptions) => {\n  const [animations, setAnimations] = useState(options.animations);\n  const [currentFrame, setCurrentFrame] = useState(options.currentFrame || getDefaultFrame(options));\n  const [currentState, setCurrentState] = useState(options.currentState);\n  const [timers, setTimers] = useState<NodeJS.Timer[]>([])\n\n  function queueFrame(frame: string, when: number) {\n    const setFrame = (fr: string) => setCurrentFrame(fr);\n\n    timers.push(setTimeout(() => setFrame(frame), when));\n  }\n\n  if (different(options.currentState, currentState)) {\n    let buffer: number = 0;\n\n    setCurrentState(options.currentState);\n\n    animations[currentState]\n      .forEach(({ frame, duration }) => {\n        queueFrame(frame, buffer);\n        buffer += duration;\n      }\n    )\n    \n    const timer = setTimeout(() => {\n      options.onFinished(currentState)\n    }, buffer);\n\n    setTimers(timers.concat(timer));\n  }\n\n  return { currentFrame, setCurrentState };\n}\n\nexport interface WithAnimationOptions {\n  animations:       IAnimations;\n  currentState:     keyof IAnimations;\n  onFinished:       (...args: any[]) => void;\n  currentFrame?:    string;\n}\n\ninterface IFrame {\n  frame:      string;\n  duration:   number;\n}\n\ninterface IAnimations {\n  normal: IFrame[];\n  death:  IFrame[];\n}\n\nexport function different<T>(a: T, b: T) {\n  return a !== b;\n}\n\nexport const fr = (frame: string, duration: number) => ({ frame, duration });\n\nexport function getDefaultFrame(options: WithAnimationOptions): string {\n  return options.animations[options.currentState][0].frame;\n}\n","import { ISystemManager, IAudioCollectionInitializer, WithComponentMeta, IComponent, IEntity, EntityIdType } from '../../engine/types';\nimport {useEffect} from 'react';\n\nimport { ON_DEATH, ON_ATTACK } from '../../events';\nimport { keys } from '../../engine/utils';\nimport { WithHealthState } from '../../engine/components/killable';\n\n\nexport const withSoundEffects = <T>(options: WithSoundEffectsOptions<T>) => {\n\n  const playDeathAudio = (component: IComponent<WithHealthState>, entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'death');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  const playAttackAudio = (entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'shoot');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  useEffect(() => {\n    options.system.events.registerEvent(ON_DEATH,         playDeathAudio);\n    options.system.events.registerEvent(ON_ATTACK,        playAttackAudio);\n\n    keys(options.sounds).map(key => {\n      const collectionKey = mkAudioCollectionKey(options.entity.id, `${key}`);\n\n      options.system.audio.registerSound(collectionKey, {\n        src: [options.sounds[key]],\n        volume: 0.2,\n      })\n    })\n\n    return function cleanup() {\n      options.system.events.unRegisterEvent(ON_DEATH,     playDeathAudio);\n      options.system.events.unRegisterEvent(ON_ATTACK,    playAttackAudio);\n  \n      keys(options.sounds).map((actionType: string | number) => {\n        const collectionKey = mkAudioCollectionKey(options.entity.id, `${actionType}`);\n\n        options.system.audio.unRegisterSound(collectionKey);\n      })\n    }\n  }, []);\n};\n\nexport type WithSoundEffectsOptions<T> = {\n  entity:         WithComponentMeta<T>\n  system:         ISystemManager;\n  sounds:         IAudioCollectionInitializer;\n}\n\nexport function mkAudioCollectionKey(entityId: EntityIdType, action: string) {\n  return `entity-${entityId}:${action}`;\n}\n","import { IModelType } from './withEntity';\nimport * as React from 'react';\nimport { Omit } from 'react-router';\n\nimport { CharacterModel } from '../../game/Domain/character';\nimport { MobModel } from '../../game/Domain/mob';\n\nimport { withAnimationState, WithAnimationOptions } from '../hooks/withAnimationState';\nimport { withSoundEffects } from '../hooks/withSoundEffects';\nimport { IAudioCollectionInitializer } from '../../engine/types';\n\n\ninterface WithSpriteEffectsOptions extends WithAnimationOptions {\n  elementId:          string;\n  sounds:             IAudioCollectionInitializer;\n}\n\ntype HOCModelType = MobModel | CharacterModel;\n\ntype ISpriteState = 'normal' | 'death';\n\nexport function withSpriteEffects<T extends HOCModelType>(\n  options: Omit<WithSpriteEffectsOptions, 'onFinished'>\n): React.ComponentType<IModelType<T>> {\n  return function WithSpriteEffectsHOC(props: IModelType<T>) {\n    const [hidden, setHidden] = React.useState(() => false)\n    const [dead, setDead]     = React.useState(() => false)\n\n    const {currentFrame, setCurrentState} = withAnimationState({\n      animations:             options.animations,\n      currentState:           options.currentState,\n\n      onFinished:             (state: ISpriteState) =>\n        { if (state === 'death') setHidden(true); }\n    });\n\n    withSoundEffects<T>({\n      entity:         props.model,\n      system:         props.system,\n      sounds:         options.sounds,\n    });\n\n    if (!hidden && !dead && props.model.isDead) {\n      setCurrentState('death');\n\n      setDead(true);\n    }\n  \n    const styles: React.CSSProperties = {\n      position:               'absolute',\n      backgroundImage:        `url(${currentFrame})`,\n      backgroundSize:         'contain',\n      backgroundPosition:     'center',\n      width:                  '64px',\n      height:                 '64px',\n      left:                   hidden ? -9999 : props.model.position.x,\n      top:                    hidden ? -9999 : props.model.position.y,\n      display:                cssDisplayValue(hidden),\n    }\n  \n    return (\n      <div id={options.elementId} className=\"sprite\" style={styles} />\n    )\n  }\n}\n\nfunction cssDisplayValue(dead: boolean) {\n  return dead ? 'none' : ''\n}\n","import { CharacterModel } from '../../../game/Domain/character';\n\nimport { withEntity } from '../../Hoc/withEntity';\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Cannon/sfx_wpn_cannon1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedPlayer = withSpriteEffects<CharacterModel>({\n  elementId: 'player',\n\n  currentState: 'normal',\n\n  animations: {\n    normal: [\n      fr(require('../../../assets/player/ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/player/explosion-1/explosion-1-01.png'), 0),\n      fr(require('../../../assets/player/explosion-1/explosion-1-02.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-03.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-04.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-05.png'), 75),\n    ],\n  },\n\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n});\n\nexport const ConnectedPlayer = withEntity<CharacterModel>(AnimatedPlayer)\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_soft5.wav';\n\nexport const AnimatedBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/enemy/enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_hard12.wav';\n\n\nexport const AnimatedCrabBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/crab-bug/crab-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Clusters/sfx_exp_cluster1.wav';\n\nexport const AnimatedHelmetBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/helmet-bug/helmet-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Odd/sfx_exp_odd1.wav';\n\nexport const AnimatedPincerBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/pincer-bug/pincer-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedSonicBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/sonic-enemy/sonic-enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","\nimport { SpriteTextureIds } from \"../../game/catalogue\";\nimport { ConnectedPlayer } from \"./Player/Player\";\nimport { AnimatedBug, AnimatedCrabBug, AnimatedHelmetBug, AnimatedPincerBug, AnimatedSonicBug } from \"./NPCs\";\n\n\nexport const SpriteTextureCollection: TextureIdIndexed = {\n    [SpriteTextureIds.Player]:      ConnectedPlayer,\n    [SpriteTextureIds.Bug]:         AnimatedBug,\n    [SpriteTextureIds.CrabBug]:     AnimatedCrabBug,\n    [SpriteTextureIds.HelmetBug]:   AnimatedHelmetBug,\n    [SpriteTextureIds.PincerBug]:   AnimatedPincerBug,\n    [SpriteTextureIds.SonicBug]:    AnimatedSonicBug,\n}\n\ntype TextureIdIndexed = { [K in SpriteTextureIds]: any; }\n","\nimport { IEntity, WithComponentMeta, ISystemManager } from \"../../engine/types\";\nimport * as React from 'react';\n\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\nimport { SpriteTextureCollection } from \"../Containers/Sprites\";\nimport { SpriteTextureIds } from \"../../game/catalogue\";\n\nexport interface WithTextureProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withTexture = <P extends MobModel | CharacterModel> (\n  textureId: SpriteTextureIds,\n): React.ComponentType<WithTextureProps> => {\n  const ConnectedComponent: React.ComponentType<IModelType<P>> = SpriteTextureCollection[textureId]\n  function WithTextureHOC(props: WithTextureProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <ConnectedComponent {...rest} model={model} system={system} />;\n  };\n\n  return WithTextureHOC;\n}\n","import { ISystemManager } from \"../engine/types\";\nimport { MouseEvent } from \"react\";\nimport { createEnemy } from \"../game/factories/enemy\";\nimport { withTexture } from \"./Hoc/withTexture\";\nimport { ILoadedEnemy } from \"./Levels/types\";\n\nexport function loadLevel(system: ISystemManager, enemyPositions: number[][]): ILoadedEnemy[] {\n  let enemies: ILoadedEnemy[] = [];\n\n  let x: number = 0;\n  let y: number = 0;\n\n  for (const row of enemyPositions) {\n    for (const enemyTypeId of row) {\n      if (enemyTypeId !== 0) {\n        const geometry = {\n          width:    64,\n          height:   64,\n        }\n  \n        const position = {\n          x:    x * geometry.width,\n          y:    y * geometry.height,\n        }\n  \n        const entity = createEnemy(system, enemyTypeId, JSON.stringify(position), position, geometry)\n        enemies.push({\n          component: withTexture(enemyTypeId),\n          entity,\n        });\n      }\n\n      x++;\n    }\n\n    x = 0;\n    y++;\n  }\n\n  return enemies;\n}\n\nexport function withBlur(handler: any) {\n  return (event: MouseEvent<HTMLButtonElement>): void | undefined => {\n    event.currentTarget.blur();\n    handler(event);\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  updateFrequency?: number;\n}\n\ninterface State {\n  value: number;\n}\n\nexport class FPS extends React.Component<Props, State> {\n  private lastLoop: number = (new Date()).getMilliseconds();\n  private count: number = 1;\n  private fps: number = 0;\n  private throttled: boolean = false;\n  private handler: number | undefined;\n\n  static defaultProps = {\n    updateFrequency: 500,\n  }\n\n  state = {\n    value: 0,\n  }\n\n  componentDidMount() {\n    this.setFps(this.countFps());\n    this.loop();\n  }\n\n  componentWillUnmount() {\n    if (this.handler) {\n      cancelAnimationFrame(this.handler)\n    }\n  }\n\n  countFps = () => {\n    const currentLoop = (new Date()).getMilliseconds();\n    if (this.lastLoop > currentLoop) {\n      this.fps = this.count;\n      this.count = 1;\n    } else {\n      this.count += 1;\n    }\n    this.lastLoop = currentLoop;\n    return this.fps;\n  };\n  \n  loop = () => {\n    this.handler = requestAnimationFrame(() => {\n      this.setFps(this.countFps());\n      this.loop();\n    });\n  }\n\n  setFps = (value: number) => {\n    if (!this.throttled) {\n      this.setState({ value })\n      this.throttled = true;\n      this.handler = setTimeout(() => {\n        this.throttled = false;\n      }, this.props.updateFrequency)\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"fps\">Fps: {this.state.value}</div>\n    );\n  }\n}\n","import { ISystemManager, IFactoryComponent } from '../../engine/types';\nimport * as React from 'react';\nimport './styles/Dev.style.css';\n\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Draggable from 'react-draggable';\n\nimport { pp } from '../../engine/utils';\nimport { withBlur } from '../utils';\nimport { withEntity } from '../Hoc/withEntity';\nimport { FPS } from './FPS';\n\ninterface Props {\n  system:   ISystemManager;\n  onStart:  () => void;\n  onStop:   () => void;\n  onTick:   () => void;\n  onSave:   () => void;\n  onLoad:   () => void;\n}\n\nconst EntityInspector = withEntity(props =>\n  <pre>{pp(props.model)}</pre>\n);\n\nexport const DevScreen = (props: Props) => {\n  const [entityId, setEntityId] = useState(0);\n\n  const [open, setOpen]         = useState(false);\n  const [dragging, setDrag]     = useState(false);\n\n  const setDragFalse = () => setDrag(false);\n  const setDragTrue  = () => setDrag(true);\n  const toggleOpen   = () => setOpen(!open);\n\n  const handleClick = () => {\n    dragging ? open : toggleOpen();\n    setDragFalse();\n  }\n\n  return (\n    <Draggable>\n      <div id=\"devscreen\" className={'container'}>\n\n        <div id=\"header\">\n          <span className=\"float-left title\" onMouseUp={handleClick} onMouseDown={setDragFalse} onMouseMove={setDragTrue}>\n            <h3>Devtools</h3>\n          </span>\n          <i id=\"close-x\" className=\"icon close float-right\" onClick={handleClick}></i>\n        </div>\n\n        <div className={classNames(!open && 'hidden')}>\n          <span className=\"links\">\n            <Link to=\"/intro\">Intro</Link>{' | '}\n            <Link to=\"/menu\">Menu</Link>{' | '}\n            <Link to=\"/game\">Game</Link>\n          </span>\n\n          <Buttons {...props} />\n\n          <p>Epoch: {props.system.epoch}</p>\n\n          <FPS />\n\n          <div id=\"entity-viewer\">\n            Entities\n            <select onChange={e => {\n              const value = e.currentTarget.value;\n              setEntityId(parseInt(value));\n            }}>\n              {props.system.getState().entities.map(o => {\n                const { name } = props.system.getEntityModel<IFactoryComponent>(o);\n                return <option key={o.id} value={o.id}>{name}</option>\n              })}\n            </select>\n            <div className=\"scrollable p-1\">\n              <EntityInspector entity={{ id: entityId }} system={props.system} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\n\nfunction Buttons(props: Props) {\n  return (\n    <>\n      <button className=\"btn is-primary\" onClick={withBlur(props.onStart)}>Start</button>\n      <button className=\"btn is-error\" onClick={withBlur(props.onStop)}>Stop</button>\n      <button className=\"btn is-success\" onClick={withBlur(props.onTick)}>Evolve</button>\n      <button className=\"btn\" onClick={withBlur(props.onSave)}>Save</button>\n      <button className=\"btn is-warning\" onClick={withBlur(props.onLoad)}>Load</button>\n    </>\n  )\n}\n\nexport function classNames(...classes: (string | boolean | undefined | null)[]) {\n  return classes.filter(o => typeof o === 'string').join(' ');\n}\n","import * as React from 'react';\nimport \"./styles/Layout.style.css\";\n\ninterface Props {\n  id?:            string;\n  className?:     string;\n  topLeft?:       React.ReactNode;\n  topCenter?:     React.ReactNode;\n  topRight?:      React.ReactNode;\n  middleLeft?:    React.ReactNode;\n  middleCenter?:  React.ReactNode;\n  middleRight?:   React.ReactNode;\n  bottomLeft?:    React.ReactNode;\n  bottomCenter?:  React.ReactNode;\n  bottomRight?:   React.ReactNode;\n  background?:    React.ReactNode;\n  children:       React.ReactNode;\n  after?:         React.ReactNode;\n}\n\nexport function Layout(props: Props) {\n  return (\n    <div id={props.id} className={`layout ${props.className}`}>\n      <div className=\"top left\">{props.topLeft}</div>\n      <div className=\"top center\">{props.topCenter}</div>\n      <div className=\"top right\">{props.topRight}</div>\n      <div className=\"middle left\">{props.middleLeft}</div>\n      <div className=\"middle center\">{props.middleCenter}</div>\n      <div className=\"middle right\">{props.middleRight}</div>\n      <div className=\"bottom left\">{props.bottomLeft}</div>\n      <div className=\"bottom center\">{props.bottomCenter}</div>\n      <div className=\"bottom right\">{props.bottomRight}</div>\n      <div className=\"background\">{props.background}</div>\n      <div className=\"gamescreen\">{props.children}</div>\n      {props.after}\n    </div>\n  )\n}\n  ","import * as React from 'react';\nimport { Layout } from '../Layouts/Base';\n\ninterface Props {\n  onPlayerInput: (ev: KeyboardEvent) => void;\n}\n\nexport class Intro extends React.Component<Props> {\n\n  componentDidMount() {\n    document.addEventListener('keypress', this.props.onPlayerInput);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keypress', this.props.onPlayerInput);\n  }\n\n  render() {\n    return (\n      <Layout id=\"intro\" className=\"game-screen\">\n        Fancy stuff here (Intro)\n      </Layout>\n    )\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n    value: number;\n  }\n  \n  export function Lives(props: Props) {\n    return (\n      <div className=\"flex rows\">\n        <span>1UP</span>\n        <span>{props.value}</span>\n      </div>\n    )\n  }\n  ","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function HighScore(props: Props) {\n  return (\n    <div className=\"flex rows\">\n      <span>High Score</span>\n      <span className=\"center-text\">{props.value}</span>\n    </div>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function Credits(props: Props) {\n  return (\n    <span>Credits {props.value}</span>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: string | number | undefined;\n}\n\nexport function LevelStatus(props: Props) {\n  return props.value\n    ? <p>{`Level: ${props.value}`}</p>\n    : null;\n}\n","import * as React from 'react';\n\ninterface Props {\n  onClick: () => void;\n}\n\nexport function RestartButton(props: Props) {\n  return <button className=\"btn is-success\" onClick={props.onClick}>Restart</button>;\n}\n","import * as React from 'react';\nimport './styles/Overlay.style.css';\n\nimport { Layout } from \"./Base\";\nimport { Lives } from \"../Components/Lives\";\nimport { HighScore } from \"../Components/HighScore\";\nimport { Credits } from \"../Components/Credits\";\nimport { LevelStatus } from '../Components/LevelStatus';\nimport { RestartButton } from '../Components/RestartButton';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  id:         string;\n  className?: string;\n  level?:     string | number;\n  lives:      number;\n  score:      number;\n  credits:    number;\n  background: React.ReactNode;\n  children:   React.ReactNode;\n  onRestart: () => void;\n}\n\nexport function Gui(props: Props) {\n  return (\n    <Layout\n      id={props.id}\n      className={classNames(props.className, 'retro-container')}\n      topLeft={<Lives value={props.lives} />}\n      topCenter={<HighScore value={props.score} />}\n      topRight={<LevelStatus value={props.level} />}\n      bottomLeft={<Credits value={props.credits} />}\n      background={props.background}\n      bottomRight={<RestartButton onClick={props.onRestart} />}\n    >\n      {props.children}\n    </Layout>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/Logo.style.css';\n\nexport function NewGame() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"logo-container\" className=\"slide-up\">\n        <div id=\"logo\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default NewGame;\n","\nexport function Key()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n\n//Action List\nKey.DOWN = -1;\nKey.UP = 1;\nKey.RESET = 0;\n\n//Update key status based new state\nKey.prototype.update = function(action)\n{\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n\n\tif(action === Key.DOWN)\n\t{\n\t\tif(!this.pressed)\n\t\t{\n\t\t\tthis.justPressed = true;\n\t\t}\n\t\tthis.pressed = true;\n\t}\n\telse if(action === Key.UP)\n\t{\n\t\tif(this.pressed)\n\t\t{\n\t\t\tthis.justReleased = true;\n\t\t}\n\t\tthis.pressed = false;\n\t}\n\telse if(action === Key.RESET)\n\t{\n\t\tthis.justReleased = false;\n\t\tthis.justPressed = false;\n\t}\n}\n\n//Set key status\nKey.prototype.set = function(justPressed, pressed, justReleased)\n{\n\tthis.pressed = pressed;\n\tthis.justPressed = justPressed;\n\tthis.justReleased = justReleased;\n}\n\n//Reset key to default values\nKey.prototype.reset = function()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n","import {Key} from './Key';\n\n\nexport function Keyboard() {\n\tthis.keys = [];\n\tthis.actions = [];\n\n\t//Initialize Keys\n\tfor(let i = 0; i < 256; i++)\n\t{\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Events\n\tthis.events = [];\n\n\t//Actions pointer\n\tconst actions = this.actions;\n\n\t//Key down\n\tthis.events.push([window, \"keydown\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.DOWN);\n\t}]);\n\n\t//Key up\n\tthis.events.push([window, \"keyup\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.UP);\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Update key flags syncronously\nKeyboard.prototype.update = function()\n{\n\tlet end = 0;\n\n\twhile(this.actions.length > end)\n\t{\n\t\tlet key = this.actions.shift();\n\t\tlet action = this.actions.shift();\n\n\t\tthis.keys[key].update(action);\n\n\t\tif(this.keys[key].justReleased || this.keys[key].justPressed)\n\t\t{\n\t\t\tthis.actions.push(key);\n\t\t\tthis.actions.push(Key.RESET);\n\t\t\tend += 2;\n\t\t}\n\t}\n}\n\n//Reset keyboard status\nKeyboard.prototype.reset = function()\n{\n\t//Clear actions array\n\tthis.actions = [];\n\n\t//Reset all keys\n\tfor(let i = 0; i < this.keys.length; i++)\n\t{\n\t\tthis.keys[i].reset();\n\t}\n}\n\n//Check if a key is pressed\nKeyboard.prototype.keyPressed = function(key)\n{\n\treturn this.keys[key].pressed;\n}\n\n//Check is a key as just pressed\nKeyboard.prototype.keyJustPressed = function(key)\n{\n\treturn this.keys[key].justPressed;\n}\n\n//Check if a key was just released\nKeyboard.prototype.keyJustReleased = function(key)\n{\n\treturn this.keys[key].justReleased;\n}\n\n//Dispose keyboard events\nKeyboard.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tlet event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n\n//Key codes\nKeyboard.TAB = 9;\nKeyboard.ENTER = 13;\nKeyboard.SHIFT = 16;\nKeyboard.CTRL = 17;\nKeyboard.ALT = 18;\nKeyboard.CAPS_LOCK = 20;\nKeyboard.ESC = 27;\nKeyboard.SPACEBAR = 32;\nKeyboard.PAGE_UP = 33;\nKeyboard.PAGE_DOWN = 34;\nKeyboard.END = 35;\nKeyboard.HOME = 36;\nKeyboard.INSERT = 45;\nKeyboard.DEL = 46;\n\nKeyboard.LEFT = 37;\nKeyboard.RIGHT = 39;\nKeyboard.UP = 38;\nKeyboard.DOWN = 40;\n\nKeyboard.NUM0 = 48;\nKeyboard.NUM1 = 49;\nKeyboard.NUM2 = 50;\nKeyboard.NUM3 = 51;\nKeyboard.NUM4 = 52;\nKeyboard.NUM5 = 53;\nKeyboard.NUM6 = 54;\nKeyboard.NUM7 = 55;\nKeyboard.NUM8 = 56;\nKeyboard.NUM9 = 57;\n\nKeyboard.A = 65;\nKeyboard.B = 66;\nKeyboard.C = 67;\nKeyboard.D = 68;\nKeyboard.E = 69;\nKeyboard.F = 70;\nKeyboard.G = 71;\nKeyboard.H = 72;\nKeyboard.I = 73;\nKeyboard.J = 74;\nKeyboard.K = 75;\nKeyboard.L = 76;\nKeyboard.M = 77;\nKeyboard.N = 78;\nKeyboard.O = 79;\nKeyboard.P = 80;\nKeyboard.Q = 81;\nKeyboard.R = 82;\nKeyboard.S = 83;\nKeyboard.T = 84;\nKeyboard.U = 85;\nKeyboard.V = 86;\nKeyboard.W = 87;\nKeyboard.X = 88;\nKeyboard.Y = 89;\nKeyboard.Z = 90;\n\nKeyboard.F1 = 112;\nKeyboard.F2 = 113;\nKeyboard.F3 = 114;\nKeyboard.F4 = 115;\nKeyboard.F5 = 116;\nKeyboard.F6 = 117;\nKeyboard.F7 = 118;\nKeyboard.F8 = 119;\nKeyboard.F9 = 120;\nKeyboard.F10 = 121;\nKeyboard.F11 = 122;\nKeyboard.F12 = 123;","import {useEffect} from 'react';\nimport { Keyboard } from '../../extern/Keyboard';\n\nexport const withEnterKeyEffect = (onEnter: () => void) => useEffect(() => {\n  const enterKeyHandler = (e: KeyboardEvent) => {\n    if (e.keyCode === Keyboard.ENTER) {\n      onEnter();\n    }\n  }\n\n  document.addEventListener('keypress', enterKeyHandler)\n\n  return function cleanup() {\n    document.removeEventListener('keypress', enterKeyHandler);\n  }\n}, []);\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport StarFieldLogo from '../Backgrounds/NewGame';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { ON_START_GAME } from '../../events';\n\nimport { classNames } from '../Development/Dev';\nimport { Songs, Sfx } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\n\n\nexport function Menu(props: IGameState) {\n  const [ready, setReady] = useState(false);\n\n  function handleStartGame() {\n    setTimeout(() => {\n      props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n\n    setTimeout(() => {\n      props.system.events.emit(ON_START_GAME);\n    }, 2000);\n  }\n\n  useEffect(() => {\n    setTimeout(() => setReady(true), 3000);\n  }, []);\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.MENU);\n\n    return () => {\n      props.system.audio.stopSong(Songs.MENU);\n    }\n  }, []);\n\n  withEnterKeyEffect(once(handleStartGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"menu\"\n      score={0}\n      credits={0}\n      lives={0}\n      background={<StarFieldLogo />}\n      onRestart={handleStartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in', 'neon', 'retro-red')} onMouseUp={handleStartGame}>\n            <span>Press Enter</span>\n          </p>\n        </div>\n      </div>\n      <div className=\"overlay\">AV-1</div>\n    </Gui>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\n\nexport function StarField() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n    </div>\n  );\n}\n\nexport default StarField;\n","import * as React from 'react';\n\nexport class Level extends React.Component {\n  render() {\n    return (\n      <div className=\"screen level\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ProjectileModel } from '../../../game/Domain/projectile';\n\ninterface Props {\n  model: ProjectileModel;\n}\n\nexport function Bullet(props: Props) {\n  const styles = getStyles(props);\n  return (\n    <div id=\"bullet\" className=\"sprite\" style={styles} />\n  )\n}\n\nfunction getStyles(props: Props): React.CSSProperties {\n  return {\n    position:     'absolute',\n    outline:      '1px solid white',\n    borderRadius: '25%',\n    height:       '32px',\n    width:        '0px',\n    left:         props.model.position.x + 30,\n    top:          props.model.position.y,\n    display:      cssDisplayValue(props.model),\n  }\n}\n\nfunction cssDisplayValue(model: ProjectileModel) {\n  return (model.offscreen) ? 'none' : ''\n}\n","import * as React from 'react';\nimport { ISystemManager } from '../../engine/types';\nimport { LevelProps, ILoadedEnemy } from '../Levels/types';\nimport { Level } from '../Levels/Base';\nimport { ConnectedPlayer } from '../Containers/Player/Player';\nimport { Bullet } from '../Containers/Weapons/Bullet';\nimport { once, first } from '../../engine/utils';\nimport { ON_ENEMY_DEATH, ON_LEVEL_COMPLETE, ON_ENEMY_FREE, ON_ENEMY_GROUP, ON_LEVEL_BEGIN } from '../../events';\nimport { WithControls } from '../../engine/components/controllable';\nimport { WithRandomWalk } from '../../engine/components/withRandomWalk';\n\nfunction arrayRandom<T>(items: T[]) {\n  return items[Math.floor(Math.random()*items.length)];\n}\n\ninterface WithGameLevelOptions {\n  enemyPositions: number[][];\n  levelId:        string | number;\n  completeEvent?: string;\n}\n\nexport const withGameLevel = (\n  options: WithGameLevelOptions\n): React.ComponentType<LevelProps> => {\n  return class LevelHOC extends React.Component<LevelProps, State> {\n    private interval: any;\n\n    state = {\n      enemyPositions: options.enemyPositions,\n      levelId: options.levelId,\n      \n      enemies: [] as ILoadedEnemy[],\n      enemiesDead: 0,\n      ready: false,\n    }\n  \n    componentDidMount() {\n      const {enemyPositions} = this.state;\n      const {system, loadLevel} = this.props;\n  \n      const enemies = loadLevel(system, enemyPositions);\n  \n      this.setState({ enemies, ready: true })\n  \n      system.events.registerEvent(ON_ENEMY_DEATH, this.countDeath);\n      system.events.registerEvent(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.registerEvent(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.registerEvent(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n    }\n  \n    componentDidUpdate(nextProps: LevelProps, nextState: State) {\n      if (!nextState.ready) {\n        return;\n      }\n  \n      if (nextState.enemiesDead === nextState.enemies.length) {\n        this.onLevelComplete(this.props.system, this.state.levelId);\n      }\n    }\n  \n    componentWillUnmount() {\n      const {system} = this.props;\n\n      clearInterval(this.interval);\n      \n      system.events.unRegisterEvent(ON_ENEMY_DEATH, this.countDeath);\n      system.events.unRegisterEvent(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.unRegisterEvent(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.unRegisterEvent(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n      \n      this.state.enemies.forEach(o =>\n        system.unRegisterEntity(o.entity.id)\n      );\n    }\n  \n    countDeath = () => {\n      this.setState(state => ({\n        enemiesDead: state.enemiesDead + 1,\n      }));\n    }\n  \n    onLevelComplete = once((system: ISystemManager, level: number | string) => {\n      system.events.emit(options.completeEvent || ON_LEVEL_COMPLETE, level);\n      clearInterval(this.interval);\n    })\n  \n    enemyFree = () => {\n      const maybeComponent = arrayRandom(this.state.enemies.map(o => o.entity));\n\n      const controlComponent = this.props.system\n        .getEntityComponent<WithRandomWalk>(maybeComponent, 'controls');\n\n      if (controlComponent) {\n        controlComponent.state.disabled = false;\n      }\n    }\n\n    enemyGroup = () => {}\n   \n    startFreeEnemyInterval = () => {\n      this.interval = setInterval(() => {\n        this.props.system.events.emit(ON_ENEMY_FREE);\n      }, 8000);\n    }\n\n    render() {\n      const {player, bullet1, bullet2, system} = this.props.state;\n      return (\n        <Level>\n    \n          <ConnectedPlayer entity={player} system={system} />\n    \n          <Bullet model={bullet1} />\n          <Bullet model={bullet2} />\n    \n          {this.state.enemies.map((enemy: ILoadedEnemy) => {\n            const ConnectedEnemy = enemy.component;\n            return (\n              <ConnectedEnemy\n                key={enemy.entity.id}\n                entity={enemy.entity}\n                system={system}\n              />\n            )\n          })\n        }\n        </Level>\n      )\n    }\n  }\n}\n\ninterface State {\n  enemies:          ILoadedEnemy[];\n  enemyPositions:   number[][];\n  enemiesDead:      number;\n  levelId:          string | number;\n  ready:            boolean;\n}\n","import { ILevel, ILevels } from \"./types\";\n\nimport { Demo } from \"./Demo/Demo\";\nimport { Level1 } from \"./1/Level.1\";\nimport { Level2 } from \"./2/Level.2\";\nimport { Level3 } from \"./3/Level.3\";\nimport { Level4 } from \"./4/Level.4\";\nimport { End } from \"./End/End\";\n\nexport const Levels = {\n\tdemo: \t\t{\n    level: Demo,\n    next: 'level1',\n  },\n\tlevel1: \t{\n    level: Level1,\n    next: 'level2',\n  },\n\tlevel2: \t{\n    level: Level2,\n    next: 'level3',\n  },\n\tlevel3: \t{\n    level: Level3,\n    next: 'level4',\n  },\n\tlevel4: \t{\n    level: Level4,\n    next: 'end',\n  },\n\tend: \t{\n    level: End,\n    next: 'demo',\n  },\n}\n\nexport const humanizedLevelNames = {\n  demo:   'Demo',\n  level1: '1',\n  level2: '2',\n  level3: '3',\n  level4: '4',\n  end:    'End',\n}\n\nexport function getThisLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].level;\n}\n\nexport function getNextLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].next as ILevel;\n}\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Demo = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0],\n    [0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],\n  ],\n  levelId: 'Demo',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level1 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '1',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level2 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '2',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level3 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 5, 5, 5, 5, 5, 5, 0, 0, 0],\n    [0, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n  ],\n  levelId: '3',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\nimport { ON_GAME_OVER } from '../../../events';\n\nexport const Level4 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],\n  ],\n  levelId: '4',\n\n  completeEvent: ON_GAME_OVER,\n});\n","import { LevelProps } from '../types';\nimport * as React from 'react';\n\nimport { ConnectedPlayer } from '../../Containers/Player/Player';\n\nimport { Level } from '../Base';\n\n\nexport function End(props: LevelProps) {\n  const {player, system} = props.state;\n  return (\n    <Level>\n      <ConnectedPlayer entity={player} system={system} />\n    </Level>\n  )\n}\n","import * as React from 'react';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  level:    string;\n  onReady:  () => void;\n}\n\nexport function Countdown(props: Props) {\n  const [time, setTime] = React.useState(5);\n  const [ready, setReady] = React.useState(false);\n\n  React.useEffect(() => {\n    let END = 5;\n    \n    setTime(END);\n    setReady(false);\n  \n    for (let i = 0; i <= END; i++) {\n\n      setTimeout(() => setTime(END - i), i * 1000);\n    }\n  \n    setTimeout(() => {\n      setReady(true);\n      props.onReady();\n    }, END * 1000);\n  }, [props.level])\n\n  return (\n    <div className={classNames(\"center-content\", \"absolute-fit\", ready ? 'fadeout' : 'fadeout-visible')}>\n      <p className=\"neon green\">\n        <span>{time}</span>\n      </p>\n    </div>\n  );\n}\n","import { ISystemManager } from '../../engine/types';\nimport { IGameState } from '../../game/types';\nimport { ILevels, ILevel } from './types';\nimport * as React from 'react';\n\nimport { Countdown } from '../Components/Countdown'\nimport { Levels, getThisLevel } from './Directory';\nimport { loadLevel } from '../utils';\nimport { ON_LEVEL_BEGIN, ON_LEVEL_LOAD } from '../../events';\n\ninterface Props {\n\tlevels?:  \t\tILevels;\n\tcurrentLevel: ILevel;\n\tstate:    \t\tIGameState;\n\tsystem:   \t\tISystemManager;\n}\n\nexport function Loader({\n\tlevels = Levels,\n\t...rest\n}: Props) {\n\tconst [ready, setReady] = React.useState(false);\n\tconst [level, setLevel] = React.useState(rest.currentLevel);\n\n  const GameLevel = getThisLevel(rest.currentLevel);\n\t\n\tReact.useEffect(() => {\n\t\trest.system.events.emit(ON_LEVEL_LOAD)\n\t\tsetLevel(rest.currentLevel);\n\t\tsetReady(false);\n\t}, [rest.currentLevel])\n\n\tconst onCountdownFinished = () => {\n\t\trest.system.events.emit(ON_LEVEL_BEGIN, level)\n\t\tsetReady(true);\n\t}\n\n  return (\n\t\t<>\n\t\t\t<GameLevel\n\t\t\t\tloadLevel={loadLevel}\n\t\t\t\t{...rest}\n\t\t\t/>\n\n\t\t\t<Countdown\n\t\t\t\tlevel={level}\n\t\t\t\tonReady={onCountdownFinished}\n\t\t\t/>\n\t\t</>\n  );\n}\n","import { ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\n\nimport { humanizedLevelNames } from '../Levels';\nimport { once } from '../../engine/utils';\n\ninterface Props {\n  currentLevel: ILevel;\n  state:        ICurrentGameState;\n  onNextLevel:  () => void;\n}\n\nexport function LevelSummary(props: Props) {\n  withEnterKeyEffect(once(props.onNextLevel));\n  return (\n    <div className=\"complete container with-title is-center is-dark fade-in\">\n      <label className=\"title\">{`Level ${humanizedLevelNames[props.currentLevel]} Complete`}</label>\n\n      <p>{`Score:  ${props.state.score}`}</p>\n      <p>{`Shots:  ${props.state.shots}`}</p>\n      <p>{`Hits:   ${props.state.hits}`}</p>\n      <p>{`Ratio:  ${Math.round(props.state.hits / props.state.shots * 100)}%`}</p>\n\n      <button className=\"btn is-primary\" onClick={props.onNextLevel}>Press Enter</button>\n    </div>\n  )\n}\n","import { IVector, IEntity, IComponent } from '../../engine/types';\nimport { IGameState, IPointsLoot, ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport StarField from '../Backgrounds/StarField';\nimport { Gui } from '../Layouts/Gui';\n\nimport { ProjectileModel } from '../../game/Domain/projectile';\nimport { WithHealthState } from '../../engine/components/killable';\nimport { IsLootable } from '../../engine/components/lootable';\n\nimport { Loader, humanizedLevelNames } from '../Levels';\nimport { LevelSummary } from '../Components/LevelSummary';\n\nimport { first, mkEntity } from '../../engine/utils';\n\nimport { ON_LEVEL_COMPLETE, ON_ENEMY_DEATH, ON_COLLISION, ON_GAME_OVER, ON_PLAYER_ATTACK, ON_LEVEL_LOAD, ON_LEVEL_BEGIN, ON_START_ENGINE, ON_STOP_ENGINE } from '../../events';\nimport { getNextLevel } from '../Levels/Directory';\nimport { Sfx, Songs } from '../../game/catalogue';\n\n\ninterface Props extends IGameState {\n  onRestart:  () => void;\n}\n\nexport class Game extends React.Component<Props, ICurrentGameState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.registerEvents();\n  }\n\n  state = {\n    score:              0,\n    credits:            1,\n    lives:              3,\n    shots:              0,\n    hits:               0,\n    complete:           false,\n    completed:          [],\n    currentLevel:       'level1' as ILevel,\n  }\n\n  componentDidMount() {\n    this.props.system.audio.playSong(Songs.GAME);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.player.attacking && nextProps.player.attacking) {\n      this.fireBullet(this.props.player.center);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.system.audio.stopSong(Songs.GAME);\n    this.unRegisterEvents();\n  }\n\n  registerEvents = () => {\n    this.props.system.events.registerEvent(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.registerEvent(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.registerEvent(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.registerEvent(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.registerEvent(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.registerEvent(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  unRegisterEvents = () => {\n    this.props.system.events.unRegisterEvent(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.unRegisterEvent(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.unRegisterEvent(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.unRegisterEvent(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.unRegisterEvent(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.unRegisterEvent(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  handleBulletCollisions = (): void => { // !!! Move to system component\n    const { bullet1, bullet2 } = this.props;\n    if (bullet1.collisions.length || bullet2.collisions.length) {\n\n      const collisions = [ \n        ...bullet1.collisions, \n        ...bullet2.collisions,\n      ];\n\n      const deadpool = [...new Set(collisions)].map(mkEntity);\n\n      deadpool.forEach(this.killEntity);\n    }\n  }\n\n  getBullet = (): ProjectileModel => {\n    return first([\n      this.props.bullet1,\n      this.props.bullet2,\n    ].filter(model => !!model.offscreen ))\n  }\n\n  fireBullet = (pos: IVector): void => {\n    const bullet = this.getBullet();\n\n    if (!bullet) {\n      return;\n    }\n\n    bullet.position.x = pos.x;\n    bullet.position.y = pos.y;\n\n    this.reviveEntity(bullet, 1);\n\n    this.setState(state => ({\n      ...state,\n      shots: state.shots + 1,\n    }));\n\n    this.props.system.events.emit(ON_PLAYER_ATTACK, this.props.player)\n  }\n\n  killEntity = (entity: IEntity) => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n\n    component.state.health.value = 0;\n  }\n\n  reviveEntity = (entity: IEntity, health: number): void => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n  \n    component.state.health.value = health;\n  }\n\n  handleEnemyDeath = (source: IComponent): void => {\n    const component = this.props.system\n      .getEntityComponent<IsLootable<IPointsLoot>>({ id: source.entityId }, 'loot');\n\n    if (component === undefined) {\n      return;\n    }\n  \n    const points = component.state.loot!.points;\n\n    this.setState(state => ({\n      score: state.score + points,\n      hits: state.hits + 1,\n    }));\n  }\n\n  handleLevelLoading = (): void => {\n    this.props.system.events.emit(ON_STOP_ENGINE)\n  }\n  \n  handleLevelBegin = (): void => {\n    this.props.system.events.emit(ON_START_ENGINE)\n  }\n\n  handleLevelComplete = (level: string | number): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.SUMMARY);\n\n      this.setState(state => ({\n        complete: true,\n        completed: state.completed.concat(level),\n      }));\n    }, 1500);\n  }\n\n  handleGameOver = (): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 1500);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.GAMEOVER);\n    }, 2250);\n\n    setTimeout(() => {\n      window.location.assign(`/end?final=${JSON.stringify({\n        score:    this.state.score,\n        hits:     this.state.hits,\n        shots:    this.state.shots,\n        lives:    this.state.lives,\n        credits:  this.state.credits,\n      })}`);\n    }, 3000);\n  }\n\n  startNewGame = (): void => {\n    this.props.system.audio.playSound(Sfx.NEW_GAME);\n\n    setTimeout(() => this.setState({ currentLevel: 'level1' }), 5);\n  }\n\n  onNextLevel = (): void => {\n    this.props.system.audio.stopSong(Songs.SUMMARY);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.NEXT_LEVEL);\n    }, 350);\n\n    setTimeout(() => {\n      const currentLevel = this.state.currentLevel;\n      const nextLevel = getNextLevel(currentLevel);\n\n      this.setState({ currentLevel: nextLevel as ILevel, complete: false })\n    }, 1200);\n\n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.GAME);\n    }, 3000);\n  }\n\n  render() {\n    const {currentLevel, score, credits, lives} = this.state;\n    return (\n      <Gui\n        id=\"gui\"\n        className=\"game\"\n        level={humanizedLevelNames[currentLevel]}\n        score={score}\n        credits={credits}\n        lives={lives}\n        onRestart={this.props.onRestart}\n        background={<StarField />}\n      >\n        <Loader\n          currentLevel={currentLevel}\n          state={this.props}\n          system={this.props.system}\n        />\n\n        {this.state.complete ? (\n          <div className=\"center-content absolute-fit\">\n            <LevelSummary\n              currentLevel={currentLevel}\n              state={this.state}\n              onNextLevel={this.onNextLevel}\n            />\n          </div>\n        ) : null}\n      </Gui>\n    )\n  }\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/GameOver.style.css';\n\nexport function GameOver() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"gameover-container\" className=\"slide-up\">\n        <div id=\"gameover\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default GameOver;\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport GameOver from '../Backgrounds/GameOver';\n\nimport { classNames } from '../Development/Dev';\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { Songs } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\n\ninterface FinalScore {\n  score:    number;\n  hits:     number;\n  shots:    number;\n  lives:    number;\n  credits:  number;\n}\n\nexport function Outro(props: IGameState) {\n  const [ready, setReady] = useState(false);\n  const [final, setFinalScore] = useState<FinalScore>({} as FinalScore);\n\n  function handleStartNewGame() {\n    window.location.assign('/game');\n  }\n\n  function handleRestartGame() {\n    window.location.assign('/menu');\n  }\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.END);\n    return () => {\n      props.system.audio.stopSong(Songs.END);\n    }\n  }, []);\n\n  useEffect(() => {\n    const serialized = getQueryParams(window.location.search);\n\n    if (serialized && typeof serialized.final === 'string') {\n      try {\n        setFinalScore(JSON.parse(serialized.final));\n      } catch (e) {\n        // meh\n      }\n    }\n\n    setTimeout(() => setReady(true), 3000);\n  });\n\n  withEnterKeyEffect(once(handleStartNewGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"gameover\"\n      score={final.score}\n      credits={final.credits}\n      lives={final.lives}\n      background={<GameOver />}\n      onRestart={handleRestartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in')}>\n            Press Enter to Play Again\n          </p>\n        </div>\n      </div>\n    </Gui>\n  )\n}\n\nfunction getQueryParams(qs: string) {\n  const searchString = qs.split('+').join(' ');\n\n  let params: any = {};\n  let tokens: RegExpExecArray | null;\n  const re = /[?&]?([^=]+)=([^&]*)/g;\n\n  while (tokens = re.exec(searchString)) {\n      params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n  }\n\n  return params;\n}\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; }\nexport type WithCenter = { center: IVector; }\nexport type WithPositionState = WithPosition & WithCenter;\n\nexport function withPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPositionState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: { ...state.position }, center: { ...state.position } },\n        update: (system: ISystemManager, component: IComponent<WithPositionState>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n  \nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPositionState>, events: IComponentEvents) {\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  // ai yai yai, wtf is this doing here\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n  // !! ??? ^^^^^^^^\n\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n  \n  if (ifStateProp(boundaryComponent) && ifStateProp(boundaryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n    \n    const clampedX = clamp(boundary.left, boundary.right - width,   component.state.position.x)\n    const clampedY = clamp(boundary.top,  boundary.bottom - height, component.state.position.y)\n\n    component.state.position.x = clampedX;\n    component.state.position.y = clampedY;\n\n    component.state.center.x = component.state.position.x - width / 2;\n    component.state.center.y = component.state.position.y - height / 2;\n\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'attack';\n\nexport type WithAttack = { attacking: boolean; attackPower: number; };\n\nexport function combatableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithAttack, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAttack>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { attacking: state.attacking, attackPower: state.attackPower },\n        update: (system: ISystemManager, component: IAttackableEntity) => {\n            handleAttack(component, system);\n        },\n      }))\n  }\n}\n\ntype IAttackableEntity = IComponent<WithAttack>\n\nfunction handleAttack(component: IAttackableEntity, system: ISystemManager) {\n  if (system.input.keyPressed(system.input.KeyCodes.SPACEBAR)) {\n    component.state.attacking = true;\n  } else {\n    component.state.attacking = false;\n  }\n}\n\nexport const selectCombatableState = createSelector<IAttackableEntity>(COMPONENT_NAMESPACE);\nexport const setCombatableState    = createSetter<IAttackableEntity>(selectCombatableState);\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithPlayerControls = { direction: IVector; moving: boolean; speed: IVector; };\n\nexport function withPlayerControlsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPlayerControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPlayerControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n        },\n        update: (system: ISystemManager, component: IPlayerControllableEntity) => {\n          handleVerticalMovement(entity, component, system);\n          handleHorizontalMovement(entity, component, system);\n          \n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\nexport type IPlayerControllableEntity = IComponent<WithPlayerControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleVerticalMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system, 'vertical');\n}\n\nfunction handleHorizontalMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system);\n}\n\nfunction handleMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { createCharacter } from \"../Domain/character\";\nimport { ISystemManager } from \"../../engine/types\";\nimport { defaultBoundary } from \"../../engine/utils\";\nimport { SpriteTextureIds } from \"../catalogue\";\n\nexport function createPlayer(\n  system:           ISystemManager,\n  name:             string = 'player 1',\n) {\n\n  const playerEntity = createCharacter(system, {\n    name,\n\n    texture: SpriteTextureIds.Player,\n\n    health: {\n      value: 100,\n      immortal: true,\n    },\n\n    attackPower: 10,\n\n    speed: {\n      y: 0,\n      x: 6,\n    },\n  \n    position: {\n      x: 400,\n      y: 475,\n    },\n  \n    direction: {\n      x: 0,\n      y: 0,\n    },\n  \n    geometry: {\n      width:  64,\n      height: 64,\n    },\n  \n    moving: false,\n  \n    attacking: false,\n\n    boundary: defaultBoundary\n  });\n\n  return playerEntity;\n}\n","import { IEntity, ISystemManager } from \"../../engine/types\";\nimport { nameableFactory,           WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,           WithHealth, WithHealthState } from \"../../engine/components/killable\";\nimport { withPositionFactory,       WithPosition, WithPositionState } from \"../../engine/components/withPosition\";\nimport { combatableFactory,         WithAttack } from \"../../engine/components/combatable\";\nimport { withGeometryFactory,       WithGeometry } from \"../../engine/components/withGeometry\";\nimport { isCollidableFactory,       IsCollidable } from \"../../engine/components/isCollidable\";\nimport { withBoundaryFactory,       WithBoundary } from \"../../engine/components/withBoundary\";\nimport { withPlayerControlsFactory, WithPlayerControls } from \"../../engine/components/withPlayerControls\";\nimport { withTextureFactory, WithTexture } from \"../../engine/components/withTexture\";\n\nexport function createCharacter(\n  system:   ISystemManager,\n  options:  CharacterModelArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withHealth      = killableFactory(system);\n  const withPosition    = withPositionFactory(system);\n  const withControls    = withPlayerControlsFactory(system);\n  const withAttack      = combatableFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withTexture     = withTextureFactory(system);\n  const isCollidable    = isCollidableFactory(system);\n  const withBoundary    = withBoundaryFactory(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withHealth(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withTexture(entity, options, system.events)\n  );\n  system.registerComponent(\n    withAttack(entity, options, system.events)\n  );\n  system.registerComponent(\n    isCollidable(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBoundary(entity, options, system.events)\n  );\n  system.registerComponent(\n    withControls(entity, {\n      direction: options.direction,\n      moving: options.moving,\n      speed: options.speed,\n    }, system.events)\n  );\n  return entity;\n}\n\nexport type CharacterModelArgs =\n  WithName          &\n  WithHealth        &\n  WithPosition      &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithPlayerControls;\n\nexport type CharacterModel =\n  WithName          &\n  WithHealthState   &\n  WithPositionState &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithPlayerControls;\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithOffscreen } from \"./withOffscreen\";\n\nconst COMPONENT_NAMESPACE = 'momentum';\n\nexport type WithMomentum = { momentum: { direction: IVector; speed: number; vertical?: boolean; horizontal?: boolean; } };\n\nexport function withMomentumFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithMomentum, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithMomentum>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state: { momentum: {\n          direction:    state.momentum.direction,\n          speed:        state.momentum.speed,\n        } },\n        update: (system: ISystemManager, component: IWithMomentumEntity) => {\n          handleMovement(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithMomentumEntity = IComponent<WithMomentum & Partial<WithPosition>>\n\nfunction handleMovement(entity: IEntity, component: IWithMomentumEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {state: { offscreen }} = system.getEntityComponent<WithOffscreen>(entity, 'offscreen');\n\n  if (offscreen) {\n    return;\n  }\n\n  const { momentum: { direction, speed } } = component.state;\n\n  position.y += direction.y * speed;\n  position.x += direction.x * speed;\n}\n\nexport const selectMomentumState = createSelector<WithMomentum>(COMPONENT_NAMESPACE);\nexport const setMomentumState    = createSetter<WithMomentum>(selectMomentumState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\n\nexport type WithOffscreen = { offscreen?: boolean; };\n\nexport function withOffscreenFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithOffscreen & Partial<WithPosition>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithOffscreen>>({\n        id,\n        entityId: entity.id,\n        name: 'offscreen',\n        state: { offscreen: state.offscreen || false },\n        update: (system: ISystemManager, component: IWithOffscreenEntity) => {\n          handleOffscreenFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithOffscreenEntity = IComponent<WithOffscreen & WithPosition>\n\nfunction handleOffscreenFlag(entity: IEntity, component: IWithOffscreenEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {screenSize} = system.config;\n\n  if (position.x < 0 || position.y < 0) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  if (position.x > screenSize!.x || position.y > screenSize!.y) {\n    component.state.offscreen = true;\n    return;\n  } \n  \n  if (position.x > window.innerWidth || position.y > window.innerHeight) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  component.state.offscreen = false;\n};\n","import { IComponent, ISystemManager, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\nimport { ON_COLLISION } from \"../../events\";\n\nconst COMPONENT_NAMESPACE = 'collisions';\n\nexport type WithCollisionArgs = Partial<WithCollisions>;\nexport type WithCollisions = { collisions: EntityIdType[]; };\n\nexport function withCollisionsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithCollisionArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithCollisionArgs>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collisions: state.collisions || [] },\n        update: (system: ISystemManager, component: ICollidableEntity) => {\n          handleCollisions(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<WithCollisions & WithGeometry & WithPosition>\n\nfunction handleCollisions(entity: IEntity, component: ICollidableEntity, system: ISystemManager, events: IComponentEvents) {\n  const position = system.getEntityModel<WithGeometry & WithPosition>({ id: component.entityId });\n\n  const collidableEntities = system\n    .getEntitiesByComponentTypes(['geometry', 'position', 'collidable'])\n    .filter(id => id !== component.entityId)\n    .map(id => system.getEntityModel<WithGeometry & WithPosition>({ id }));\n\n  const ownBounds = getBounds(position.position, position.geometry);\n\n  const collisions: EntityIdType[] = [];\n\n  collidableEntities.forEach(o => {\n    const otherBounds = getBounds(o.position, o.geometry);\n    if (overlap(ownBounds, otherBounds) && otherBounds !== undefined) {\n      collisions.push(o.id);\n    }\n  });\n\n  const lastCollisions = component.state.collisions\n    ? component.state.collisions.map(o => o)\n    : [];\n\n  component.state.collisions = collisions;\n\n  if (new Set(lastCollisions) !== new Set(collisions) && collisions.length > 0) {\n    events.onChange(ON_COLLISION, component, entity);\n  }\n}\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n\nfunction getBounds(pos: IVector, dimensions: IDimensions) {\n  return {\n    left: pos.x - (dimensions.width / 2),\n    right: pos.x + (dimensions.width / 2),\n    top: pos.y,\n    bottom: pos.y + dimensions.height,\n  }\n}\n\nfunction overlap(a: Bounds, b: Bounds) {\n  // If one rectangle is on left side of other\n  if (a.left > b.right || b.left > a.right)\n    return false;\n\n  // If one rectangle is above other\n  if (a.bottom < b.top || b.bottom < a.top)\n    return false;\n\n  return true;\n}\n","import { ISystemManager } from \"../../engine/types\";\nimport { createProjectile } from \"../Domain/projectile\";\n\nexport function createBullet(\n  system: ISystemManager,\n  name: string,\n  x: number = -100,\n  speed: number = 8,\n) {\n\n  const entity = createProjectile(system, {\n    name,\n\n    momentum: {\n      direction: {\n        x: 0,\n        y: -1,\n      },\n      speed,\n    },\n\n    position: {\n      x: x,\n      y: 440,\n    },\n\n    geometry: {\n      width:  2,\n      height: 32,\n    },\n  });\n\n  return entity;\n}\n","import { IEntity, ISystemManager, IComponent } from \"../../engine/types\";\nimport { withPositionFactory,     WithPosition, WithPositionState } from \"../../engine/components/withPosition\";\nimport { withMomentumFactory,     WithMomentum } from \"../../engine/components/withMomentum\";\nimport { withOffscreenFactory,    WithOffscreen } from \"../../engine/components/withOffscreen\";\nimport { withGeometryFactory,     WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withCollisionsFactory,   WithCollisionArgs, WithCollisions } from \"../../engine/components/withCollisions\";\nimport { nameableFactory,         WithName } from \"../../engine/components/nameable\";\n\n\nexport function createProjectile(\n  system:   ISystemManager,\n  options:  ProjectileBaseArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withPosition    = withPositionFactory(system);\n  const withMomentum    = withMomentumFactory(system);\n  const withOffscreen   = withOffscreenFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withCollisions  = withCollisionsFactory(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withMomentum(entity, options, system.events)\n  );\n  system.registerComponent(\n    withCollisions(entity, options, system.events)\n  );\n  system.registerComponent(\n    withOffscreen(entity, options, system.events)\n  );\n  return entity;\n}\n\nexport type ProjectileBaseArgs =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisionArgs   &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileBase =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisions      &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileModel = \n  IComponent &\n  ProjectileBase;\n","\nexport function Vector2(x, y)\n{\n\tthis.x = (x !== undefined) ? x : 0;\n\tthis.y = (y !== undefined) ? y : 0;\n}\n\nVector2.prototype.set = function(x, y)\n{\n\tthis.x = x;\n\tthis.y = y;\n}\n","import {Vector2} from './Vector2';\nimport {Key} from './Key';\n\nexport function Mouse()\n{\n\t//Raw data\n\tthis._keys = [];\n\tthis._position = new Vector2(0, 0);\n\tthis._positionUpdated = false;\n\tthis._delta = new Vector2(0, 0);\n\tthis._wheel = 0;\n\tthis._wheelUpdated = false;\n\tthis._doubleClicked = false;\n\n\t//Position, delta, and scroll speed\n\tthis.keys = [];\n\tthis.position = new Vector2(0,0);\n\tthis.delta = new Vector2(0,0);\n\tthis.wheel = 0;\n\tthis.doubleClicked = false;\n\n\t//Canvas (use to calculate coordinates relative to it)\n\tthis.canvas = null;\n\t\n\t//Events\n\tthis.events = [];\n\n\t//Initialize key instances\n\tfor(let i = 0; i < 3; i++)\n\t{\n\t\tthis._keys.push(new Key());\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Self pointer\n\tlet self = this;\n\n\t//Scroll wheel\n\tif(window.onmousewheel !== undefined)\n\t{\n\t\t//Chrome, edge\n\t\tthis.events.push([window, \"mousewheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse if(window.addEventListener !== undefined)\n\t{\n\t\t//Firefox\n\t\tthis.events.push([window, \"DOMMouseScroll\", function(event)\n\t\t{\n\t\t\tself._wheel = event.detail * 30;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse\n\t{\n\t\tthis.events.push([window, \"wheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\n\t//Touchscreen input\n\tif(\"ontouchstart\" in window || navigator.msMaxTouchPoints > 0)\n\t{\n\t\t//Auxiliar variables to calculate touch delta\n\t\tvar lastTouch = new Vector2(0, 0);\n\n\t\t//Touch screen pressed event\n\t\tthis.events.push([window, \"touchstart\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t\tself.updateKey(Mouse.LEFT, Key.DOWN);\n\t\t}]);\n\n\t\t//Touch screen released event\n\t\tthis.events.push([window, \"touchend\", function(event)\n\t\t{\n\t\t\tself.updateKey(Mouse.LEFT, Key.UP);\n\t\t}]);\n\n\t\t//Touch screen move event\n\t\tthis.events.push([window, \"touchmove\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(touch.clientX - rect.left, touch.clientY - rect.top, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(touch.clientX, touch.clientY, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t}]);\n\t}\n\t//Input\n\telse\n\t{\n\t\t//Move event\n\t\tthis.events.push([window, \"mousemove\", function(event)\n\t\t{\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(event.clientX - rect.left, event.clientY - rect.top, event.movementX, event.movementY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(event.clientX, event.clientY, event.movementX, event.movementY);\n\t\t\t}\n\t\t}]);\n\n\t\t//Button pressed event\n\t\tthis.events.push([window, \"mousedown\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.DOWN);\n\t\t}]);\n\n\t\t//Button released event\n\t\tthis.events.push([window, \"mouseup\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.UP);\n\t\t}]);\n\t}\n\n\t//Mouse double click\n\tthis.events.push([window, \"dblclick\", function(event)\n\t{\n\t\tself._doubleClicked = true;\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Mouse Buttons\nMouse.LEFT = 0;\nMouse.MIDDLE = 1;\nMouse.RIGHT = 2;\n\n//Canvas to be used for relative coordinates calculation\nMouse.prototype.setCanvas = function(canvas)\n{\n\tthis.canvas = canvas;\n\n\tcanvas.mouseInside = false;\n\n\tcanvas.addEventListener(\"mouseenter\", function()\n\t{\n\t\tthis.mouseInside = true;\n\t});\n\n\tcanvas.addEventListener(\"mouseleave\", function()\n\t{\n\t\tthis.mouseInside = false;\n\t});\n}\n\n//Check if mouse is inside attached canvas\nMouse.prototype.insideCanvas = function()\n{\n\tif(this.canvas === null)\n\t{\n\t\treturn false;\n\t}\n\t\n\treturn this.canvas.mouseInside;\n}\n\n//Set if mouse locked\nMouse.prototype.setLock = function(value)\n{\n\tif(this.canvas !== null)\n\t{\n\t\tif(value)\n\t\t{\n\t\t\tif(this.canvas.requestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.requestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.mozRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.mozRequestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.webkitRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.webkitRequestPointerLock();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(document.exitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.exitPointerLock();\n\t\t\t}\n\t\t\telse if(document.mozExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.mozExitPointerLock();\n\t\t\t}\n\t\t\telse if(document.webkitExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.webkitExitPointerLock();\n\t\t\t}\n\t\t}\n\t}\n}\n\n//Check if mouse button is pressed\nMouse.prototype.buttonPressed = function(button)\n{\n\treturn this.keys[button].pressed;\n}\n\n//Check if Mouse button was double clicked\nMouse.prototype.buttonDoubleClicked = function()\n{\n\treturn this.doubleClicked;\n}\n\n//Check if a mouse button was just pressed\nMouse.prototype.buttonJustPressed = function(button)\n{\n\treturn this.keys[button].justPressed;\n}\n\n//Check if a mouse button was just released\nMouse.prototype.buttonJustReleased = function(button)\n{\n\treturn this.keys[button].justReleased;\n}\n\n//Update mouse Position\nMouse.prototype.updatePosition = function(x, y, xDiff, yDiff)\n{\n\tthis._position.set(x, y);\n\tthis._delta.x += xDiff;\n\tthis._delta.y += yDiff;\n\tthis._positionUpdated = true;\n}\n\n//Update mouse Key\nMouse.prototype.updateKey = function(button, action)\n{\n\tif(button > -1)\n\t{\n\t\tthis._keys[button].update(action);\n\t}\n}\n\n//Update mouse State (Calculate position diff)\nMouse.prototype.update = function()\n{\n\t//Update mouse keys state\n\tfor(let i = 0; i < this._keys.length; i++)\n\t{\n\t\tif(this._keys[i].justPressed && this.keys[i].justPressed)\n\t\t{\n\t\t\tthis._keys[i].justPressed = false;\n\t\t}\n\t\tif(this._keys[i].justReleased && this.keys[i].justReleased)\n\t\t{\n\t\t\tthis._keys[i].justReleased = false;\n\t\t}\n\t\tthis.keys[i].set(this._keys[i].justPressed, this._keys[i].pressed, this._keys[i].justReleased);\n\t}\n\n\t//Update mouse wheel\n\tif(this._wheelUpdated)\n\t{\n\t\tthis.wheel = this._wheel;\n\t\tthis._wheelUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.wheel = 0;\n\t}\n\n\t//Update mouse double click\n\tif(this._doubleClicked)\n\t{\n\t\tthis.doubleClicked = true;\n\t\tthis._doubleClicked = false;\n\t}\n\telse\n\t{\n\t\tthis.doubleClicked = false;\n\t}\n\n\t//Update mouse Position if needed\n\tif(this._positionUpdated)\n\t{\n\t\tthis.delta.x = this._delta.x;\n\t\tthis.delta.y = this._delta.y;\n\t\tthis._delta.set(0,0);\n\n\t\tthis.position.x = this._position.x;\n\t\tthis.position.y = this._position.y;\n\n\t\tthis._positionUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.delta.x = 0;\n\t\tthis.delta.y = 0;\n\t}\n}\n\n//Dispose mouse object\nMouse.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n","import { IInputManager, IMouse, IKeyboard} from '../types';\nimport { Mouse } from \"../../extern/Mouse\";\nimport { Keyboard } from \"../../extern/Keyboard\";\n\nclass InputManager implements IInputManager {\n  public KeyCodes: Keyboard = Keyboard;\n  constructor(\n    private mouse: IMouse = new Mouse(),\n    private keyboard: IKeyboard = new Keyboard(),\n  ) {}\n  \n  public buttonPressed = (button: number) => this.mouse.buttonPressed(button);\n\n  public keyPressed = (key: number) => this.keyboard.keyPressed(key);\n  public keyJustPressed = (key: number) => this.keyboard.keyJustPressed(key);\n  public keyJustReleased = (key: number) => this.keyboard.keyJustReleased(key);\n\n  update = () => {\n    this.mouse.update();\n    this.keyboard.update();\n  };\n}\n\nexport default InputManager;\n","import { ISerializableState, IComponent, ISystemManager, IComponentFactoryInitializer, IStorageManager, IComponentFactory } from \"../types\";\nimport { defaultComponentEvents } from \"../utils\";\n\nclass StorageManager implements IStorageManager {\n  constructor( \n    private system: ISystemManager,\n  ) {}\n\n  public saveGame = () => {\n    this.saveState('ecs', this.system.getSerializableState());\n  }\n  \n  public loadGame = () => {\n    const loadedFromStorage = this.loadStateFromKey('ecs');\n  \n    if (loadedFromStorage) {\n      const hydratedComponents = this.hydrateLoadedComponents(this.system, loadedFromStorage);\n      loadedFromStorage.system.components = hydratedComponents;\n  \n      this.system.loadHydratedState(loadedFromStorage);\n    }\n  }\n  \n  private saveState<T extends ISerializableState>(key: string, value: T): void {\n    const serialized = JSON.stringify(value);\n    window.localStorage.setItem(key, serialized);\n  }\n  \n  private loadStateFromKey(key: string): ISerializableState | null {\n    const serialized = window.localStorage.getItem(key);\n  \n    if (!serialized) {\n      return null;\n    }\n  \n    return JSON.parse(serialized) as ISerializableState;\n  }\n  \n  private hydrateLoadedComponents(system: ISystemManager, state: ISerializableState): IComponent[] {\n    const { system: { components } } = state;\n  \n    const componentInitializerCache: { [key: string]: IComponentFactoryInitializer } = {};\n  \n    return components.map((component: IComponent) => {\n      const cached = componentInitializerCache[component.name];\n  \n      let componentInitializer: IComponentFactoryInitializer;\n  \n      if (cached) {\n        componentInitializer = cached;\n      } else {\n        componentInitializer = this.system.getComponentFactory(component.name)(system);\n        componentInitializerCache[component.name] = componentInitializer;\n      }\n  \n      const entity = { id: component.entityId }\n      return componentInitializer(entity, component.state, defaultComponentEvents(), component.id); // !!! HACK FIX ME TODO ACHTUNG\n    });\n  }\n}\n\nexport default StorageManager;\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithControls = { direction: IVector; moving: boolean; speed: IVector; };\n\nexport function controllableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n        },\n        update: (system: ISystemManager, component: IControllableEntity) => {\n          handleVerticalMovement(entity, component, system);\n          handleHorizontalMovement(entity, component, system);\n          \n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IControllableEntity = IComponent<WithControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleVerticalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system, 'vertical');\n}\n\nfunction handleHorizontalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system);\n}\n\nfunction handleMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponentFactories, IComponentFactoryKey } from \"../types\";\nimport { ageableFactory } from \"./ageable\";\nimport { controllableFactory } from \"./controllable\";\nimport { combatableFactory } from \"./combatable\";\nimport { killableFactory } from \"./killable\";\nimport { withPositionFactory } from \"./withPosition\";\nimport { nameableFactory } from \"./nameable\";\nimport { isCollidableFactory } from \"./isCollidable\";\nimport { withCollisionsFactory } from \"./withCollisions\";\nimport { withGeometryFactory } from \"./withGeometry\";\nimport { withMomentumFactory } from \"./withMomentum\";\nimport { withOffscreenFactory } from \"./withOffscreen\";\nimport { lootableFactory } from \"./lootable\";\nimport { withBoundaryFactory } from \"./withBoundary\";\nimport { withTextureFactory } from \"./withTexture\";\nimport { withBugWiggleFactory } from \"./withBugWiggle\";\n\nexport const defaultComponentFactories: IComponentFactories = {\n  name:         nameableFactory,\n  health:       killableFactory,\n  position:     withPositionFactory,\n  age:          ageableFactory,\n  controls:     controllableFactory,\n  collisions:   withCollisionsFactory,\n  collidable:   isCollidableFactory,\n  attack:       combatableFactory,\n  momentum:     withMomentumFactory,\n  offscreen:    withOffscreenFactory,\n  geometry:     withGeometryFactory,\n  loot:         lootableFactory,\n  boundary:     withBoundaryFactory,\n  texture:      withTextureFactory,\n  wiggle:       withBugWiggleFactory,\n}\n\nexport function getComponentFactory<T extends IComponentFactoryKey>(name: T): IComponentFactories[T] {\n  return  defaultComponentFactories[name];\n}\n  ","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nexport type WithAge = { age: number };\n\nexport function ageableFactory(system: ISystemManager) {\n  let GAME_YEAR = 2 * 1000;\n  return (entity: IEntity, state: WithAge, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAge>>({\n        id,\n        name: 'age',\n        entityId: entity.id,\n        state: { age: state.age },\n        update: (system: ISystemManager, component: IAgeableEntity) => {\n            const {epoch} = system;\n            const remainder = epoch % GAME_YEAR;\n            if (remainder === 0 && epoch > 0) {\n              component.state.age++; \n            }\n        },\n      }))\n  }\n}\n\ntype IAgeableEntity = IComponent<WithAge>;\n","import { IComponent, IdGeneratorFunc, EntityIdType, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\nconst configDefaults = {\n  name: 'componentManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass ComponentManager {\n  public config:             IBasicConfig;\n\n  public components:         IComponent[];\n  private idGenerator:       IdGeneratorFunc;\n\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.components  = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerComponent = <T>(component: IComponent<T>) => {\n    component.id = (component.id === -1)\n      ? this.idGenerator().next()\n      : component.id;\n\n    const model = factory<IComponent>(component);\n    this.components[component.id] = model;\n    return model;\n  };\n\n  public unRegisterComponent = (componentId: EntityIdType) => {\n    delete this.components[componentId];\n  };\n\n  public get = <T>(component: IComponent<T> | number) => {\n    const path = typeof component === 'number' ? component : component && component.id;\n    return this.components[path];\n  };\n\n  public get getState(): IComponent[] {\n    return this.components;\n  };\n\n  public getSerializableState = () => {\n    const { config, components } = this;\n    return {\n      config,\n      components,\n    };\n  };\n\n  public loadHydratedState = (state: any) => {\n    this.config     = state.config;\n    this.components = state.components;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      config:     this.config,\n      components: this.components,\n    }, null, '  ')\n  };\n\n  static isSameComponent(a: IComponent, b: IComponent) {\n    return a.id === b.id;\n  }\n}\n\nexport default ComponentManager;\n\n// const manager = new ComponentManager(system.system, configDefaults, [], defaultIdGenerator());\n","import { EntityIdType, IEntity, IdGeneratorFunc, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\ninterface IEntityManagerSerializableState {\n  config:   IBasicConfig,\n  entities: IEntity[],\n}\n\nconst configDefaults = {\n  name: 'EntityManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EntityManager {\n  public config:              IBasicConfig;\n  public entities:           IEntity[];\n  private idGenerator:        IdGeneratorFunc;\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.entities    = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerEntity = (): IEntity => {\n    const entityId = this.idGenerator().next()\n    const model    = factory<IEntity>({ id: entityId });\n    this.entities[entityId] = model;\n    return model;\n  };\n\n  public unRegisterEntity = (entityId: EntityIdType): void => {\n    delete this.entities[entityId];\n  };\n\n  public get = (entity: IEntity | number) => {\n    const path = typeof entity === 'number' ? entity : entity.id;\n    return this.entities[path];\n  };\n\n  public get getState(): IEntity[] {\n    return this.entities;\n  };\n\n  public getSerializableState = (): IEntityManagerSerializableState => {\n    const { config, entities } = this;\n    return {\n      config,\n      entities,\n    };\n  };\n\n  public loadHydratedState = (state: IEntityManagerSerializableState): void => {\n    this.config  = state.config;\n    this.entities = state.entities;\n  };\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n      entities: this.entities,\n    }, null, '  ')\n  };\n\n  static isSameEntity(a: IEntity, b: IEntity): boolean {\n    return a.id === b.id;\n  }\n}\n\nexport default EntityManager;\n","import { IBasicConfig, IComponentEvents, IOnUpdateHandler, IOnChangeHandler, IComponent, IEventManager, AnonymousCB, IEntity } from \"../types\";\nimport {EventEmitter2} from 'eventemitter2';\n\nconst configDefaults = {\n  name: 'EventManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EventManager implements IEventManager {\n  public config:        IBasicConfig;\n  public emitter:       EventEmitter2;\n \n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.emitter     = new EventEmitter2({\n      delimiter:  ':',\n      wildcard:   true,\n      maxListeners: 20,\n    });\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerEvent = (name: string, callback: AnonymousCB) => {\n    this.emitter.addListener(name, callback)\n  };\n\n  public unRegisterEvent = (name: string, callback: AnonymousCB): void => {\n    this.emitter.removeListener(name, callback);\n  };\n\n  public emit = <T>(eventName: string, data?: T) => {\n    this.emitter.emit(eventName, data);\n  };\n\n  public onUpdate = (component: IComponent, entity: IEntity) => {\n    this.emitter.emit('updateComponent', component, entity);\n  };\n\n  public onChange = (eventName: string, component: IComponent, entity: IEntity): void => {\n    this.emitter.emit(eventName, component, entity);\n  };\n}\n\nexport default EventManager;\n","import {Howl, Howler} from 'howler';\nimport { IBasicConfig, IAudioManager, IAudioCollection } from \"../types\";\n\nconst configDefaults = {\n  name: 'AudioManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass AudioManager implements IAudioManager {\n  public config:            IBasicConfig;\n  public sounds:            IAudioCollection;\n  public songs:             IAudioCollection;\n\n  private soundFactory:     HowlStatic;\n  private audioEngine:      HowlerGlobal;\n\n  constructor(config: IBasicConfig) {\n    this.config       = { ...configDefaults, ...config };\n    this.sounds       = {};\n    this.songs        = {};\n\n    this.soundFactory = Howl;\n    this.audioEngine  = Howler;\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerSound(name: string, options: IHowlProperties) {\n    this.sounds[name] = new this.soundFactory(options);\n  }\n\n  public unRegisterSound(name: string) {\n    this.sounds[name].stop();\n    this.sounds[name].unload();\n    delete this.sounds[name];\n  }\n\n  public registerSong(name: string, options: IHowlProperties) {\n    this.songs[name] = new this.soundFactory({\n      loop: true,\n      ...options\n    });\n  }\n\n  public unRegisterSong(name: string) {\n    this.songs[name].stop();\n    this.songs[name].unload();\n    delete this.songs[name];\n  }\n\n  public playSound(name: string, sprite?: string | number) {\n    try {\n      this.sounds[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSound(name: string, id?: number) {\n    try {\n      this.sounds[name].stop(id)\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public playSong(name: string, sprite?: string | number) {\n    try {\n      this.songs[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSong(name: string, id?: number) {\n    try {\n      this.songs[name].stop(id);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public registerListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].on(event, callback);\n  }\n\n  public registerOnceListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].once(event, callback);\n  }\n\n  public unRegisterListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].off(event, callback);\n  }\n\n  public changeVolume(volume: number): void {\n    this.audioEngine.volume(volume);\n  }\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n    }, null, '  ')\n  };\n}\n\nexport default AudioManager;\n","import { IComponent, ISystem, ISystemManager, EntityIdType, IConfigDefaults, IEntity, WithId, IEntityComponents, ISerializableState, IInputManager, IStorageManager, IObjectConfig, IComponentFactory, IComponentFactories, IComponentFactoryKey, IEventManager, IAudioManager } from \"../types\";\nimport InputManager from \"./InputManager\";\nimport StorageManager from \"./StorageManager\";\nimport { defaultComponentFactories } from \"../components\";\nimport { values, partialSetValue } from \"../utils\";\nimport ComponentManager from \"./ComponentManager\";\nimport EntityManager from \"./EntityManager\";\nimport EventManager from \"./EventManager\";\nimport AudioManager from \"./AudioManager\";\n\nconst configDefaults: IConfigDefaults = {\n  debug: false,\n  logging: true,\n}\n\nclass SystemManager implements ISystemManager {\n  public system:                ISystem;\n  public config:                IObjectConfig;\n  public input:                 IInputManager;\n  public storage:               IStorageManager;\n  public events:                IEventManager;\n  public audio:                 IAudioManager;\n  public epoch:                 number;\n\n  private entityComponents:     IEntityComponents;\n  private componentFactories:   IComponentFactories;\n  private entityManager:        EntityManager;\n  private componentManager:     ComponentManager;\n\n  private entityComponentCache:   { [key: string]: number[] } = {};\n  private entityComponentSetter:  (path: (string | number)[], value: any) => void;\n\n  constructor(\n    config:              IObjectConfig,\n    input?:              IInputManager,\n    epochs?:             number,\n  ) {\n    this.config               = { ...configDefaults, ...config };\n    this.input                = input ? input : new InputManager();\n    this.storage              = new StorageManager(this);\n    this.events               = new EventManager(config);\n    this.audio                = new AudioManager(config);\n    this.epoch                = epochs ? epochs : 0;\n    \n    this.componentFactories   = defaultComponentFactories;\n    \n    this.entityManager        = new EntityManager(config);\n    this.componentManager     = new ComponentManager(config);\n    this.entityComponents     = {};\n\n    this.system = {\n      entities:   this.entityManager.entities,\n      components: this.componentManager.components,\n    }\n\n    this.entityComponentSetter = partialSetValue(this.entityComponents);\n  }\n\n  public init = (config?: IObjectConfig) => null;\n\n  public registerEntity = () => {\n    return this.entityManager.registerEntity();\n  };\n\n  public registerComponent = <T>(component: IComponent) => {\n    const registered = this.componentManager\n      .registerComponent<T>(component)\n\n    this.entityComponentSetter(\n      [registered.entityId, registered.name],\n      registered.id,\n    )\n\n    return registered;\n  };\n\n  public getComponent = <T>(component: IComponent): IComponent<T> => {\n    return this.componentManager.get(component);\n  };\n  public getComponentById = <T>(componentId: EntityIdType): IComponent<T> => {\n    return this.componentManager.get(componentId);\n  };\n  public getComponentIdsForEntity = (entity: IEntity): Array<EntityIdType> => {\n    if(entity === undefined) {\n      return [];\n    }\n    return values(this.entityComponents[entity.id]);\n  };\n  public getComponentFactory = (name: IComponentFactoryKey): IComponentFactory => {\n    return this.componentFactories[name];\n  };\n\n  public unRegisterEntity = (entityId: EntityIdType) => {\n    this.unRegisterComponentsForEntity(entityId);\n    this.deleteEntityComponents(entityId);\n    this.clearEntityComponentCache();\n    this.entityManager.unRegisterEntity(entityId);\n  };\n  public unRegisterComponent = (entityId: EntityIdType) => {\n    this.componentManager.unRegisterComponent(entityId);\n  };\n \n  private unRegisterComponentsForEntity = (entityId: EntityIdType) => {\n    const componentIds = this.getComponentIdsForEntity({ id: entityId });\n    componentIds.forEach(id => this.componentManager.unRegisterComponent(id));\n  };\n  private deleteEntityComponents = (entityId: EntityIdType) => {\n    delete this.entityComponents[entityId];\n  };\n  private clearEntityComponentCache = () => {\n    delete this.entityComponentCache;\n    this.entityComponentCache = {};\n  };\n\n  public getEntityComponent = <T>(entity: IEntity, componentName: string): IComponent<T> => {\n    return this.getComponentById<T>(this.entityComponents[entity.id][componentName]);\n  }\n  public getEntityModel = <T>(entity: IEntity): WithId<T> => {\n    return groupEntityComponents<T>(entity, this.system.components);\n  };\n  public getEntitiesByComponentTypes = (componentNames: IComponentFactoryKey[]): EntityIdType[] => {\n    const cacheKey = componentNames.join('-');\n\n    if (this.entityComponentCache[cacheKey] !== undefined) {\n      return this.entityComponentCache[cacheKey];\n    }\n\n    const isValidComponent = (component: IComponent) => componentNames.indexOf(component.name) !== -1;\n\n    const entities: EntityIdType[] = [];\n    \n    for (let i = 0; i < this.system.entities.length; i++) {\n      const entity = this.system.entities[i];\n      const components = this.getComponentIdsForEntity(entity)\n        .map(this.getComponentById)\n        .filter(isValidComponent);\n\n      if (components.length === componentNames.length) {\n        entities.push(entity.id);\n      }\n    }\n\n    this.entityComponentCache[cacheKey] = entities;\n\n    return entities;\n  }\n\n  public step = () => {\n    this.input.update();\n    this.updateSystemEntities();\n    this.entityComponentCache = {};\n    this.epoch++;\n    return this.system;\n  };\n  private updateSystemEntities = (): void => {\n    this.system.entities.forEach(this.updateComponentsForEntity)\n  }\n  private updateComponentsForEntity = (entity: IEntity): void => {\n    this.getComponentIdsForEntity(entity)\n      .map(this.componentManager.get)\n      .forEach(this.updateComponent);\n  }\n  private updateComponent = (o: IComponent) => o.update(this, o);\n\n  public getSerializableState = (): ISerializableState => {\n    const { system, config, epoch, entityComponents } = this;\n    return {\n      system,\n      config,\n      epoch,\n      entityComponents,\n    };\n  };\n  public loadHydratedState = (state: ISerializableState) => {\n    this.system = state.system;\n    this.config = state.config;\n    this.epoch  = state.epoch;\n    this.entityComponents = state.entityComponents;\n  };\n\n  public getState = (): ISystem => {\n    return this.system;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      system: this.system,\n      config: this.config,\n    }, null, '  ')\n  };\n}\n\nexport default SystemManager;\n\nfunction groupEntityComponents<T>(entity: IEntity, components: IComponent[]) {\n  return components\n    .filter(o => o && o.entityId === entity.id)\n    .reduce((acc, val) => {\n      return { ...acc, ...val.state };\n    }, { id: entity.id }) as WithId<T>;\n}\n","import { createSystem } from \"./factories/system\";\n\nconst system = createSystem({ name: 'Galaga' })\n\nexport { system };\n","import SystemManager from \"../../engine/services/SystemManager\";\n\ntype SystemArgs = { name: string; version?: string; logging?: boolean; }\n\nexport function createSystem({\n  name,\n  version = '1',\n  logging = true,\n}: SystemArgs) {\n\n  const system = new SystemManager({\n    name,\n    version,\n    logging,\n    screenSize: {\n      x: 800,\n      y: 600,\n    }\n  })\n\n  return system;\n}\n","import * as React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport './App.style.css';\nimport './FontGlow.style.css';\n\nimport { DevScreen } from './client/Development/Dev';\n\nimport { Intro } from './client/Containers/Intro';\nimport { Menu } from './client/Containers/Menu';\nimport { Game } from './client/Containers/Game';\nimport { Outro } from './client/Containers/Outro';\n\nimport { CharacterModel } from './game/Domain/character';\nimport { ProjectileModel } from './game/Domain/projectile';\n\nimport { createPlayer } from './game/factories/player';\nimport { createBullet } from './game/factories/bullet';\n\nimport { system } from './game';\n\nimport { ON_START_GAME, ON_START_ENGINE, ON_STOP_ENGINE } from './events';\nimport { keys } from './engine/utils';\nimport { SfxLibrary, Songs, SongLibrary } from './game/catalogue';\n\ninterface State {\n  epoch:    number;\n  player:   CharacterModel;\n  bullet1:  ProjectileModel;\n  bullet2:  ProjectileModel;\n}\n\nclass App extends React.Component<{}, State> {\n  private handler: number | undefined;\n\n  private player  = createPlayer(system, 'Odin');\n  private bullet1 = createBullet(system, 'Bullet of Destiny');\n  private bullet2 = createBullet(system, 'Bullet of Greater Truth');\n\n  constructor(props: {}) {\n    super(props);\n\n    this.gameAudioInitialize();\n\n    system.events.registerEvent(ON_START_GAME,    this.startNewGame);\n    system.events.registerEvent(ON_START_ENGINE,  this.start);\n    system.events.registerEvent(ON_STOP_ENGINE,   this.stop);\n  }\n\n  state = {\n    epoch:   system.epoch,\n    player:  system.getEntityModel<CharacterModel>(this.player),\n    bullet1: system.getEntityModel<ProjectileModel>(this.bullet1),\n    bullet2: system.getEntityModel<ProjectileModel>(this.bullet2),\n  }\n  \n\n  componentDidMount() {\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  componentWillUnmount() {\n    this.gameAudioCleanup();\n\n    system.events.unRegisterEvent(ON_START_GAME,  this.startNewGame)\n    system.events.registerEvent(ON_START_ENGINE,  this.start);\n    system.events.registerEvent(ON_STOP_ENGINE,   this.stop);\n\n    this.stop();\n\n    delete this.handler;\n  }\n\n  gameAudioInitialize = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      system.audio.registerSong(`${key}`, { ...SongLibrary[key], volume: 0.6 })\n    });\n\n    keys(SfxLibrary).forEach((key: string | number) => {\n      system.audio.registerSound(`${key}`, { ...SfxLibrary[key], volume: 0.3 })\n    });\n  }\n\n  gameAudioCleanup = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      system.audio.unRegisterSong(`${key}`)\n    });\n    \n    keys(SfxLibrary).forEach((key: string | number) => {\n      system.audio.unRegisterSound(`${key}`)\n    });\n  }\n\n  moUntWOrld = () => {\n    this.setState({ epoch: system.epoch });\n  }\n\n  tick = () => {\n    system.step();\n\n    this.setState(_ => ({\n      epoch:   system.epoch,\n      player:  system.getEntityModel(this.player),\n      bullet1: system.getEntityModel<ProjectileModel>(this.bullet1),\n      bullet2: system.getEntityModel<ProjectileModel>(this.bullet2),\n    }));\n  }\n\n  startNewGame = () => {\n    window.location.assign('/game')\n  }\n\n  start = () => {\n    this.stop();\n\n    this._update();\n  }\n\n  _update = () => {\n    this.handler = requestAnimationFrame(this._update);\n\n    this.tick();\n  }\n\n  stop = () => {\n    if (this.handler) cancelAnimationFrame(this.handler);\n  }\n\n  save = () => {\n    system.storage.saveGame();\n  }\n\n  load = () => {\n    this.stop();\n\n    system.storage.loadGame();\n\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  restart = () => {\n    window.location.assign('/menu');\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App container with-title is-center is-dark\">\n          <label className=\"title\">Galaga.ts</label>\n\n          <Route exact path=\"/\" render={(props) =>\n            <Intro\n              onPlayerInput={this.startNewGame}\n              {...this.state}\n              {...props}\n            />\n          } />\n\n          <Route path=\"/menu\" render={(props) =>\n            <Menu\n              system={system}\n              {...this.state}\n              {...props}\n            />\n          } />\n\n          <Route path=\"/game\" render={(props) =>\n            <Game\n              system={system}\n              onRestart={this.restart}\n              {...this.state}\n              {...props}\n            />\n          } />\n\n          <Route path=\"/end\" render={(props) =>\n            <Outro\n              system={system}\n              {...this.state}\n              {...props}\n            />\n          } />\n\n          {null && <DevScreen\n            system={system}\n            onStart={this.start}\n            onStop={this.stop}\n            onTick={this.tick}\n            onSave={this.save}\n            onLoad={this.load}\n          />}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './index.css';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}