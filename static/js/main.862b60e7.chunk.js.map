{"version":3,"sources":["audio/Weapons/Lasers/sfx_wpn_laser1.wav","assets/enemy/enemy-explosion-00.png","assets/enemy/enemy-explosion-01.png","assets/enemy/enemy-explosion-02.png","assets/enemy/enemy-explosion-03.png","assets/enemy/enemy-explosion-04.png","assets/enemy/enemy-explosion-05.png","audio/Explosions/Long/sfx_exp_long1.wav","audio/Music/game-menu.mp3","audio/Music/game-main.mp3","audio/Music/game-end.mp3","audio/Music/game-main-summary.mp3","audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav","audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav","audio/General Sounds/Interactions/sfx_sounds_interaction1.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav","audio/Weapons/Cannon/sfx_wpn_cannon1.wav","audio/Explosions/Short/sfx_exp_short_soft5.wav","audio/Explosions/Short/sfx_exp_short_hard12.wav","audio/Explosions/Clusters/sfx_exp_cluster1.wav","audio/Explosions/Odd/sfx_exp_odd1.wav","assets/player/ship.png","assets/player/explosion-1/explosion-1-01.png","assets/player/explosion-1/explosion-1-02.png","assets/player/explosion-1/explosion-1-03.png","assets/player/explosion-1/explosion-1-04.png","assets/player/explosion-1/explosion-1-05.png","assets/enemy/enemy-ship.png","assets/crab-bug/crab-bug-ship.png","assets/helmet-bug/helmet-bug-ship.png","assets/pincer-bug/pincer-bug-ship.png","assets/sonic-enemy/sonic-enemy-ship.png","engine/services/AudioManager.ts","engine/utils.ts","engine/services/ComponentManager.ts","engine/services/EntityManager.ts","engine/services/EventManager.ts","extern/Vector2.js","extern/Key.js","extern/Mouse.js","extern/Keyboard.js","engine/services/InputManager.ts","engine/services/StorageManager.ts","engine/components/controllable.ts","engine/components/combatable.ts","events.ts","engine/components/killable.ts","engine/components/withPosition.ts","engine/components/nameable.ts","engine/components/isCollidable.ts","engine/components/withCollisions.ts","engine/components/withGeometry.ts","engine/components/withMomentum.ts","engine/components/withOffscreen.ts","engine/components/lootable.ts","engine/components/withBoundary.ts","engine/components/withTexture.ts","engine/components/withBugWiggle.ts","engine/components/withHomePosition.ts","engine/components/index.ts","engine/components/ageable.ts","engine/services/SystemManager.ts","game/index.ts","engine/system.ts","engine/components/withRandomWalk.ts","engine/components/withWrapAroundPosition.ts","engine/registerComponents.ts","game/factories/enemy.ts","game/Domain/mob.ts","game/catalogue.ts","app/Hoc/withEntity.tsx","app/hooks/withAnimationState.ts","app/hooks/withSoundEffects.ts","app/hooks/withCollisionEffect.ts","app/Hoc/withSpriteEffects.tsx","app/Containers/Player/Player.tsx","app/Containers/NPCs/Bug.tsx","app/Containers/NPCs/CrabBug.tsx","app/Containers/NPCs/HelmetBug.tsx","app/Containers/NPCs/PincerBug.tsx","app/Containers/NPCs/SonicBug.tsx","app/Containers/Sprites.ts","app/Hoc/withTexture.tsx","app/utils.ts","app/Development/FPS.tsx","app/Development/Dev.tsx","app/Layouts/Base.tsx","app/Containers/Intro.tsx","app/Components/Lives.tsx","app/Components/HighScore.tsx","app/Components/Credits.tsx","app/Components/LevelStatus.tsx","app/Components/RestartButton.tsx","app/Layouts/Gui.tsx","app/Backgrounds/NewGame.tsx","app/hooks/withEnterKeyEffect.ts","app/Containers/Menu.tsx","app/Backgrounds/StarField.tsx","app/Levels/Base.tsx","app/Containers/Weapons/Bullet.tsx","app/Hoc/withGameLevel.tsx","app/Levels/Directory.ts","app/Levels/Demo/Demo.tsx","app/Levels/1/Level.1.tsx","app/Levels/2/Level.2.tsx","app/Levels/3/Level.3.tsx","app/Levels/4/Level.4.tsx","app/Levels/End/End.tsx","app/Components/Countdown.tsx","app/Levels/Loader.tsx","app/Components/LevelSummary.tsx","app/Containers/Game.tsx","app/Backgrounds/GameOver.tsx","app/Containers/Outro.tsx","engine/components/withPlayerControls.ts","game/factories/player.ts","game/Domain/character.ts","game/factories/bullet.ts","game/Domain/projectile.ts","app/App.tsx","index.tsx"],"names":["module","exports","__webpack_require__","p","configDefaults","name","debug","logging","version","AudioManager","config","_this","this","Object","classCallCheck","init","toString","JSON","stringify","objectSpread","sounds","songs","soundFactory","Howl","audioEngine","Howler","options","stop","unload","loop","sprite","play","e","Error","concat","id","event","callback","on","once","off","volume","createSelector","path","system","entity","searchResult","components","filter","o","b","state","undefined","hasState","length","first","createSetter","selector","component","factory","mkEntity","array","defaultIdGenerator","epoch","arguments","next","keys","fn","called","apply","clamp","min","max","num","ifStateProp","obj","boxMullerRandomGeneratorFactory","random","x1","x2","w","z","phase","Math","sqrt","log","throttle","wait","last","isCalled","setTimeout","KeysEnum","defaultBoundary","top","left","bottom","right","ComponentManager","registerComponent","idGenerator","model","unRegisterComponent","componentId","get","getSerializableState","loadHydratedState","a","EntityManager","registerEntity","entityId","entities","unRegisterEntity","EventManager","registerListener","emitter","addListener","unRegisterListener","removeListener","emit","eventName","data","onUpdate","onChange","EventEmitter2","delimiter","wildcard","maxListeners","Vector2","x","y","Key","pressed","justPressed","justReleased","Mouse","_keys","_position","_positionUpdated","_delta","_wheel","_wheelUpdated","_doubleClicked","position","delta","wheel","doubleClicked","canvas","events","i","push","self","window","onmousewheel","deltaY","addEventListener","detail","navigator","msMaxTouchPoints","lastTouch","touch","touches","set","clientX","clientY","updateKey","LEFT","DOWN","UP","rect","getBoundingClientRect","updatePosition","movementX","movementY","which","Keyboard","actions","keyCode","prototype","RESET","update","action","reset","MIDDLE","RIGHT","setCanvas","mouseInside","insideCanvas","setLock","value","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","document","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","buttonPressed","button","buttonDoubleClicked","buttonJustPressed","buttonJustReleased","xDiff","yDiff","dispose","removeEventListener","end","key","shift","keyPressed","keyJustPressed","keyJustReleased","TAB","ENTER","SHIFT","CTRL","ALT","CAPS_LOCK","ESC","SPACEBAR","PAGE_UP","PAGE_DOWN","END","HOME","INSERT","DEL","NUM0","NUM1","NUM2","NUM3","NUM4","NUM5","NUM6","NUM7","NUM8","NUM9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","InputManager","mouse","keyboard","KeyCodes","StorageManager","saveGame","saveState","loadGame","loadedFromStorage","loadStateFromKey","hydratedComponents","hydrateLoadedComponents","serialized","localStorage","setItem","getItem","parse","_this2","componentInitializerCache","map","componentInitializer","cached","getComponentFactory","handleMovement","direction","_ref","input","_ref2","slicedToArray","neg","pos","COMPONENT_NAMESPACE","combatableFactory","attacking","attackPower","handleAttack","ON_START_GAME","ON_GAME_OVER","ON_LEVEL_LOAD","ON_LEVEL_BEGIN","ON_LEVEL_COMPLETE","ON_PLAYER_ATTACK","ON_COLLISION","ON_ENEMY_DEATH","ON_ENEMY_FREE","ON_START_ENGINE","ON_STOP_ENGINE","killableFactory","health","isDead","immortal","wasDeadBefore","isDeadNow","withPositionFactory","center","controllable","controls","getEntityComponent","moving","_controls$state","speed","boundaryComponent","geometryComponent","_geometryComponent$st","geometry","width","height","boundary","clampedX","clampedY","handleMovementState","nameableFactory","isCollidableFactory","collidable","collisionGroup","withCollisionsFactory","collisions","getEntityModel","collidableEntities","getEntitiesByComponentTypes","ownBounds","getBounds","forEach","otherBounds","lastCollisions","Set","handleCollisions","dimensions","withGeometryFactory","withMomentumFactory","momentum","offscreen","_component$state$mome","withOffscreenFactory","screenSize","innerWidth","innerHeight","handleOffscreenFlag","lootableFactory","loot","withBoundaryFactory","withTextureFactory","texture","BRAKE","PULSE_WIDTH","withBugWiggleFactory","wiggling","wiggleState","counter","increment","_component$state$wigg","positionComponent","handleBugWiggle","withHomePositionFactory","homePosition","goHome","moveable","_component$state$home","distX","distY","abs","TIME_TO_GET_HOME","isHome","defaultComponentFactories","age","handleVerticalMovement","handleHorizontalMovement","_component$state$dire","handleMovingFlag","attack","wiggle","SystemManager","epochs","object","entityModelCache","entityComponentCache","registerComponents","_len","Array","_key","registered","entityComponentSetter","getComponent","getComponentById","getComponentIdsForEntity","entityComponents","getComponentsForEntity","componentFactories","getCachedComponentsForEntity","entityModels","unRegisterComponentsForEntity","deleteEntityComponents","clearEntityComponentCache","clearEntityModelCache","componentName","reduce","acc","val","groupEntityComponents","componentNames","cacheKey","join","isValidComponent","indexOf","step","updateSystemEntities","updateComponentsForEntity","updateComponent","getState","storage","audio","n","setValue","_ref$version","_ref$logging","_ref$screenSize","createSystem","defaults","disabled","jitter","withRandomWalkFactory","randomWalkGeneratorX","randomWalkGeneratorY","setJitter","level","deltaX","withWrapAroundPositionFactory","_component$state$posi","registerComponentFactories","build","create","createEnemy","textureId","createMob","points","SpriteTextureIds","mkAudioSrc","src","opts","esm_objectSpread","Sfx","NEW_GAME","GAMEOVER","YOU_WIN","LEVEL_WIN","PAUSE","UNPAUSE","NEXT_LEVEL","Songs","MENU","GAME","SUMMARY","SongLibrary","_SongLibrary","esm_defineProperty","MenuMusic","MainMusic","EndMusic","SummaryMusic","SfxLibrary","_SfxLibrary","GameOverSound","LevelWinSound","NextLevelSound","YouWinSound","NewGameSound","PauseGameSound","UnPauseGameSound","withEntity","Component","props","rest","objectWithoutProperties","react","assign","withAnimationState","_useState","useState","animations","_useState2","_useState3","currentFrame","currentState","frame","getDefaultFrame","_useState4","setCurrentFrame","_useState5","_useState6","setCurrentState","_useState7","_useState8","timers","setTimers","queueFrame","when","buffer","duration","timer","onFinished","fr","withSoundEffects","useEffect","playDeathAudio","collectionKey","mkAudioCollectionKey","playSound","playAttackAudio","registerSound","actionType","unRegisterSound","withCollisionEffect","collisionHandler","onCollision","withSpriteEffects","_React$useState","React","_React$useState2","hidden","setHidden","_React$useState3","_React$useState4","_withAnimationState","handleCollision","styles","backgroundImage","backgroundSize","backgroundPosition","display","dead","cssDisplayValue","elementId","className","style","ConnectedPlayer","normal","require","death","shoot","ShootSound","DeathSound","AnimatedBug","AnimatedCrabBug","AnimatedHelmetBug","AnimatedPincerBug","AnimatedSonicBug","SpriteTextureCollection","_SpriteTextureCollect","defineProperty","Player","Bug","CrabBug","HelmetBug","PincerBug","SonicBug","withTexture","ConnectedComponent","loadLevel","enemyPositions","enemies","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","row","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","enemyTypeId","err","return","withBlur","handler","currentTarget","blur","FPS","_React$Component","_getPrototypeOf2","args","possibleConstructorReturn","getPrototypeOf","call","lastLoop","Date","getMilliseconds","count","fps","throttled","countFps","currentLoop","requestAnimationFrame","setFps","setState","updateFrequency","inherits","createClass","cancelAnimationFrame","defaultProps","EntityInspector","DevScreen","setEntityId","open","setOpen","dragging","setDrag","setDragFalse","handleClick","react_draggable_default","onMouseUp","onMouseDown","onMouseMove","onClick","classNames","nav","Buttons","FPS_FPS","parseInt","onStart","onStop","onTick","onSave","onLoad","classes","Layout","topLeft","topCenter","topRight","middleLeft","middleCenter","middleRight","bottomLeft","bottomCenter","bottomRight","background","children","after","Intro","Lives","HighScore","Credits","LevelStatus","RestartButton","Gui","lives","score","credits","onRestart","NewGame","withEnterKeyEffect","onEnter","enterKeyHandler","Menu","ready","setReady","handleStartGame","playSong","stopSong","Backgrounds_NewGame","StarField","Level","_React$PureComponent","Bullet","outline","borderRadius","getStyles","withGameLevel","LevelHOC","levelId","enemiesDead","countDeath","onLevelComplete","completeEvent","clearInterval","interval","enemyFree","items","maybeComponent","floor","controlComponent","enemyGroup","startFreeEnemyInterval","setInterval","_this$props","nextProps","nextState","_this$props$state","player","bullet1","bullet2","Base_Level","enemy","ConnectedEnemy","Levels","demo","level1","level2","level3","level4","_props$state","humanizedLevelNames","Countdown","_useCountdownHooks","time","setTime","_loop","onReady","useCountdownHooks","Loader","levels","currentLevel","setLevel","GameLevel","current","getThisLevel","LevelSummary","onNextLevel","shots","hits","round","Game","complete","completed","registerEvents","handleLevelLoading","handleLevelBegin","handleLevelComplete","handleEnemyDeath","handleBulletCollisions","handleGameOver","unRegisterEvents","toConsumableArray","killEntity","getBullet","fireBullet","bullet","reviveEntity","source","homePositions","onFinalScore","startNewGame","nextLevel","getNextLevel","_this$state","Backgrounds_StarField","GameOver","Outro","final","setFinalScore","clearTimeout","Backgrounds_GameOver","withPlayerControlsFactory","createPlayer","createCharacter","createBullet","createProjectile","App","gameAudioInitialize","registerSong","gameAudioCleanup","unRegisterSong","moUntWOrld","tick","_","gotoScreen","start","_update","save","load","restart","screen","Intro_Intro","onPlayerInput","Game_Game","Dev_DevScreen","ReactDOM","app_App","getElementById"],"mappings":"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","file":"static/js/main.862b60e7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_laser1.7c857ee1.wav\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAjklEQVRYR+2WQQrAIAwENz9p/v+o9CeWQANSvLiUBsp6FExmJyIampc194cAZEAGZOA/BiJiuPt2oO0D9XSzDZ9PPw2QhRLicMcZASZ91qAAKv0ARjZPCAOMsUIBzGMoA7nHWKAAKmmN4Fb5rYEZgk1P34HVJ4aZ/6sA7M+KugNss9U5AciADMiADLQbuADnnjshOGarxwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVRYR+2UwQ3EMAgEoZPQf1G4E59AwUK+ewCXyB/8ipSEXQYvCIcPHtaHNtAEmsAjBJh5ElGpVumnfwT3vZMyMCdMKYAIaCa8GXkv7zLLLfWxFPYiu4nXDXwJwk0Ecl17QmECO2orYuO4iGAwg1zGCTAxaCpswASl+OpAnlyFqGiJgP9JLyOCdnxdpCZMPJuQMAHDKgKCe+tC62TFNVGZyKwx3HEcg8HMrPkno5gyoN0Lcnf8TrCY2q6INJcy8IuAreAK/voIXMyqwivGEUxvflMawZOG2kATaAJN4DiBDzrKfCHGS/waAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABAklEQVRYR+2VSw4DIQhA4Sbj/Q/lUWyw0jCIBWya2dhNMz95Pj4iPPzDh+PDATgGjgHXQK21lVKm9/T9BtAQ8l3lAsg5IYO2Bg0RUN7bgUoBEAzvVO6YYOgZAdH/ypo19EIAt513hjcJB+yXw0g2FSEAi9xLQdRCCsCqAUt5NHhPm3cYkdLx4pTfVdGxHW/tEAAvEln0U6BGh6xgXAPywxXEt1b0LLgAOu+cNBo6mVz/bICDZSxEAF0DFjkvbBUhF2ykZsJFqANNgcUQ+gsAW6DA11X6pTUFvYLbHsW6FXn2axAdIJIGtwZuh844cnW/Zw8gCeoC7GjNfHMAjoFj4HEDL4r0ziE3SigHAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABW0lEQVRYR91WWw7EIAjEm9T7H8rexA1NbCzyGNwmm2z/2iIMwzha6MdP+XF9ggB0ol4Ii802BAHIJs3EpwH0Tp0LlPJkpLXWa61Lvoi9NACtO1k8KjrnCAFYnXES7Z8Xr4EPAYxFSGIkRoJQAVhzHotnineKqiOIEjGoIbxoxhmA7ggGKI0R/ncc9WrmBjaBRLcirIEooWTQYlR+fw3ArQ/hE9FoHwDkbPn9bI00g/EYmfWiCdf1gRlxJDZOhAjOY8EcgdZFRKcEFOnmErAVNAAgRT17jjzlAWC3GNKpNU6bAecO4G0xBiNFu6UBpCsrJsNkqAHr1NOKS+EiQMzDaNird9ZfdlwrK/nKo+5/4wIzGkg5IbozEP+AACzO2Kmf5+qMu56x+ADiatYFZfd2lBqBFJ5WVGPD21EwAETRlhBfAWBRv+P/7mn4jQHtrIVHgCRHx/S/DCAsyZgPlF0MMIC1WsUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABEElEQVRYR81XWxLDIAiEo+T+h9Kb2DEdM2pFF3yk/Q3iviAN08QvEAUm4okW+OEQKDBj9c65cF2XCCx//hSNDmkAaBQpUKKXjMBKAFrnpvzTMJVquwBiyLxz1PMzNkaVa4F4TYEEeisAJCvwFCT5kKaabGxVIAci5eQYANMUaKQs2CpWtKjAij2PEIAsmJlzCUQiCAFAmFhrOLKLh9E3neYiZGR/FNjpfSTrfbnaj1rQytJRAH/1Mkpgmgog4dGEsVf7igV5Fvgk2+MZQMiZLFi5mk0AVgXw3sCtZrV0iJRWUGoFRmDq5/Vqr+27AfT2/0q/k0rFGFqls/4Dqu97LNjBNL9Msu5rgeLLd4VieY8P2WaPIboXUNsAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAs0lEQVRYR+2XSw6AMAgF4SZy/0P1KBiMIDV+YuKzLnCljSnTwZgHU7qUSJmI8xr6viuGArjaNwDsJT8twsLZ/h0AayNlsR683obFwsH+XaHWmorI68XNrBswCOKtxmcA+WPOBx0CYDAOMQzAISD9fvLvKIAyUAbKQBkoA2XgPwZQkfwuG/SpGJCG9wARTtdaCwByJrDslyFksnwusRQAyJlgP/7Zs88e0QLkTHD1HRTAcAMzqEdXu+U9kUQAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_long1.e65a7e8b.wav\";","module.exports = __webpack_public_path__ + \"static/media/game-menu.277a07d7.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main.62197df4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-end.4f698af1.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main-summary.430d3f4f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare1.aae78736.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup3.da47f034.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare3.25f989ff.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup2.35e9b099.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_interaction1.60988248.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_in.b7b7a7b9.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_out.959daf2a.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_cannon1.75bcd782.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_soft5.c6e20b31.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_hard12.ffa98eb5.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_cluster1.7a7460e6.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_odd1.6d3db534.wav\";","module.exports = __webpack_public_path__ + \"static/media/ship.8745c391.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABvElEQVRYR+1XW5LDIAwjN1nufyj2Jt6BYlYYv5LpTH/an6YktYQsY+cqH/5c78RvrVGt9VbMWw8PstRofF8CqK/3Neu+sdM8ARkYf8/r9vtCGSowoUDimIAA7jIvEFaEd26p4pDwCcAuqBS6SokJT7BF9EdJFxAKCdBVO2oaeIiCZINU2IGp0QI3gpiqcNo0s4p0uASW0+8SQG/I6xQBatQd3d3s1balwJECRwldAahpJiKN3EF4LeMRayOuuaLdZwhEhrQVUGTDYJoCrin5jBB+OghEu2a5nxBYsYHEqcC8qe2G1xAc0+Caktp//zAJYEOZkknZuwIZAgcZJfbI8ubuBIGofWOK1OqwPMBnNwNwX7eMZxHxCGj+eingnNde3j0S2cNIJyC6YCR7pAbftxUopWAKKrRQWW6aAWUlyAOKgV0CKxXz39wJGVDWP1cDVoX2TA+3AUcH0TbTYUtWdPaGFPTOIJYqQwA5Rq+HRnjWCxBMm3K1AVXOg8mZIBzJeCjxjmZZytI3Xn+JZz1lKt5ePsBU2yCKKmrqzPsxAQ7kvXDgDNhdj+8HgXfyBBImfGLctxJIcDwe+RL4A6hvfDDjUhdcAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACBUlEQVRYR8VXQXLEIAyDnyz/fxT7EzpmMRXCBmdmO82lmSTFsizZ3pz++cozfqut3+fy++yvwEGsPZi8PIFAoHrPwE9nUKJ2th4bGNBiB4C3lFpOaWeYwPp0jyyWgxhALnm+t0AzWwaz53ojlXDYElQO9UoxWKq1tlJsbcVLMILUd0r9sFs5gGoBoBVjIDHFKxNWUGSA2Qi4agNwFQ+A6Gy8gl51nOX3ASNbCWhdQivS/Col5VY/PYXFSXo5a0ApHCXQIFpHDCqfKhBhpeULiMGI3Yg0TchAxaeK5r/yLxMgluXEQi7ZB0CCYvpntoN+LkPXhmFRtmQYgBy2ZDgoFNG+a/1YE33P4ryKENUV6fdAOQtzgrk0qC6xTdVGcBGUZImXUi6KZwZUD5tFQ62YUbfaGADTLQG79VJa7OjpABM5u0BrOvyPQruJsNtSdWA5YZx97wPQC9QJGJxLqEJdSnPQwmMAFv0WM3P4sB1xhG8idMavtlNsRpYgl2dGYKuN31cyZyZMisHvAnB5bu0KtK7Fx3Fw6M3PDsI7u0DeehMsMvsNwfEQu9twNIylb0dA4fTU+9Exn61kQoJutZYwuRzWJgQA+ufOqm5qYNuEsYVac8J7T0Ct5fTugqfi46HG/f/oAoemBYPx28DEeDoLWIzZ0MoqAjbA3jMAXwp67wMB5N/65Afslf0wgQfXLAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACd0lEQVRYR51XQYIDIQjTn9T/P8r+ZHaxYEMMs+320tZhAEOC2Ns3n2tey7yPvr7jP/qwZ7we9hzrmtfb0Y2RzFEFutsM+7ck++ivBGI3yqhyWiUQ6330OV+IjYc7wXc8Vk4ggoHhfL4Wx6hhRxsLarb4vZOADV6tGfyAgJXUF7G+5jwc7kSueUXQyBltELSdDKCAcd4ICKhtF48x2nPO9DQl9GjtSIbWFnpM4KjKEdcN2WnAiOuWnH04QWW7kyCeZQQAWoQOg25CeeZcItwQopdQMKOKhEfNBcSMmkrWgvdrrvIwP1AVqaF8Gvxw6Kw/ElP8ID7kjgba5TreBf0kIdv12qCpAWR+m0AFNdc2Gk7IdDcgQGYncIcAluAgUGuNm0wkGOvpf+w4mhKUAwmZOuHuaGgMjiwABlO/EQ1GBJtW9IWjFUedZDLejlW7jVZdlUMFX2pMdfYTagUA0iTyhP79oEmOi2dVcH0aij6PUKrWfEfKePZVI+Ig+yQUHNgHFEnm4EIcRtAFcwnoDIgSlF0P+IBJcOANP88E5TxAg0Q6B4iELMNEQFBStOVlT0PJSUKD2YeQv3bPz0Omav2YivroPheQOSgB2zHzQGlcSTF87EHWFjyGliEhUE06mABPTNiK1/bUMOJrH5UAAygZKjRK7ZcqiDeKWZ/ZXSViblRfSIMMTEUbATWQJna4Oiq4JfFoTkhE9BfuLyaIBsqTegDCHW1cJbRlCA+PqVgiQZeQSqab8az3COjQI0klCVWm8h7oiuExPUmOoODZIXHAdVnfFQo5yalZ3DUD3fNiUlwayjreKYbgLn3sy+l/g6PnT6/jnM3vez/v0LVIfdTdDwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFUlEQVRYR8VXQY7EIAyDnwz/fxTzE1ahBJnghLLSaudSTVsSx3EMzemff7nnb7X1ay7P/z/81frkKuXJtSRsKbVs7iEWXCzvfmtN5WOASzFeIaTQrWKLUAHI/Z4spVS/O0Va0WQUQChYrFwjUMp7slKyXnvSQV0PMqrG92xwy5bHrNtzlhxBzeeDVmFlYWGUiHGYtF61YKl+MPMpJeVWl5jYGgVj11oQR9VbmjGAMjLpb7UxENFQLQA2uiCgJpPKRf3eT/TR2wHXaLypDyBtJ0tAFuRdBTj1AmPK2uFqQGn1lG5BMoY8ECjWFQChXBlgE+CNqV2DIzoNjDmhWLKOU9QGD4wnUAXAnHYXIZgMqwSrEZB9HMG+t9ZYqzai2jSAFEUz7DFk53/bK0IArbaWn4retAAZwrhsLXNJWfNahCwZc0irg6krpxUUgJpI5HoqqMgpl1F+BcDsehiAjaM1Kc8bepwbAMjA5vewy1mAnhnheNtRnC1Y9gHHD6ztMoYiE2K2/nozWvQQnIwWsWohSj85rh23Y6WPofd2Rq9tRwbkhe1MCAdJfBYJzrol/rcg3BZ4mugBCChv5K6PZMoCO5Tqqbi/M07G3eHgXMhGLgJBzwPo52ihrAX2uev9zvfC1YcJE5F7jyQMt+PTVxEKlO0LC5Dg68iK/DyGEBl939vdrljadsNg9UnNt4n1/SsGfpskWvcD7otZP/TRmLkAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAu0lEQVRYR+2X3Q2AIAyEj1HYzg2cwQ3crm6CQUFb42/i6Uv7BiHl61GSa4CORhL6GMweeWEvYwGc5F0B8qEaDBUO8hsAaYHYAZRnaCTt5TdPkIAUAE4PFAUmiLj22XcAqpl1ob8AZJYK8RuAgiB/9Iv0nIZ7UJMDuAKugCvgCrgCroB1xQw3fNsPsGaCLUC156XYWQHiTJC9n2YYRGbrX2IBoM4E2/Evr40CyqU+cFOvHF2akDqUnKA6wAgOWExlxHkIvQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAAwklEQVRIS+2UUQ7EIAhE4Si9nT3R9nYehQ0IDau1YrPxq8SkPzjPGUgRFhQuYMALmUr5Pq6UCY7tp4cICLGK+aLPv2I8ExVgcZEmAPsKbABg2BjCXSkTHVt5nEH4cspQO73KMQZhbXZSVRNbZ1IxCEfCoI+6YRd7LpLVzJ45UYBALDKLyhQHoPF2OSEqE5FCPu4Bd476EC+gsfi5nJvl8+k4ikH0cuNEN+/k/AOiG0wSlVUgsth2Tf1E2uYXMhXgkri+xNVLFbLUHXYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAm0lEQVQ4T+2UQRLDIAhF/z+Kh0kPnRwmRyFDFWvRatO6yCJu0AHf8AElJi5OZOGGxWoKIARotlfjumayCxiIZCuY85fwNswiFKrZrRA+UrMU5vz52EzbLjBQQTlYgYXP322PxlTYU1uUI1t4qVr2uE/yv8usiKpkdto5fAF/w96657v5S2Yl0MM/8boyTWKescEXM6zZmS/qurAD5VJKFMb8mZ4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAjUlEQVQ4T9XUwQ2AMAgFUBil+w/VUb5BxRCEFhMucqz15ResTI3FjRb9HQOBeH+K2jE7MNCEDIgxCDzPWTGNNED6wEI68R24xCSRFFjSXaSAWboYkx6ZstizHAxkiwmkpenu5r3efWMu1fKGuHQ5phst7tdKmO9H9J0Fa3GyNixqUscN+Pp7qt3NotqKHVslNhRW8lxOAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import {Howl, Howler} from 'howler';\nimport { IBasicConfig, IAudioCollection } from \"../types\";\nimport { IAudioManager } from \"../interfaces/IAudioManager\";\n\nconst configDefaults = {\n  name: 'AudioManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass AudioManager implements IAudioManager {\n  public config:            IBasicConfig;\n  public sounds:            IAudioCollection;\n  public songs:             IAudioCollection;\n\n  private soundFactory:     HowlStatic;\n  private audioEngine:      HowlerGlobal;\n\n  constructor(config: IBasicConfig) {\n    this.config       = { ...configDefaults, ...config };\n    this.sounds       = {};\n    this.songs        = {};\n\n    this.soundFactory = Howl;\n    this.audioEngine  = Howler;\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerSound(name: string, options: IHowlProperties) {\n    this.sounds[name] = new this.soundFactory(options);\n  }\n\n  public unRegisterSound(name: string) {\n    this.sounds[name].stop();\n    this.sounds[name].unload();\n    delete this.sounds[name];\n  }\n\n  public registerSong(name: string, options: IHowlProperties) {\n    this.songs[name] = new this.soundFactory({\n      loop: true,\n      ...options\n    });\n  }\n\n  public unRegisterSong(name: string) {\n    this.songs[name].stop();\n    this.songs[name].unload();\n    delete this.songs[name];\n  }\n\n  public playSound(name: string, sprite?: string | number) {\n    try {\n      this.sounds[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSound(name: string, id?: number) {\n    try {\n      this.sounds[name].stop(id)\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public playSong(name: string, sprite?: string | number) {\n    try {\n      this.songs[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSong(name: string, id?: number) {\n    try {\n      this.songs[name].stop(id);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public registerListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].on(event, callback);\n  }\n\n  public registerOnceListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].once(event, callback);\n  }\n\n  public unRegisterListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].off(event, callback);\n  }\n\n  public changeVolume(volume: number): void {\n    this.audioEngine.volume(volume);\n  }\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n    }, null, '  ')\n  };\n}\n\nexport default AudioManager;\n","import { ITypes, IEntity, IdGeneratorFunc, ISystem, IComponent, IComponentEvents, AnonymousCB, EntityIdType } from \"./types\";\n\nexport const pp = (obj: object | null | undefined) => JSON.stringify(obj, null, '  ')\n\nexport type Setter<T> = (system: ISystem, entity: IEntity, state: T) => null | undefined;\n\nexport type Selector<T> = (system: ISystem, entity: IEntity) => null | IComponent<T>\n\nexport function createSelector<T>(path: string): Selector<T> {\n  return (system: ISystem, entity: IEntity): null | IComponent<T> => {\n    const searchResult = system\n      .components\n      .filter(o =>\n        isSameEntity(o, entity)\n        && hasState(path, o.state));\n\n    if (searchResult.length === 0) {\n      return null;\n    };\n\n    return first(searchResult);\n  }\n}\n\nexport function createSetter<T>(selector: Selector<T>): Setter<T> {\n  return (system: ISystem, entity: IEntity, state: T) => {\n    const component = selector(system, entity);\n\n    if (component === null) {\n      return component;\n    }\n\n    component.state = state;\n  }\n}\n\nexport function hasState(path: string, state: any) {\n  return state[path] !== undefined;\n}\n\nexport function factory<T extends ITypes>(config: T): T {\n  return config;\n}\n\nexport function mkEntity(id: EntityIdType): IEntity {\n  return { id };\n}\n\nexport function isSameEntity(a: IEntity, b: IEntity) {\n  return a.id === b.id;\n}\n\nexport function values(obj: any) {\n  return Object.keys(obj).map(key => obj[key]);\n}\n\nexport function first<T>(array: T[]): T {\n  return array[0];\n}\n\nexport const defaultIdGenerator = (genesis: number = 0): IdGeneratorFunc => {\n  let epoch: number = genesis;\n  return () => ({ next: () => epoch++ })\n}\n\nexport const defaultComponentEvents = (): IComponentEvents => ({\n  onUpdate: (component: IComponent, entity: IEntity) => null,\n  onChange: (eventName: string, component: IComponent, entity: IEntity) => null,\n})\n\nexport function partialSetValue(object: any) {\n  return (path: (string | number)[], value: any) => setValue(object, path, value);\n}\n\nexport function setValue(object: any, path: (string | number)[], value: any) {\n  let a = path;\n  let o = object;\n\n  for (let i = 0; i < a.length - 1; i++) {\n      let n = a[i];\n      if (n in o) {\n          o = o[n];\n      } else {\n          o[n] = {};\n          o = o[n];\n      }\n  }\n\n  o[a[a.length - 1]] = value;\n}\n\nexport function getValue<T extends any>(object: T, path: string) {\n  let o = object;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  let a = path.split('.');\n\n  while (a.length) {\n      let n = a.shift() as string;\n\n      if (n in o) {\n          o = o[n];\n      } else {\n          return;\n      }\n  }\n\n  return o;\n}\n\nexport function keys<O>(o: O) {\n  return Object.keys(o) as (keyof O)[];\n}\n\nexport function once(fn: AnonymousCB) {\n  let called = false;\n  return (...args: any[]) => {\n    if (!called) {\n      called = true;\n      return fn(...args);\n    }\n    return undefined;\n  }\n}\n\nexport const clamp = (min: number, max: number, num: number) => {\n  return num < min ? min : num > max ? max : num;\n}\n\nexport const ifStateProp = (obj: any) => {\n  return obj && obj.state !== undefined;\n}\nexport function boxMullerRandomGeneratorFactory() {\n  let phase:      number = 0;\n  let random:     () => number;\n  let x1:         number;\n  let x2:         number;\n  let w:          number;\n  let z:          number;\n\n  random = Math.random;\n\n  return function () {\n      if (!phase) {\n          do {\n              x1 = 2.0 * random() - 1.0;\n              x2 = 2.0 * random() - 1.0;\n              w = x1 * x1 + x2 * x2;\n          } while (w >= 1.0);\n\n          w = Math.sqrt((-2.0 * Math.log(w)) / w);\n          z = x1 * w;\n      } else {\n          z = x2 * w;\n      }\n\n      phase ^= 1;\n\n      return z;\n  }\n};\n\n/**\n * limits your function to be called at most every W milliseconds, where W is wait.\n * Calls over W get dropped.\n * Thanks to Pat Migliaccio.\n * see https://medium.com/@pat_migliaccio/rate-limiting-throttling-consecutive-function-calls-with-queues-4c9de7106acc\n * @param fn\n * @param wait\n * @example let throttledFunc = throttle(myFunc,500);\n */\nexport function throttle<T>(fn: Function, wait: number){\n  let isCalled = false;\n  let last: T;\n  return function(...args: any[]): T {\n    if (!isCalled){\n      last = fn(...args);\n      isCalled = true;\n      setTimeout(function(){\n        isCalled = false;\n      }, wait)\n    }\n    return last;\n  };\n}\n\nexport const defaultBoundary = {\n  top:    0,\n  left:   0,\n  bottom: 600,\n  right:  800,\n}\n\nexport enum KeysEnum {\n  Backspace = 8,\n  Tab = 9,\n  Enter = 13,\n  Shift = 16,\n  Ctrl = 17,\n  Alt = 18,\n  PauseBreak = 19,\n  CapsLock = 20,\n  Escape = 27,\n  Space = 32,\n  PageUp = 33,\n  PageDown = 34,\n  End = 35,\n  Home = 36,\n\n  LeftArrow = 37,\n  UpArrow = 38,\n  RightArrow = 39,\n  DownArrow = 40,\n\n  Insert = 45,\n  Delete = 46,\n\n  Zero = 48,\n  ClosedParen = Zero,\n  One = 49,\n  ExclamationMark = One,\n  Two = 50,\n  AtSign = Two,\n  Three = 51,\n  PoundSign = Three,\n  Hash = PoundSign,\n  Four = 52,\n  DollarSign = Four,\n  Five = 53,\n  PercentSign = Five,\n  Six = 54,\n  Caret = Six,\n  Hat = Caret,\n  Seven = 55,\n  Ampersand = Seven,\n  Eight = 56,\n  Star = Eight,\n  Asterik = Star,\n  Nine = 57,\n  OpenParen = Nine,\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  LeftWindowKey = 91,\n  RightWindowKey = 92,\n  SelectKey = 93,\n\n  Numpad0 = 96,\n  Numpad1 = 97,\n  Numpad2 = 98,\n  Numpad3 = 99,\n  Numpad4 = 100,\n  Numpad5 = 101,\n  Numpad6 = 102,\n  Numpad7 = 103,\n  Numpad8 = 104,\n  Numpad9 = 105,\n\n  Multiply = 106,\n  Add = 107,\n  Subtract = 109,\n  DecimalPoint = 110,\n  Divide = 111,\n\n  F1 = 112,\n  F2 = 113,\n  F3 = 114,\n  F4 = 115,\n  F5 = 116,\n  F6 = 117,\n  F7 = 118,\n  F8 = 119,\n  F9 = 120,\n  F10 = 121,\n  F11 = 122,\n  F12 = 123,\n\n  NumLock = 144,\n  ScrollLock = 145,\n\n  SemiColon = 186,\n  Equals = 187,\n  Comma = 188,\n  Dash = 189,\n  Period = 190,\n  UnderScore = Dash,\n  PlusSign = Equals,\n  ForwardSlash = 191,\n  Tilde = 192,\n  GraveAccent = Tilde,\n\n  OpenBracket = 219,\n  ClosedBracket = 221,\n  Quote = 222\n}\n","import { IComponent, IdGeneratorFunc, EntityIdType, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\nconst configDefaults = {\n  name: 'componentManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass ComponentManager {\n  public config:             IBasicConfig;\n\n  public components:         IComponent[];\n  private idGenerator:       IdGeneratorFunc;\n\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.components  = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerComponent = <T>(component: IComponent<T>) => {\n    component.id = (component.id === -1)\n      ? this.idGenerator().next()\n      : component.id;\n\n    const model = factory<IComponent>(component);\n    this.components[component.id] = model;\n    return model;\n  };\n\n  public unRegisterComponent = (componentId: EntityIdType) => {\n    delete this.components[componentId];\n  };\n\n  public get = <T>(component: IComponent<T> | number) => {\n    const path = typeof component === 'number' ? component : component && component.id;\n    return this.components[path];\n  };\n\n  public get getState(): IComponent[] {\n    return this.components;\n  };\n\n  public getSerializableState = () => {\n    const { config, components } = this;\n    return {\n      config,\n      components,\n    };\n  };\n\n  public loadHydratedState = (state: any) => {\n    this.config     = state.config;\n    this.components = state.components;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      config:     this.config,\n      components: this.components,\n    }, null, '  ')\n  };\n\n  static isSameComponent(a: IComponent, b: IComponent) {\n    return a.id === b.id;\n  }\n}\n\nexport default ComponentManager;\n","import { EntityIdType, IEntity, IdGeneratorFunc, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\ninterface IEntityManagerSerializableState {\n  config:   IBasicConfig,\n  entities: IEntity[],\n}\n\nconst configDefaults = {\n  name: 'EntityManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EntityManager {\n  public config:              IBasicConfig;\n  public entities:            IEntity[];\n  private idGenerator:        IdGeneratorFunc;\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.entities    = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerEntity = (): IEntity => {\n    const entityId = this.idGenerator().next()\n    const model    = factory<IEntity>({ id: entityId });\n    this.entities[entityId] = model;\n    return model;\n  };\n\n  public unRegisterEntity = (entityId: EntityIdType): void => {\n    delete this.entities[entityId];\n  };\n\n  public get = (entity: IEntity | number) => {\n    const path = typeof entity === 'number' ? entity : entity.id;\n    return this.entities[path];\n  };\n\n  public get getState(): IEntity[] {\n    return this.entities;\n  };\n\n  public getSerializableState = (): IEntityManagerSerializableState => {\n    const { config, entities } = this;\n    return {\n      config,\n      entities,\n    };\n  };\n\n  public loadHydratedState = (state: IEntityManagerSerializableState): void => {\n    this.config  = state.config;\n    this.entities = state.entities;\n  };\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n      entities: this.entities,\n    }, null, '  ')\n  };\n\n  static isSameEntity(a: IEntity, b: IEntity): boolean {\n    return a.id === b.id;\n  }\n}\n\nexport default EntityManager;\n","import { IBasicConfig, IComponent, AnonymousCB, IEntity } from \"../types\";\nimport { IEventManager } from \"../interfaces/IEventManager\";\nimport {EventEmitter2} from 'eventemitter2';\n\nconst configDefaults = {\n  name: 'EventManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EventManager implements IEventManager {\n  public config:        IBasicConfig;\n  public emitter:       EventEmitter2;\n\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.emitter     = new EventEmitter2({\n      delimiter:     ':',\n      wildcard:      true,\n      maxListeners:  200,\n    });\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerListener = (name: string, callback: AnonymousCB) => {\n    this.emitter.addListener(name, callback)\n  };\n\n  public unRegisterListener = (name: string, callback: AnonymousCB): void => {\n    this.emitter.removeListener(name, callback);\n  };\n\n  public emit = <T>(eventName: string, data?: T) => {\n    this.emitter.emit(eventName, data);\n  };\n\n  public onUpdate = (component: IComponent, entity: IEntity) => {\n    this.emitter.emit('updateComponent', component, entity);\n  };\n\n  public onChange = (eventName: string, component: IComponent, entity: IEntity): void => {\n    this.emitter.emit(eventName, component, entity);\n  };\n}\n\nexport default EventManager;\n","\nexport function Vector2(x, y)\n{\n\tthis.x = (x !== undefined) ? x : 0;\n\tthis.y = (y !== undefined) ? y : 0;\n}\n\nVector2.prototype.set = function(x, y)\n{\n\tthis.x = x;\n\tthis.y = y;\n}\n","\nexport function Key()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n\n//Action List\nKey.DOWN = -1;\nKey.UP = 1;\nKey.RESET = 0;\n\n//Update key status based new state\nKey.prototype.update = function(action)\n{\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n\n\tif(action === Key.DOWN)\n\t{\n\t\tif(!this.pressed)\n\t\t{\n\t\t\tthis.justPressed = true;\n\t\t}\n\t\tthis.pressed = true;\n\t}\n\telse if(action === Key.UP)\n\t{\n\t\tif(this.pressed)\n\t\t{\n\t\t\tthis.justReleased = true;\n\t\t}\n\t\tthis.pressed = false;\n\t}\n\telse if(action === Key.RESET)\n\t{\n\t\tthis.justReleased = false;\n\t\tthis.justPressed = false;\n\t}\n}\n\n//Set key status\nKey.prototype.set = function(justPressed, pressed, justReleased)\n{\n\tthis.pressed = pressed;\n\tthis.justPressed = justPressed;\n\tthis.justReleased = justReleased;\n}\n\n//Reset key to default values\nKey.prototype.reset = function()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n","import {Vector2} from './Vector2';\nimport {Key} from './Key';\n\nexport function Mouse()\n{\n\t//Raw data\n\tthis._keys = [];\n\tthis._position = new Vector2(0, 0);\n\tthis._positionUpdated = false;\n\tthis._delta = new Vector2(0, 0);\n\tthis._wheel = 0;\n\tthis._wheelUpdated = false;\n\tthis._doubleClicked = false;\n\n\t//Position, delta, and scroll speed\n\tthis.keys = [];\n\tthis.position = new Vector2(0,0);\n\tthis.delta = new Vector2(0,0);\n\tthis.wheel = 0;\n\tthis.doubleClicked = false;\n\n\t//Canvas (use to calculate coordinates relative to it)\n\tthis.canvas = null;\n\t\n\t//Events\n\tthis.events = [];\n\n\t//Initialize key instances\n\tfor(let i = 0; i < 3; i++)\n\t{\n\t\tthis._keys.push(new Key());\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Self pointer\n\tlet self = this;\n\n\t//Scroll wheel\n\tif(window.onmousewheel !== undefined)\n\t{\n\t\t//Chrome, edge\n\t\tthis.events.push([window, \"mousewheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse if(window.addEventListener !== undefined)\n\t{\n\t\t//Firefox\n\t\tthis.events.push([window, \"DOMMouseScroll\", function(event)\n\t\t{\n\t\t\tself._wheel = event.detail * 30;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse\n\t{\n\t\tthis.events.push([window, \"wheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\n\t//Touchscreen input\n\tif(\"ontouchstart\" in window || navigator.msMaxTouchPoints > 0)\n\t{\n\t\t//Auxiliar variables to calculate touch delta\n\t\tvar lastTouch = new Vector2(0, 0);\n\n\t\t//Touch screen pressed event\n\t\tthis.events.push([window, \"touchstart\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t\tself.updateKey(Mouse.LEFT, Key.DOWN);\n\t\t}]);\n\n\t\t//Touch screen released event\n\t\tthis.events.push([window, \"touchend\", function(event)\n\t\t{\n\t\t\tself.updateKey(Mouse.LEFT, Key.UP);\n\t\t}]);\n\n\t\t//Touch screen move event\n\t\tthis.events.push([window, \"touchmove\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(touch.clientX - rect.left, touch.clientY - rect.top, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(touch.clientX, touch.clientY, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t}]);\n\t}\n\t//Input\n\telse\n\t{\n\t\t//Move event\n\t\tthis.events.push([window, \"mousemove\", function(event)\n\t\t{\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(event.clientX - rect.left, event.clientY - rect.top, event.movementX, event.movementY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(event.clientX, event.clientY, event.movementX, event.movementY);\n\t\t\t}\n\t\t}]);\n\n\t\t//Button pressed event\n\t\tthis.events.push([window, \"mousedown\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.DOWN);\n\t\t}]);\n\n\t\t//Button released event\n\t\tthis.events.push([window, \"mouseup\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.UP);\n\t\t}]);\n\t}\n\n\t//Mouse double click\n\tthis.events.push([window, \"dblclick\", function(event)\n\t{\n\t\tself._doubleClicked = true;\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Mouse Buttons\nMouse.LEFT = 0;\nMouse.MIDDLE = 1;\nMouse.RIGHT = 2;\n\n//Canvas to be used for relative coordinates calculation\nMouse.prototype.setCanvas = function(canvas)\n{\n\tthis.canvas = canvas;\n\n\tcanvas.mouseInside = false;\n\n\tcanvas.addEventListener(\"mouseenter\", function()\n\t{\n\t\tthis.mouseInside = true;\n\t});\n\n\tcanvas.addEventListener(\"mouseleave\", function()\n\t{\n\t\tthis.mouseInside = false;\n\t});\n}\n\n//Check if mouse is inside attached canvas\nMouse.prototype.insideCanvas = function()\n{\n\tif(this.canvas === null)\n\t{\n\t\treturn false;\n\t}\n\t\n\treturn this.canvas.mouseInside;\n}\n\n//Set if mouse locked\nMouse.prototype.setLock = function(value)\n{\n\tif(this.canvas !== null)\n\t{\n\t\tif(value)\n\t\t{\n\t\t\tif(this.canvas.requestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.requestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.mozRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.mozRequestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.webkitRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.webkitRequestPointerLock();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(document.exitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.exitPointerLock();\n\t\t\t}\n\t\t\telse if(document.mozExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.mozExitPointerLock();\n\t\t\t}\n\t\t\telse if(document.webkitExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.webkitExitPointerLock();\n\t\t\t}\n\t\t}\n\t}\n}\n\n//Check if mouse button is pressed\nMouse.prototype.buttonPressed = function(button)\n{\n\treturn this.keys[button].pressed;\n}\n\n//Check if Mouse button was double clicked\nMouse.prototype.buttonDoubleClicked = function()\n{\n\treturn this.doubleClicked;\n}\n\n//Check if a mouse button was just pressed\nMouse.prototype.buttonJustPressed = function(button)\n{\n\treturn this.keys[button].justPressed;\n}\n\n//Check if a mouse button was just released\nMouse.prototype.buttonJustReleased = function(button)\n{\n\treturn this.keys[button].justReleased;\n}\n\n//Update mouse Position\nMouse.prototype.updatePosition = function(x, y, xDiff, yDiff)\n{\n\tthis._position.set(x, y);\n\tthis._delta.x += xDiff;\n\tthis._delta.y += yDiff;\n\tthis._positionUpdated = true;\n}\n\n//Update mouse Key\nMouse.prototype.updateKey = function(button, action)\n{\n\tif(button > -1)\n\t{\n\t\tthis._keys[button].update(action);\n\t}\n}\n\n//Update mouse State (Calculate position diff)\nMouse.prototype.update = function()\n{\n\t//Update mouse keys state\n\tfor(let i = 0; i < this._keys.length; i++)\n\t{\n\t\tif(this._keys[i].justPressed && this.keys[i].justPressed)\n\t\t{\n\t\t\tthis._keys[i].justPressed = false;\n\t\t}\n\t\tif(this._keys[i].justReleased && this.keys[i].justReleased)\n\t\t{\n\t\t\tthis._keys[i].justReleased = false;\n\t\t}\n\t\tthis.keys[i].set(this._keys[i].justPressed, this._keys[i].pressed, this._keys[i].justReleased);\n\t}\n\n\t//Update mouse wheel\n\tif(this._wheelUpdated)\n\t{\n\t\tthis.wheel = this._wheel;\n\t\tthis._wheelUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.wheel = 0;\n\t}\n\n\t//Update mouse double click\n\tif(this._doubleClicked)\n\t{\n\t\tthis.doubleClicked = true;\n\t\tthis._doubleClicked = false;\n\t}\n\telse\n\t{\n\t\tthis.doubleClicked = false;\n\t}\n\n\t//Update mouse Position if needed\n\tif(this._positionUpdated)\n\t{\n\t\tthis.delta.x = this._delta.x;\n\t\tthis.delta.y = this._delta.y;\n\t\tthis._delta.set(0,0);\n\n\t\tthis.position.x = this._position.x;\n\t\tthis.position.y = this._position.y;\n\n\t\tthis._positionUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.delta.x = 0;\n\t\tthis.delta.y = 0;\n\t}\n}\n\n//Dispose mouse object\nMouse.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n","import {Key} from './Key';\n\n\nexport function Keyboard() {\n\tthis.keys = [];\n\tthis.actions = [];\n\n\t//Initialize Keys\n\tfor(let i = 0; i < 256; i++)\n\t{\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Events\n\tthis.events = [];\n\n\t//Actions pointer\n\tconst actions = this.actions;\n\n\t//Key down\n\tthis.events.push([window, \"keydown\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.DOWN);\n\t}]);\n\n\t//Key up\n\tthis.events.push([window, \"keyup\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.UP);\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Update key flags syncronously\nKeyboard.prototype.update = function()\n{\n\tlet end = 0;\n\n\twhile(this.actions.length > end)\n\t{\n\t\tlet key = this.actions.shift();\n\t\tlet action = this.actions.shift();\n\n\t\tthis.keys[key].update(action);\n\n\t\tif(this.keys[key].justReleased || this.keys[key].justPressed)\n\t\t{\n\t\t\tthis.actions.push(key);\n\t\t\tthis.actions.push(Key.RESET);\n\t\t\tend += 2;\n\t\t}\n\t}\n}\n\n//Reset keyboard status\nKeyboard.prototype.reset = function()\n{\n\t//Clear actions array\n\tthis.actions = [];\n\n\t//Reset all keys\n\tfor(let i = 0; i < this.keys.length; i++)\n\t{\n\t\tthis.keys[i].reset();\n\t}\n}\n\n//Check if a key is pressed\nKeyboard.prototype.keyPressed = function(key)\n{\n\treturn this.keys[key].pressed;\n}\n\n//Check is a key as just pressed\nKeyboard.prototype.keyJustPressed = function(key)\n{\n\treturn this.keys[key].justPressed;\n}\n\n//Check if a key was just released\nKeyboard.prototype.keyJustReleased = function(key)\n{\n\treturn this.keys[key].justReleased;\n}\n\n//Dispose keyboard events\nKeyboard.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tlet event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n\n//Key codes\nKeyboard.TAB = 9;\nKeyboard.ENTER = 13;\nKeyboard.SHIFT = 16;\nKeyboard.CTRL = 17;\nKeyboard.ALT = 18;\nKeyboard.CAPS_LOCK = 20;\nKeyboard.ESC = 27;\nKeyboard.SPACEBAR = 32;\nKeyboard.PAGE_UP = 33;\nKeyboard.PAGE_DOWN = 34;\nKeyboard.END = 35;\nKeyboard.HOME = 36;\nKeyboard.INSERT = 45;\nKeyboard.DEL = 46;\n\nKeyboard.LEFT = 37;\nKeyboard.RIGHT = 39;\nKeyboard.UP = 38;\nKeyboard.DOWN = 40;\n\nKeyboard.NUM0 = 48;\nKeyboard.NUM1 = 49;\nKeyboard.NUM2 = 50;\nKeyboard.NUM3 = 51;\nKeyboard.NUM4 = 52;\nKeyboard.NUM5 = 53;\nKeyboard.NUM6 = 54;\nKeyboard.NUM7 = 55;\nKeyboard.NUM8 = 56;\nKeyboard.NUM9 = 57;\n\nKeyboard.A = 65;\nKeyboard.B = 66;\nKeyboard.C = 67;\nKeyboard.D = 68;\nKeyboard.E = 69;\nKeyboard.F = 70;\nKeyboard.G = 71;\nKeyboard.H = 72;\nKeyboard.I = 73;\nKeyboard.J = 74;\nKeyboard.K = 75;\nKeyboard.L = 76;\nKeyboard.M = 77;\nKeyboard.N = 78;\nKeyboard.O = 79;\nKeyboard.P = 80;\nKeyboard.Q = 81;\nKeyboard.R = 82;\nKeyboard.S = 83;\nKeyboard.T = 84;\nKeyboard.U = 85;\nKeyboard.V = 86;\nKeyboard.W = 87;\nKeyboard.X = 88;\nKeyboard.Y = 89;\nKeyboard.Z = 90;\n\nKeyboard.F1 = 112;\nKeyboard.F2 = 113;\nKeyboard.F3 = 114;\nKeyboard.F4 = 115;\nKeyboard.F5 = 116;\nKeyboard.F6 = 117;\nKeyboard.F7 = 118;\nKeyboard.F8 = 119;\nKeyboard.F9 = 120;\nKeyboard.F10 = 121;\nKeyboard.F11 = 122;\nKeyboard.F12 = 123;","import { IMouse, IKeyboard} from '../types';\nimport { IInputManager } from \"../interfaces/IInputManager\";\nimport { Mouse } from \"../../extern/Mouse\";\nimport { Keyboard } from \"../../extern/Keyboard\";\n\nclass InputManager implements IInputManager {\n  public KeyCodes: Keyboard = Keyboard;\n  constructor(\n    private mouse: IMouse = new Mouse(),\n    private keyboard: IKeyboard = new Keyboard(),\n  ) {}\n\n  public buttonPressed = (button: number) => this.mouse.buttonPressed(button);\n\n  public keyPressed = (key: number) => this.keyboard.keyPressed(key);\n  public keyJustPressed = (key: number) => this.keyboard.keyJustPressed(key);\n  public keyJustReleased = (key: number) => this.keyboard.keyJustReleased(key);\n\n  update = () => {\n    this.mouse.update();\n    this.keyboard.update();\n  };\n}\n\nexport default InputManager;\n","import { ISerializableState, IComponent, IComponentFactoryInitializer, IComponentFactory } from \"../types\";\nimport { IStorageManager } from \"../interfaces/IStorageManager\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { defaultComponentEvents } from \"../utils\";\n\nclass StorageManager implements IStorageManager {\n  constructor(\n    private system: ISystemManager,\n  ) {}\n\n  public saveGame = () => {\n    this.saveState('ecs', this.system.getSerializableState());\n  }\n\n  public loadGame = () => {\n    const loadedFromStorage = this.loadStateFromKey('ecs');\n\n    if (loadedFromStorage) {\n      const hydratedComponents = this.hydrateLoadedComponents(this.system, loadedFromStorage);\n      loadedFromStorage.system.components = hydratedComponents;\n\n      this.system.loadHydratedState(loadedFromStorage);\n    }\n  }\n\n  private saveState<T extends ISerializableState>(key: string, value: T): void {\n    const serialized = JSON.stringify(value);\n    window.localStorage.setItem(key, serialized);\n  }\n\n  private loadStateFromKey(key: string): ISerializableState | null {\n    const serialized = window.localStorage.getItem(key);\n\n    if (!serialized) {\n      return null;\n    }\n\n    return JSON.parse(serialized) as ISerializableState;\n  }\n\n  private hydrateLoadedComponents(system: ISystemManager, state: ISerializableState): IComponent[] {\n    const { system: { components } } = state;\n\n    const componentInitializerCache: { [key: string]: IComponentFactoryInitializer } = {};\n\n    return components.map((component: IComponent) => {\n      const cached = componentInitializerCache[component.name];\n\n      let componentInitializer: IComponentFactoryInitializer;\n\n      if (cached) {\n        componentInitializer = cached;\n      } else {\n        componentInitializer = this.system.getComponentFactory(component.name)(system);\n        componentInitializerCache[component.name] = componentInitializer;\n      }\n\n      const entity = { id: component.entityId }\n      return componentInitializer(entity, component.state, defaultComponentEvents(), component.id); // !!! HACK FIX ME TODO ACHTUNG\n    });\n  }\n}\n\nexport default StorageManager;\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithControls = { direction: IVector; moving: boolean; speed: IVector; };\n\nexport function controllableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n        },\n        update: (system: ISystemManager, component: IControllableEntity) => {\n          handleVerticalMovement(entity, component, system);\n          handleHorizontalMovement(entity, component, system);\n          \n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IControllableEntity = IComponent<WithControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleVerticalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system, 'vertical');\n}\n\nfunction handleHorizontalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system);\n}\n\nfunction handleMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'attack';\n\nexport type WithAttack = { attacking: boolean; attackPower: number; };\n\nexport function combatableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithAttack, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAttack>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { attacking: state.attacking, attackPower: state.attackPower },\n        update: (system: ISystemManager, component: IAttackableEntity) => {\n            handleAttack(component, system);\n        },\n      }))\n  }\n}\n\ntype IAttackableEntity = IComponent<WithAttack>\n\nfunction handleAttack(component: IAttackableEntity, system: ISystemManager) {\n  if (system.input.keyPressed(system.input.KeyCodes.SPACEBAR)) {\n    component.state.attacking = true;\n  } else {\n    component.state.attacking = false;\n  }\n}\n\nexport const selectCombatableState = createSelector<IAttackableEntity>(COMPONENT_NAMESPACE);\nexport const setCombatableState    = createSetter<IAttackableEntity>(selectCombatableState);\n","export const ON_START_GAME      = 'game:start';\nexport const ON_GAME_WIN        = 'game:win';\nexport const ON_GAME_OVER       = 'game:lose';\n\nexport const ON_LEVEL_LOAD      = 'level:load';\nexport const ON_LEVEL_BEGIN     = 'level:begin';\nexport const ON_LEVEL_COMPLETE  = 'level:finished';\n\nexport const ON_ATTACK          = 'attack:*';\nexport const ON_PLAYER_ATTACK   = 'attack:player';\nexport const ON_ENEMY_ATTACK    = 'attack:enemy';\n\nexport const ON_COLLISION       = 'collision:begin';\n\nexport const ON_REVIVE          = 'revive:*';\nexport const ON_REVIVE_PLAYER   = 'revive:player';\n\nexport const ON_DEATH           = 'dead:*';\nexport const ON_ENEMY_DEATH     = 'dead:enemy';\nexport const ON_PLAYER_DEATH    = 'dead:player';\n\nexport const ON_ENEMY_FREE      = 'enemy:free';\nexport const ON_ENEMY_GROUP     = 'enemy:group';\nexport const ON_ENEMY_PATH      = 'enemy:path';\n\nexport const ON_START_ENGINE    = 'engine:start';\nexport const ON_STOP_ENGINE     = 'engine:stop';\n\n// !!! Move to the catalogue I think\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { ON_ENEMY_DEATH } from \"../../events\";\n\nconst COMPONENT_NAMESPACE = 'health';\n\nexport interface WithHealth {\n  health: {\n    value: number;\n    immortal?: boolean;\n  };\n};\n\nexport type WithHealthState = WithHealth & { isDead?: boolean; };\n\nexport function killableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithHealthState, events: IComponentEvents, id: number = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithHealthState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { health: state.health, isDead: state.isDead },\n        update: (system: ISystemManager, component: IComponent<WithHealthState>) => {\n\n          if (component.state.health.immortal) {\n            return;\n          }\n\n          const wasDeadBefore = component.state.isDead;\n          const isDeadNow = !(component.state.health.value > 0);\n\n          component.state.isDead = isDeadNow;\n\n          if (!wasDeadBefore && isDeadNow) {\n            // sad times\n            events.onChange!(ON_ENEMY_DEATH, component, entity)\n          }\n        },\n      }))\n  }\n}\n\nexport type IKillableEntity = IComponent<WithHealthState>\n\nexport const selectKillableState = createSelector<WithHealthState>(COMPONENT_NAMESPACE);\nexport const setKillableState    = createSetter<WithHealthState>(selectKillableState);\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; controllable?: boolean; }\nexport type WithCenter = { center: IVector; }\nexport type WithPositionState = WithPosition & WithCenter;\n\nexport function withPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPositionState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: { ...state.position }, center: { ...state.position }, controllable: state.controllable || true },\n        update: (system: ISystemManager, component: IComponent<WithPositionState>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n\nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPositionState>, events: IComponentEvents) {\n\n  if (!component.state.controllable) {\n    return;\n  }\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  // ai yai yai, wtf is this doing here\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n  // !! ??? ^^^^^^^^\n\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n\n  if (ifStateProp(boundaryComponent) && ifStateProp(boundaryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n\n    const clampedX = clamp(boundary.left, boundary.right - width,   component.state.position.x)\n    const clampedY = clamp(boundary.top,  boundary.bottom - height, component.state.position.y)\n\n    component.state.position.x = clampedX;\n    component.state.position.y = clampedY;\n\n    component.state.center.x = component.state.position.x - width / 2;\n    component.state.center.y = component.state.position.y - height / 2;\n\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory } from \"../utils\";\n\nexport type WithName = { name: string };\n\nexport function nameableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithName, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithName>>({\n        id,\n        name: 'name',\n        entityId: entity.id,\n        state: { name: state.name },\n        update: () => null,\n      }))\n  }\n}\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'collidable';\n\nexport type IsCollidable = { collidable?: boolean; collisionGroup: string; };\n\nexport function isCollidableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: IsCollidable, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsCollidable>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collidable: state.collidable || true, collisionGroup: state.collisionGroup },\n        update: (system: ISystemManager, component: ICollidableEntity) => null,\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<IsCollidable & WithGeometry & WithPosition>;\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n","import { IComponent, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\nimport { ON_COLLISION } from \"../../events\";\nimport { IsCollidable } from \"./isCollidable\";\n\nconst COMPONENT_NAMESPACE = 'collisions';\n\nexport type WithCollisionArgs = Partial<WithCollisions>;\nexport type WithCollisions = { collisions: EntityIdType[]; collisionGroup: string; };\n\nexport function withCollisionsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithCollisionArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithCollisionArgs>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collisions: state.collisions || [], collisionGroup: state.collisionGroup },\n        update: (system: ISystemManager, component: ICollidableEntity) => {\n          handleCollisions(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<WithCollisions & WithGeometry & WithPosition>\n\nfunction handleCollisions(entity: IEntity, component: ICollidableEntity, system: ISystemManager, events: IComponentEvents) {\n  const position = system.getEntityModel<WithGeometry & WithPosition>({ id: component.entityId });\n\n  const collidableEntities = system\n    .getEntitiesByComponentTypes(['geometry', 'position', 'collidable'])\n    .filter(id => id !== component.entityId)\n    .map(id => system.getEntityModel<IsCollidable & WithGeometry & WithPosition>({ id }))\n    .filter(model => model.collisionGroup !== component.state.collisionGroup);\n\n  const ownBounds = getBounds(position.position, position.geometry);\n\n  const collisions: EntityIdType[] = [];\n\n  collidableEntities.forEach(o => {\n    const otherBounds = getBounds(o.position, o.geometry);\n    if (overlap(ownBounds, otherBounds) && otherBounds !== undefined) {\n      collisions.push(o.id);\n    }\n  });\n\n  const lastCollisions = component.state.collisions\n    ? component.state.collisions.map(o => o)\n    : [];\n\n  component.state.collisions = collisions;\n\n  if (new Set(lastCollisions) !== new Set(collisions) && collisions.length > 0) {\n    events.onChange(ON_COLLISION, component, entity);\n  }\n}\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n\nfunction getBounds(pos: IVector, dimensions: IDimensions) {\n  return {\n    left: pos.x - (dimensions.width / 2),\n    right: pos.x + (dimensions.width / 2),\n    top: pos.y,\n    bottom: pos.y + dimensions.height,\n  }\n}\n\nfunction overlap(a: Bounds, b: Bounds) {\n  // If one rectangle is on left side of other\n  if (a.left > b.right || b.left > a.right)\n    return false;\n\n  // If one rectangle is above other\n  if (a.bottom < b.top || b.bottom < a.top)\n    return false;\n\n  return true;\n}\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'geometry';\n\nexport type IGeometry  = { width: number; height: number; };\nexport type WithGeometry = { geometry: IGeometry };\n\nexport function withGeometryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithGeometry, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithGeometry>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { geometry: { width: state.geometry.width, height: state.geometry.height } },\n        update: (system: ISystemManager, component: IWithGeometryEntity) => null,\n      }))\n  }\n}\n\nexport type IWithGeometryEntity = IComponent<WithGeometry>\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithOffscreen } from \"./withOffscreen\";\n\nconst COMPONENT_NAMESPACE = 'momentum';\n\nexport type WithMomentum = { momentum: { direction: IVector; speed: number; vertical?: boolean; horizontal?: boolean; } };\n\nexport function withMomentumFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithMomentum, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithMomentum>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state: { momentum: {\n          direction:    state.momentum.direction,\n          speed:        state.momentum.speed,\n        } },\n        update: (system: ISystemManager, component: IWithMomentumEntity) => {\n          handleMovement(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithMomentumEntity = IComponent<WithMomentum & Partial<WithPosition>>\n\nfunction handleMovement(entity: IEntity, component: IWithMomentumEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {state: { offscreen }} = system.getEntityComponent<WithOffscreen>(entity, 'offscreen');\n\n  if (offscreen) {\n    return;\n  }\n\n  const { momentum: { direction, speed } } = component.state;\n\n  position.y += direction.y * speed;\n  position.x += direction.x * speed;\n}\n\nexport const selectMomentumState = createSelector<WithMomentum>(COMPONENT_NAMESPACE);\nexport const setMomentumState    = createSetter<WithMomentum>(selectMomentumState);\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\n\nexport type WithOffscreen = { offscreen?: boolean; };\n\nexport function withOffscreenFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithOffscreen & Partial<WithPosition>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithOffscreen>>({\n        id,\n        entityId: entity.id,\n        name: 'offscreen',\n        state: { offscreen: state.offscreen || false },\n        update: (system: ISystemManager, component: IWithOffscreenEntity) => {\n          handleOffscreenFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithOffscreenEntity = IComponent<WithOffscreen & WithPosition>\n\nfunction handleOffscreenFlag(entity: IEntity, component: IWithOffscreenEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {screenSize} = system.config;\n\n  if (position.x < 0 || position.y < 0) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  if (position.x > screenSize!.x || position.y > screenSize!.y) {\n    component.state.offscreen = true;\n    return;\n  } \n  \n  if (position.x > window.innerWidth || position.y > window.innerHeight) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  component.state.offscreen = false;\n};\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'loot';\n\nexport type IsLootable<T extends any = {}> = { loot?: T; };\n\nexport function lootableFactory<T>(system: ISystemManager) {\n  return (entity: IEntity, state: IsLootable<T>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsLootable<T>>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { loot: state.loot },\n        update: (system: ISystemManager, component: LootableEntity) => null,\n      }))\n  }\n}\n\nexport type LootableEntity<T extends any = {}> = IComponent<IsLootable<T> & WithGeometry & WithPosition>\n\nexport const selectLootableState = createSelector<LootableEntity>(COMPONENT_NAMESPACE);\nexport const setLootableState    = createSetter<LootableEntity>(selectLootableState);\n","import { IComponent, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents, BoundedTouchingState, BoundedTouchingStateKeys } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter, keys, defaultBoundary } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'boundary';\n\nexport type WithBoundary = { boundary: Bounds; };\n\nexport function withBoundaryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBoundary, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBoundary>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { boundary: state.boundary || defaultBoundary },\n        update: (system: ISystemManager, component: IBoundedEntity) => null,\n      }))\n  }\n}\n\ntype IBoundedEntity = IComponent<WithGeometry & WithPosition & WithBoundary>\n\nexport const selectBoundaryState = createSelector<IBoundedEntity>(COMPONENT_NAMESPACE);\nexport const setBoundaryState    = createSetter<IBoundedEntity>(selectBoundaryState);\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'texture';\n\nexport type WithTexture = { texture: string | number; };\n\nexport function withTextureFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithTexture, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithTexture>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state:    { texture: state.texture },\n        update:   (system: ISystemManager, component: IWithTextureEntity) => null,\n      }))\n  }\n}\n\nexport type IWithTextureEntity = IComponent<WithTexture>\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\n\nimport { factory, ifStateProp } from \"../utils\";\nimport { WithPosition } from \"./withPosition\";\n\ntype WiggleState = { counter: number; increment: number; };\n\nexport type WithBugWiggleArgs = { wiggling: boolean; wiggleState?: WiggleState; };\nexport type WithBugWiggle = { wiggling: boolean; wiggleState: WiggleState; };\n\nconst BRAKE       = 0.1;\nconst PULSE_WIDTH = 4;\n\nexport function withBugWiggleFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBugWiggleArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBugWiggle>>({\n        id,\n        entityId: entity.id,\n        name: 'wiggle',\n        state: {\n          wiggling: state.wiggling,\n\n          wiggleState: {\n            counter: 0,\n            increment: +1,\n          }\n        },\n        update: (system: ISystemManager, component: IWithBugWiggleEntity) => {\n          handleBugWiggle(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype IWithBugWiggleEntity = IComponent<WithBugWiggle & Partial<WithPosition>>;\n\nfunction handleBugWiggle(entity: IEntity, component: IWithBugWiggleEntity, system: ISystemManager, events: IComponentEvents) {\n\n  if (!component.state.wiggling) {\n    return;\n  }\n\n  let {counter, increment} = component.state.wiggleState;\n\n  if(counter == PULSE_WIDTH) {\n    component.state.wiggleState.increment = -1;\n  };\n\n  if(counter == -PULSE_WIDTH) {\n    component.state.wiggleState.increment = +1;\n  };\n\n  component.state.wiggleState.counter+= increment;\n\n  const positionComponent = system.getEntityComponent<WithPosition>(entity, 'position');\n\n  if (ifStateProp(positionComponent)) {\n    positionComponent.state.position.x += (counter * BRAKE);\n  }\n}\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\nimport { WithPositionState } from \"./withPosition\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\n\nconst COMPONENT_NAMESPACE = 'homePosition';\n\nexport type WithHomePosition = { homePosition: IVector; goHome?: boolean; isHome?: boolean; }\n\nexport function withHomePositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithHomePosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithHomePosition>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { homePosition: { ...state.homePosition }, goHome: state.goHome },\n        update: (system: ISystemManager, component: IComponent<WithHomePosition & WithPositionState>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      })\n    )\n  }\n}\n\nconst BOOGETY = 66;\nconst TIME_TO_GET_HOME = BOOGETY * 1.1; // htfu\n\nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithHomePosition & WithPositionState>, events: IComponentEvents) {\n\n  const moveable = system.getEntityComponent<WithPositionState>(entity, 'position');\n\n  if (!moveable || !moveable.state) {\n    return;\n  }\n\n  const { homePosition: { x, y } } = component.state;\n\n  const distX = (x - moveable.state.position.x);\n  const distY = (y - moveable.state.position.y);\n\n  if (component.state.goHome) {\n    moveable.state.position.x = (Math.abs(distX) < 1) ? x : moveable.state.position.x + (distX / TIME_TO_GET_HOME);\n    moveable.state.position.y = (Math.abs(distY) < 1) ? y : moveable.state.position.y + (distY / TIME_TO_GET_HOME);\n  }\n\n  if (distX === 0 && distY === 0) {\n    component.state.isHome = true;\n  } else {\n    component.state.isHome = false;\n  }\n};\n","import { IComponentFactories, IComponentFactoryKey } from \"../types\";\nimport { ageableFactory } from \"./ageable\";\nimport { controllableFactory } from \"./controllable\";\nimport { combatableFactory } from \"./combatable\";\nimport { killableFactory } from \"./killable\";\nimport { withPositionFactory } from \"./withPosition\";\nimport { nameableFactory } from \"./nameable\";\nimport { isCollidableFactory } from \"./isCollidable\";\nimport { withCollisionsFactory } from \"./withCollisions\";\nimport { withGeometryFactory } from \"./withGeometry\";\nimport { withMomentumFactory } from \"./withMomentum\";\nimport { withOffscreenFactory } from \"./withOffscreen\";\nimport { lootableFactory } from \"./lootable\";\nimport { withBoundaryFactory } from \"./withBoundary\";\nimport { withTextureFactory } from \"./withTexture\";\nimport { withBugWiggleFactory } from \"./withBugWiggle\";\nimport { withHomePositionFactory } from \"./withHomePosition\";\n\nexport const defaultComponentFactories: IComponentFactories = {\n  name:         nameableFactory,\n  health:       killableFactory,\n  position:     withPositionFactory,\n  age:          ageableFactory,\n  controls:     controllableFactory,\n  collisions:   withCollisionsFactory,\n  collidable:   isCollidableFactory,\n  attack:       combatableFactory,\n  momentum:     withMomentumFactory,\n  offscreen:    withOffscreenFactory,\n  geometry:     withGeometryFactory,\n  loot:         lootableFactory,\n  boundary:     withBoundaryFactory,\n  texture:      withTextureFactory,\n  wiggle:       withBugWiggleFactory,\n  homePosition: withHomePositionFactory,\n}\n\nexport function getComponentFactory<T extends IComponentFactoryKey>(name: T): IComponentFactories[T] {\n  return  defaultComponentFactories[name];\n}\n","import { IComponent, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory } from \"../utils\";\n\nexport type WithAge = { age: number };\n\nexport function ageableFactory(system: ISystemManager) {\n  let GAME_YEAR = 2 * 1000;\n  return (entity: IEntity, state: WithAge, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAge>>({\n        id,\n        name: 'age',\n        entityId: entity.id,\n        state: { age: state.age },\n        update: (system: ISystemManager, component: IAgeableEntity) => {\n            const {epoch} = system;\n            const remainder = epoch % GAME_YEAR;\n            if (remainder === 0 && epoch > 0) {\n              component.state.age++; \n            }\n        },\n      }))\n  }\n}\n\ntype IAgeableEntity = IComponent<WithAge>;\n","import { IComponent, ISystem, EntityIdType, IConfigDefaults, IEntity, WithId, IEntityComponents, ISerializableState, IObjectConfig, IComponentFactory, IComponentFactories, IComponentFactoryKey } from \"../types\";\nimport { IStorageManager } from \"../interfaces/IStorageManager\";\nimport { IInputManager } from \"../interfaces/IInputManager\";\nimport { IAudioManager } from \"../interfaces/IAudioManager\";\nimport { IEventManager } from \"../interfaces/IEventManager\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport AudioManager from \"./AudioManager\";\nimport ComponentManager from \"./ComponentManager\";\nimport EntityManager from \"./EntityManager\";\nimport EventManager from \"./EventManager\";\nimport InputManager from \"./InputManager\";\nimport StorageManager from \"./StorageManager\";\n\nimport { defaultComponentFactories } from \"../components\";\nimport { values, partialSetValue } from \"../utils\";\n\nconst configDefaults: IConfigDefaults = {\n  debug: false,\n  logging: true,\n}\n\nclass SystemManager implements ISystemManager {\n  public system:                ISystem;\n  public config:                IObjectConfig;\n  public input:                 IInputManager;\n  public storage:               IStorageManager;\n  public events:                IEventManager;\n  public audio:                 IAudioManager;\n  public epoch:                 number;\n\n  private entityComponents:     IEntityComponents;\n  private componentFactories:   IComponentFactories;\n  private entities:             EntityManager;\n  private components:           ComponentManager;\n\n  private entityModelCache:       { [key: string]: Array<IComponent> } = {};\n  private entityComponentCache:   { [key: string]: number[] } = {};\n  private entityComponentSetter:  (path: (string | number)[], value: any) => void;\n\n  constructor(\n    config:              IObjectConfig,\n    input?:              IInputManager,\n    epochs?:             number,\n  ) {\n    this.config               = { ...configDefaults, ...config };\n    this.input                = input ? input : new InputManager();\n    this.storage              = new StorageManager(this);\n    this.events               = new EventManager(config);\n    this.audio                = new AudioManager(config);\n    this.epoch                = epochs ? epochs : 0;\n\n    this.componentFactories   = defaultComponentFactories;\n\n    this.entities             = new EntityManager(config);\n    this.components           = new ComponentManager(config);\n    this.entityComponents     = {};\n\n    this.system = {\n      entities:   this.entities.entities,\n      components: this.components.components,\n    }\n\n    this.entityComponentSetter = partialSetValue(this.entityComponents);\n  }\n\n  public init = (config?: IObjectConfig) => null;\n\n  public registerEntity = () => {\n    return this.entities.registerEntity();\n  };\n\n  public registerComponents = (...components: IComponent[]) => {\n    return components.map(this.registerComponent)\n  }\n  public registerComponent = <T>(component: IComponent) => {\n    const registered = this.components\n      .registerComponent<T>(component)\n\n    this.entityComponentSetter(\n      [registered.entityId, registered.name],\n      registered.id,\n    )\n\n    return registered;\n  };\n\n  public getComponent = <T>(component: IComponent): IComponent<T> => {\n    return this.components.get(component);\n  };\n  public getComponentById = <T>(componentId: EntityIdType): IComponent<T> => {\n    return this.components.get(componentId);\n  };\n  public getComponentIdsForEntity = (entity: IEntity): Array<EntityIdType> => {\n    if(entity === undefined) {\n      return [];\n    }\n    return values(this.entityComponents[entity.id]);\n  };\n  public getComponentsForEntity = (entity: IEntity): Array<IComponent> => {\n    return this.getComponentIdsForEntity(entity)\n      .map(this.components.get);\n  };\n  public getComponentFactory = (name: IComponentFactoryKey): IComponentFactory => {\n    return this.componentFactories[name];\n  };\n  private getCachedComponentsForEntity = (entity: IEntity): Array<IComponent> => {\n\n    const cached = this.entityModelCache[entity.id];\n\n    if (cached) {\n      return cached;\n    }\n\n    const entityModels = this.getComponentsForEntity(entity);\n\n    this.entityModelCache[entity.id] = entityModels;\n\n    return entityModels;\n  }\n\n  public unRegisterEntity = (entityId: EntityIdType) => {\n    this.unRegisterComponentsForEntity(entityId);\n    this.deleteEntityComponents(entityId);\n    this.clearEntityComponentCache();\n    this.clearEntityModelCache();\n    this.entities.unRegisterEntity(entityId);\n  };\n  public unRegisterComponent = (entityId: EntityIdType) => {\n    this.components.unRegisterComponent(entityId);\n  };\n  private unRegisterComponentsForEntity = (entityId: EntityIdType) => {\n    const componentIds = this.getComponentIdsForEntity({ id: entityId });\n    componentIds.forEach(id => this.components.unRegisterComponent(id));\n  };\n\n  private deleteEntityComponents = (entityId: EntityIdType) => {\n    delete this.entityComponents[entityId];\n  };\n\n  private clearEntityComponentCache = () => {\n    delete this.entityComponentCache;\n    this.entityComponentCache = {};\n  };\n  private clearEntityModelCache = () => {\n    delete this.entityModelCache;\n    this.entityModelCache = {};\n  };\n\n  public getEntityComponent = <T>(entity: IEntity, componentName: string): IComponent<T> => {\n    return this.getComponentById<T>(this.entityComponents[entity.id][componentName]);\n  }\n  public getEntityModel = <T>(entity: IEntity): WithId<T> => {\n    return groupEntityComponents<T>(entity, this.system.components);\n  };\n  public getEntitiesByComponentTypes = (componentNames: IComponentFactoryKey[]): EntityIdType[] => {\n    const cacheKey = componentNames.join('-');\n\n    if (this.entityComponentCache[cacheKey] !== undefined) {\n      return this.entityComponentCache[cacheKey];\n    }\n\n    const isValidComponent = (component: IComponent) => componentNames.indexOf(component.name) !== -1;\n\n    const entities: EntityIdType[] = [];\n\n    for (let i = 0; i < this.system.entities.length; i++) {\n      const entity = this.system.entities[i];\n      const components = this.getComponentIdsForEntity(entity)\n        .map(this.getComponentById)\n        .filter(isValidComponent);\n\n      if (components.length === componentNames.length) {\n        entities.push(entity.id);\n      }\n    }\n\n    this.entityComponentCache[cacheKey] = entities;\n\n    return entities;\n  }\n\n  public step = () => {\n    this.input.update();\n    this.updateSystemEntities();\n    this.entityComponentCache = {};\n    this.epoch++;\n    return this.system;\n  };\n  private updateSystemEntities = (): void => {\n    this.system.entities.forEach(this.updateComponentsForEntity);\n  }\n  private updateComponentsForEntity = (entity: IEntity): void => {\n    const components = this.getCachedComponentsForEntity(entity);\n    for (let i = 0; i < components.length; i++) {\n      this.updateComponent(components[i])\n    }\n  }\n  private updateComponent = (o: IComponent) => o.update(this, o);\n\n  public getSerializableState = (): ISerializableState => {\n    const { system, config, epoch, entityComponents } = this;\n    return {\n      system,\n      config,\n      epoch,\n      entityComponents,\n    };\n  };\n  public loadHydratedState = (state: ISerializableState) => {\n    this.system = state.system;\n    this.config = state.config;\n    this.epoch  = state.epoch;\n    this.entityComponents = state.entityComponents;\n  };\n\n  public getState = (): ISystem => {\n    return this.system;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      system: this.system,\n      config: this.config,\n    }, null, '  ')\n  };\n}\n\nexport default SystemManager;\n\nfunction groupEntityComponents<T>(entity: IEntity, components: IComponent[]) {\n  return components\n    .filter(o => o && o.entityId === entity.id)\n    .reduce((acc, val) => {\n      return { ...acc, ...val.state };\n    }, { id: entity.id }) as WithId<T>;\n}\n","import { createSystem } from \"../engine/system\";\n\nconst system = createSystem({ name: 'Galaga' })\n\nexport { system };\n","import SystemManager from \"./services/SystemManager\";\n\ntype SystemArgs = {\n  name:     string;\n  version?: string;\n  logging?: boolean;\n  screenSize?: {\n    x: number\n    y: number\n  }\n}\n\nexport function createSystem({\n  name,\n  version = '1',\n  logging = true,\n  screenSize = {\n    x: 800,\n    y: 600,\n  },\n}: SystemArgs) {\n\n  const system = new SystemManager({\n    name,\n    version,\n    logging,\n    screenSize,\n  })\n\n  return system;\n}\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, boxMullerRandomGeneratorFactory, clamp, throttle } from \"../utils\";\n\nexport type WithRandomWalkArgs = { controls?: Partial<WithRandomWalk> };\nexport type WithRandomWalk = { direction: IVector; moving: boolean; speed: IVector; disabled: boolean; jitter: number; };\n\nconst defaults = { direction: { x: 0, y: 0 }, moving: true, speed: { x: 2, y: 1.65 }, disabled: false, jitter: 400 }\n\nexport function withRandomWalkFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithRandomWalkArgs, events: IComponentEvents, id = -1) => {\n\n    const options = state.controls || defaults;\n\n    let jitter: number = options.jitter || defaults.jitter;\n    let randomWalkGeneratorX: () => number;\n    let randomWalkGeneratorY: () => number;\n\n    const setJitter = (level?: number) => {\n      jitter = level || defaults.jitter;\n      randomWalkGeneratorX = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n      randomWalkGeneratorY = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n    }\n\n    setJitter(jitter);\n\n    return system.registerComponent(\n      factory<IComponent<WithRandomWalk>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: options.direction || { x: 0, y: 0 },\n          moving: options.moving || true,\n          speed: options.speed || { x: 2, y: 1.65 },\n          disabled: options.disabled || false,\n          jitter,\n        },\n        update: (system: ISystemManager, component: IWithRandomWalkEntity) => {\n\n          if (component.state.jitter !== jitter) {\n            setJitter(jitter);\n          }\n\n          if (!component.state.disabled) {\n            handleMovement(entity, component, system, events, randomWalkGeneratorX, randomWalkGeneratorY);\n          }\n        },\n      }))\n  }\n}\n\ntype IWithRandomWalkEntity = IComponent<WithRandomWalk & Partial<WithPosition>>;\ntype RNGFunc = (...args: any[]) => number;\n\nfunction handleMovement(entity: IEntity, component: IWithRandomWalkEntity, system: ISystemManager, events: IComponentEvents, randomWalkGeneratorX: RNGFunc, randomWalkGeneratorY: RNGFunc) {\n\n  if (component.state.disabled) {\n    return;\n  }\n\n  const deltaX = randomWalkGeneratorX();\n  const deltaY = randomWalkGeneratorY();\n\n  component.state.direction.x = clamp(-1, 1, deltaX);\n\n  component.state.direction.y = clamp(-1, 1, deltaY);\n\n  const {x, y} = component.state.direction;\n\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; }\n\nexport function withWrapAroundPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPosition>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: state.position },\n        update: (system: ISystemManager, component: IComponent<WithPosition>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n  \nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPosition>, events: IComponentEvents) {\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n\n  // wrap around if necessary\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n  \n  if (ifStateProp(boundaryComponent) && ifStateProp(geometryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n\n    const {x, y} = component.state.position;\n    component.state.position.x = (x < boundary.left) ? (boundary.right - width) : (x > boundary.right) ? boundary.left : x;\n    component.state.position.y = (y < boundary.top) ? (boundary.bottom - height) : (y > boundary.bottom) ? boundary.top : y;\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IEntity, IComponent } from \"./types\";\nimport { IEventManager } from \"./interfaces/IEventManager\";\nimport { ISystemManager } from \"./interfaces/ISystemManager\";\n\ntype IFactory<O> = (system: ISystemManager) => (entity: IEntity, options: O, events: IEventManager) => IComponent\n\nexport function registerComponentFactories<O>(\n  system: ISystemManager,\n  entity: IEntity,\n  options: O, factory: IFactory<O>[],\n) {\n  return factory\n    .map(build => build(system))\n    .map(create => create(entity, options, system.events));\n}\n","import { IVector, IDimensions } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { createMob } from \"../Domain/mob\";\nimport { defaultBoundary } from \"../../engine/utils\";\n\nexport function createEnemy(\n    system:           ISystemManager,\n    textureId:        number,\n    name:             string,\n    position?:        IVector,\n    geometry?:        IDimensions,\n    collisionGroup:   string = 'hostile',\n) {\n\n  const entity = createMob(system, {\n    name,\n\n    texture: textureId,\n\n    wiggling: true,\n\n    controls: {\n      disabled: true,\n    },\n\n    health: {\n      value: 1,\n    },\n\n    position: position || {\n      x: -999,\n      y: -999,\n    },\n\n    geometry: geometry ||{\n      width:  64,\n      height: 64,\n    },\n\n    loot: {\n      points: 10,\n    },\n\n    boundary: defaultBoundary,\n\n    collisionGroup,\n  });\n\n  return entity;\n}\n","import { IEntity } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { IPointsLoot } from \"../types\";\nimport { nameableFactory,               WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,               WithHealthState } from \"../../engine/components/killable\";\nimport { withGeometryFactory,           WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withRandomWalkFactory,         WithRandomWalkArgs } from \"../../engine/components/withRandomWalk\";\nimport { isCollidableFactory,           IsCollidable } from \"../../engine/components/isCollidable\";\nimport { lootableFactory,               IsLootable } from \"../../engine/components/lootable\";\nimport { withWrapAroundPositionFactory, WithPosition } from \"../../engine/components/withWrapAroundPosition\";\nimport { withBoundaryFactory,           WithBoundary } from \"../../engine/components/withBoundary\";\nimport { withTextureFactory,            WithTexture } from \"../../engine/components/withTexture\";\nimport { withBugWiggleFactory,          WithBugWiggle, WithBugWiggleArgs } from \"../../engine/components/withBugWiggle\";\nimport { WithPositionState } from \"../../engine/components/withPosition\";\nimport { registerComponentFactories } from \"../../engine/registerComponents\";\n\nexport function createMob(\n  system:   ISystemManager,\n  options:  MobModelArgs,\n): IEntity {\n  const entity = system.registerEntity();\n\n  registerComponentFactories(system, entity, options, [\n    nameableFactory,\n    killableFactory,\n    withWrapAroundPositionFactory,\n    withGeometryFactory,\n    withTextureFactory,\n    withBoundaryFactory,\n    withRandomWalkFactory,\n    withBugWiggleFactory,\n    isCollidableFactory,\n    lootableFactory,\n  ]);\n\n  return entity;\n}\n\nexport type MobModelArgs =\n  WithName                &\n  WithHealthState         &\n  WithPosition            &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggleArgs       &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n\nexport type MobModel =\n  WithName                &\n  WithHealthState         &\n  WithPositionState       &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggle           &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n","import MenuMusic from '../audio/Music/game-menu.mp3'\nimport MainMusic from '../audio/Music/game-main.mp3'\nimport EndMusic from '../audio/Music/game-end.mp3'\nimport SummaryMusic from '../audio/Music/game-main-summary.mp3'\n\nimport GameOverSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav'\nimport YouWinSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav'\nimport LevelWinSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav'\nimport NextLevelSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav'\nimport NewGameSound from '../audio/General Sounds/Interactions/sfx_sounds_interaction1.wav'\nimport PauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav'\nimport UnPauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav'\nimport { Omit } from 'react-router';\n\n\nexport const mkAudioSrc = (src: string, opts?: Omit<IHowlProperties, 'src'>) => ({ src: [src], ...opts });\n\nexport enum SpriteTextureIds {\n  Player          = 0,\n  Bug             = 1,\n  CrabBug         = 2,\n  HelmetBug       = 3,\n  PincerBug       = 4,\n  SonicBug        = 5,\n}\n\nexport const Sfx = {\n  NEW_GAME:     'newgame',\n  GAMEOVER:     'gameover',\n  YOU_WIN:      'youwin',\n  LEVEL_WIN:    'levelwin',\n  PAUSE:        'pause',\n  UNPAUSE:      'unpause',\n  NEXT_LEVEL:   'nextlevel',\n}\n\nexport const Songs = {\n  MENU:     'game-menu',\n  GAME:     'game-main',\n  END:      'game-end',\n  SUMMARY:  'game-main-summary',\n}\n\nexport const SongLibrary = {\n  [Songs.MENU]:     mkAudioSrc(MenuMusic,     { volume: 0.8 }),\n  [Songs.GAME]:     mkAudioSrc(MainMusic,     { volume: 0.4 }),\n  [Songs.END]:      mkAudioSrc(EndMusic,      { volume: 0.8 }),\n  [Songs.SUMMARY]:  mkAudioSrc(SummaryMusic,  { volume: 0.8 }),\n}\n\nexport const SfxLibrary = {\n  [Sfx.GAMEOVER]:    mkAudioSrc(GameOverSound),\n  [Sfx.LEVEL_WIN]:   mkAudioSrc(LevelWinSound),\n  [Sfx.NEXT_LEVEL]:  mkAudioSrc(NextLevelSound),\n  [Sfx.YOU_WIN]:     mkAudioSrc(YouWinSound),\n  [Sfx.NEW_GAME]:    mkAudioSrc(NewGameSound),\n  [Sfx.PAUSE]:       mkAudioSrc(PauseGameSound),\n  [Sfx.UNPAUSE]:     mkAudioSrc(UnPauseGameSound),\n}\n","import { IEntity, WithComponentMeta } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport * as React from 'react';\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\ninterface WithEntityProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withEntity = <P extends MobModel | CharacterModel> (\n    Component: React.ComponentType<IModelType<P>>,\n): React.ComponentType<WithEntityProps> => {\n  function WithEntity(props: WithEntityProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <Component {...rest} model={model} system={system} />;\n  };\n\n  return WithEntity;\n}\n","import {useState} from 'react';\n\ninterface IFrame {\n  frame:      string;\n  duration:   number;\n}\n\ninterface IAnimations {\n  normal: IFrame[];\n  death:  IFrame[];\n}\n\nexport interface WithAnimationOptions {\n  animations:       IAnimations;\n  currentState:     keyof IAnimations;\n  onFinished:       (...args: any[]) => void;\n  currentFrame?:    string;\n}\n\nexport const withAnimationState = (options: WithAnimationOptions) => {\n  const [animations, setAnimations] = useState(options.animations);\n  const [currentFrame, setCurrentFrame] = useState(options.currentFrame || getDefaultFrame(options));\n  const [currentState, setCurrentState] = useState(options.currentState);\n  const [timers, setTimers] = useState<NodeJS.Timer[]>([])\n\n  if (options.currentState !== currentState) {\n\n    function queueFrame(frame: string, when: number) {\n      const setFrame = (fr: string) => setCurrentFrame(fr);\n      timers.push(setTimeout(() => setFrame(frame), when));\n    }\n\n    let buffer: number = 0;\n\n    setCurrentState(options.currentState);\n\n    animations[currentState]\n      .forEach(({ frame, duration }) => {\n        queueFrame(frame, buffer);\n        buffer += duration;\n      }\n    )\n\n    const timer = setTimeout(() => {\n      options.onFinished(currentState)\n    }, buffer);\n\n    setTimers(timers.concat(timer));\n  }\n\n  return { currentFrame, setCurrentState };\n}\n\nexport const fr = (frame: string, duration: number) => ({ frame, duration });\n\nexport function getDefaultFrame(options: WithAnimationOptions): string {\n  return options.animations[options.currentState][0].frame;\n}\n","import { IAudioCollectionInitializer, WithComponentMeta, IComponent, IEntity, EntityIdType } from '../../engine/types';\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport {useEffect} from 'react';\n\nimport { ON_DEATH, ON_ATTACK } from '../../events';\nimport { keys } from '../../engine/utils';\nimport { WithHealthState } from '../../engine/components/killable';\n\n\nexport const withSoundEffects = <T>(options: WithSoundEffectsOptions<T>) => useEffect(() => {\n\n  const playDeathAudio = (component: IComponent<WithHealthState>, entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'death');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  const playAttackAudio = (entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'shoot');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  options.system.events.registerListener(ON_DEATH,         playDeathAudio);\n  options.system.events.registerListener(ON_ATTACK,        playAttackAudio);\n\n  keys(options.sounds).map(key => {\n    const collectionKey = mkAudioCollectionKey(options.entity.id, `${key}`);\n\n    options.system.audio.registerSound(collectionKey, {\n      src: [options.sounds[key]],\n      volume: 0.2,\n    })\n  })\n\n  return function cleanup() {\n    options.system.events.unRegisterListener(ON_DEATH,     playDeathAudio);\n    options.system.events.unRegisterListener(ON_ATTACK,    playAttackAudio);\n\n    keys(options.sounds).map((actionType: string | number) => {\n      const collectionKey = mkAudioCollectionKey(options.entity.id, `${actionType}`);\n\n      options.system.audio.unRegisterSound(collectionKey);\n    })\n  }\n}, []);\n\nexport type WithSoundEffectsOptions<T> = {\n  entity:         WithComponentMeta<T>\n  system:         ISystemManager;\n  sounds:         IAudioCollectionInitializer;\n}\n\nexport function mkAudioCollectionKey(entityId: EntityIdType, action: string) {\n  return `entity-${entityId}:${action}`;\n}\n","import { WithComponentMeta, IComponent, IEntity } from '../../engine/types';\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport {useEffect} from 'react';\nimport { ON_COLLISION } from '../../events';\nimport { WithCollisions } from '../../engine/components/withCollisions';\n\nexport const withCollisionEffect = <T>(options: WithCollisionEffectOptions<T>) => useEffect(() => {\n  function collisionHandler(component: IComponent, entity: IEntity) {\n    if (options.onCollision && component.state.collisions.indexOf(options.entity.id) !== -1) {\n      // thats us\n      options.onCollision(component, entity);\n    }\n  }\n\n  options.system.events.registerListener(ON_COLLISION, collisionHandler)\n\n  return function cleanup() {\n    options.system.events.unRegisterListener(ON_COLLISION, collisionHandler)\n  }\n}, []);\n\nexport type WithCollisionOptions = {\n  collisionGroup: string;\n}\n\nexport type WithCollisionEffectOptions<T> = {\n  entity:         WithComponentMeta<T>\n  system:         ISystemManager;\n  collisionGroup: string;\n  onCollision?:    (component: IComponent<WithCollisions>, entity: IEntity) => void;\n}\n","import { IModelType } from './withEntity';\nimport * as React from 'react';\nimport { Omit } from 'react-router';\n\nimport { CharacterModel } from '../../game/Domain/character';\nimport { MobModel } from '../../game/Domain/mob';\n\nimport { withAnimationState, WithAnimationOptions } from '../hooks/withAnimationState';\nimport { withSoundEffects } from '../hooks/withSoundEffects';\nimport { IAudioCollectionInitializer, WithComponentMeta, IComponent, IEntity } from '../../engine/types';\nimport { withCollisionEffect, WithCollisionOptions } from '../hooks/withCollisionEffect';\nimport { WithCollisions } from '../../engine/components/withCollisions';\n\n\ninterface WithSpriteEffectsOptions extends WithAnimationOptions, WithCollisionOptions {\n  elementId:          string;\n  sounds:             IAudioCollectionInitializer;\n  handleCollision?:   (model: WithComponentMeta<any>, component: IComponent<WithCollisions>, entity: IEntity) => void;\n}\n\ntype HOCModelType = MobModel | CharacterModel;\n\ntype ISpriteState = 'normal' | 'death';\n\nexport function withSpriteEffects<T extends HOCModelType>(\n  options: Omit<WithSpriteEffectsOptions, 'onFinished'>\n): React.ComponentType<IModelType<T>> {\n  return function WithSpriteEffectsHOC(props: IModelType<T>) {\n    const [hidden, setHidden] = React.useState(() => false)\n    const [dead, setDead]     = React.useState(() => false)\n\n    const {currentFrame, setCurrentState} = withAnimationState({\n      animations:             options.animations,\n      currentState:           options.currentState,\n\n      onFinished:             (state: ISpriteState) =>\n        { if (state === 'death') setHidden(true); }\n    });\n\n    withSoundEffects<T>({\n      entity:         props.model,\n      system:         props.system,\n      sounds:         options.sounds,\n    });\n\n    withCollisionEffect<T>({\n      entity:         props.model,\n      system:         props.system,\n      collisionGroup: options.collisionGroup,\n      onCollision:    handleCollision,\n    })\n\n    function handleCollision(component: IComponent<WithCollisions>, entity: IEntity) {\n      if (options.handleCollision) {\n        options.handleCollision(props.model, component, entity);\n      }\n\n      props.model.health.value = 0;\n\n      setCurrentState('death');\n    }\n\n    const styles: React.CSSProperties = {\n      position:               'absolute',\n      backgroundImage:        `url(${currentFrame})`,\n      backgroundSize:         'contain',\n      backgroundPosition:     'center',\n      width:                  '64px',\n      height:                 '64px',\n      left:                   hidden ? -9999 : props.model.position.x,\n      top:                    hidden ? -9999 : props.model.position.y,\n      display:                cssDisplayValue(hidden),\n    }\n  \n    return (\n      <div id={options.elementId} className=\"sprite\" style={styles} />\n    )\n  }\n}\n\nfunction cssDisplayValue(dead: boolean) {\n  return dead ? 'none' : ''\n}\n","import { CharacterModel } from '../../../game/Domain/character';\n\nimport { withEntity } from '../../Hoc/withEntity';\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Cannon/sfx_wpn_cannon1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedPlayer = withSpriteEffects<CharacterModel>({\n  elementId: 'player',\n\n  currentState: 'normal',\n\n  animations: {\n    normal: [\n      fr(require('../../../assets/player/ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/player/explosion-1/explosion-1-01.png'), 0),\n      fr(require('../../../assets/player/explosion-1/explosion-1-02.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-03.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-04.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-05.png'), 75),\n    ],\n  },\n\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n\n  collisionGroup: 'player',\n});\n\nexport const ConnectedPlayer = withEntity<CharacterModel>(AnimatedPlayer)\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_soft5.wav';\n\nexport const AnimatedBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/enemy/enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n  collisionGroup: 'enemy',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_hard12.wav';\n\n\nexport const AnimatedCrabBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/crab-bug/crab-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n  collisionGroup: 'enemy',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Clusters/sfx_exp_cluster1.wav';\n\nexport const AnimatedHelmetBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/helmet-bug/helmet-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n  collisionGroup: 'enemy',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Odd/sfx_exp_odd1.wav';\n\nexport const AnimatedPincerBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/pincer-bug/pincer-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n  collisionGroup: 'enemy',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedSonicBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/sonic-enemy/sonic-enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n  collisionGroup: 'enemy',\n});\n","\nimport { SpriteTextureIds } from \"../../game/catalogue\";\nimport { ConnectedPlayer } from \"./Player/Player\";\nimport { AnimatedBug, AnimatedCrabBug, AnimatedHelmetBug, AnimatedPincerBug, AnimatedSonicBug } from \"./NPCs\";\n\n\nexport const SpriteTextureCollection: TextureIdIndexed = {\n    [SpriteTextureIds.Player]:      ConnectedPlayer,\n    [SpriteTextureIds.Bug]:         AnimatedBug,\n    [SpriteTextureIds.CrabBug]:     AnimatedCrabBug,\n    [SpriteTextureIds.HelmetBug]:   AnimatedHelmetBug,\n    [SpriteTextureIds.PincerBug]:   AnimatedPincerBug,\n    [SpriteTextureIds.SonicBug]:    AnimatedSonicBug,\n}\n\ntype TextureIdIndexed = { [K in SpriteTextureIds]: any; }\n","\nimport { IEntity, WithComponentMeta } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport * as React from 'react';\n\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\nimport { SpriteTextureCollection } from \"../Containers/Sprites\";\nimport { SpriteTextureIds } from \"../../game/catalogue\";\n\nexport interface WithTextureProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withTexture = <P extends MobModel | CharacterModel> (\n  textureId: SpriteTextureIds,\n): React.ComponentType<WithTextureProps> => {\n  const ConnectedComponent: React.ComponentType<IModelType<P>> = SpriteTextureCollection[textureId]\n  function WithTextureHOC(props: WithTextureProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <ConnectedComponent {...rest} model={model} system={system} />;\n  };\n\n  return WithTextureHOC;\n}\n","import { ISystemManager } from \"../engine/interfaces/ISystemManager\";\nimport { MouseEvent } from \"react\";\nimport { createEnemy } from \"../game/factories/enemy\";\nimport { withTexture } from \"./Hoc/withTexture\";\nimport { ILoadedEnemy } from \"./Levels/types\";\n\nexport function loadLevel(system: ISystemManager, enemyPositions: number[][]): ILoadedEnemy[] {\n  let enemies: ILoadedEnemy[] = [];\n\n  let x: number = 0;\n  let y: number = 0;\n\n  for (const row of enemyPositions) {\n    for (const enemyTypeId of row) {\n      if (enemyTypeId !== 0) {\n        const geometry = {\n          width:    64,\n          height:   64,\n        }\n  \n        const position = {\n          x:    x * geometry.width,\n          y:    y * geometry.height,\n        }\n  \n        const entity = createEnemy(system, enemyTypeId, JSON.stringify(position), position, geometry)\n        enemies.push({\n          component: withTexture(enemyTypeId),\n          entity,\n        });\n      }\n\n      x++;\n    }\n\n    x = 0;\n    y++;\n  }\n\n  return enemies;\n}\n\nexport function withBlur(handler: any) {\n  return (event: MouseEvent<HTMLButtonElement>): void | undefined => {\n    event.currentTarget.blur();\n    handler(event);\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  updateFrequency?: number;\n}\n\ninterface State {\n  value: number;\n}\n\nexport class FPS extends React.Component<Props, State> {\n  private lastLoop: number = (new Date()).getMilliseconds();\n  private count: number = 1;\n  private fps: number = 0;\n  private throttled: boolean = false;\n  private handler: number | undefined;\n\n  static defaultProps = {\n    updateFrequency: 500,\n  }\n\n  state = {\n    value: 0,\n  }\n\n  componentDidMount() {\n    this.setFps(this.countFps());\n    this.loop();\n  }\n\n  componentWillUnmount() {\n    if (this.handler) {\n      cancelAnimationFrame(this.handler)\n    }\n  }\n\n  countFps = () => {\n    const currentLoop = (new Date()).getMilliseconds();\n    if (this.lastLoop > currentLoop) {\n      this.fps = this.count;\n      this.count = 1;\n    } else {\n      this.count += 1;\n    }\n    this.lastLoop = currentLoop;\n    return this.fps;\n  };\n  \n  loop = () => {\n    this.handler = requestAnimationFrame(() => {\n      this.setFps(this.countFps());\n      this.loop();\n    });\n  }\n\n  setFps = (value: number) => {\n    if (!this.throttled) {\n      this.setState({ value })\n      this.throttled = true;\n      this.handler = setTimeout(() => {\n        this.throttled = false;\n      }, this.props.updateFrequency)\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"fps\">Fps: {this.state.value}</div>\n    );\n  }\n}\n","import { IFactoryComponent } from '../../engine/types';\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport * as React from 'react';\nimport './styles/Dev.style.css';\n\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Draggable from 'react-draggable';\n\nimport { pp } from '../../engine/utils';\nimport { withBlur } from '../utils';\nimport { withEntity } from '../Hoc/withEntity';\nimport { FPS } from './FPS';\nimport { Screens } from '../Screens';\n\ninterface Props {\n  system:   ISystemManager;\n  onStart:  () => void;\n  onStop:   () => void;\n  onTick:   () => void;\n  onSave:   () => void;\n  onLoad:   () => void;\n  nav:      (screen: Screens) => void;\n}\n\nconst EntityInspector = withEntity(props =>\n  <pre>{pp(props.model)}</pre>\n);\n\nexport const DevScreen = (props: Props) => {\n  const [entityId, setEntityId] = useState(0);\n\n  const [open, setOpen]         = useState(false);\n  const [dragging, setDrag]     = useState(false);\n\n  const setDragFalse = () => setDrag(false);\n  const setDragTrue  = () => setDrag(true);\n  const toggleOpen   = () => setOpen(!open);\n\n  const handleClick = () => {\n    dragging ? open : toggleOpen();\n    setDragFalse();\n  }\n\n  return (\n    <Draggable>\n      <div id=\"devscreen\" className={'container'}>\n\n        <div id=\"header\">\n          <span className=\"float-left title\" onMouseUp={handleClick} onMouseDown={setDragFalse} onMouseMove={setDragTrue}>\n            <h3>Devtools</h3>\n          </span>\n          <i id=\"close-x\" className=\"icon close float-right\" onClick={handleClick}></i>\n        </div>\n\n        <div className={classNames(!open && 'hidden')}>\n          <span className=\"links\">\n            <a onClick={() => props.nav('intro')}>Intro</a>{' | '}\n            <a onClick={() => props.nav('menu')}>Menu</a>{' | '}\n            <a onClick={() => props.nav('game')}>Game</a>\n          </span>\n\n          <Buttons {...props} />\n\n          <p>Epoch: {props.system.epoch}</p>\n\n          <FPS />\n\n          <div id=\"entity-viewer\">\n            Entities\n            <select onChange={e => {\n              const value = e.currentTarget.value;\n              setEntityId(parseInt(value));\n            }}>\n              {props.system.getState().entities.map(o => {\n                const { name } = props.system.getEntityModel<IFactoryComponent>(o);\n                return <option key={o.id} value={o.id}>{name}</option>\n              })}\n            </select>\n            <div className=\"scrollable p-1\">\n              <EntityInspector entity={{ id: entityId }} system={props.system} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\n\nfunction Buttons(props: Props) {\n  return (\n    <>\n      <button className=\"btn is-primary\" onClick={withBlur(props.onStart)}>Start</button>\n      <button className=\"btn is-error\" onClick={withBlur(props.onStop)}>Stop</button>\n      <button className=\"btn is-success\" onClick={withBlur(props.onTick)}>Evolve</button>\n      <button className=\"btn\" onClick={withBlur(props.onSave)}>Save</button>\n      <button className=\"btn is-warning\" onClick={withBlur(props.onLoad)}>Load</button>\n    </>\n  )\n}\n\nexport function classNames(...classes: (string | boolean | undefined | null)[]) {\n  return classes.filter(o => typeof o === 'string').join(' ');\n}\n","import * as React from 'react';\nimport \"./styles/Layout.style.css\";\n\ninterface Props {\n  id?:            string;\n  className?:     string;\n  topLeft?:       React.ReactNode;\n  topCenter?:     React.ReactNode;\n  topRight?:      React.ReactNode;\n  middleLeft?:    React.ReactNode;\n  middleCenter?:  React.ReactNode;\n  middleRight?:   React.ReactNode;\n  bottomLeft?:    React.ReactNode;\n  bottomCenter?:  React.ReactNode;\n  bottomRight?:   React.ReactNode;\n  background?:    React.ReactNode;\n  children:       React.ReactNode;\n  after?:         React.ReactNode;\n}\n\nexport function Layout(props: Props) {\n  return (\n    <div id={props.id} className={`layout ${props.className}`}>\n      <div className=\"top left\">{props.topLeft}</div>\n      <div className=\"top center\">{props.topCenter}</div>\n      <div className=\"top right\">{props.topRight}</div>\n      <div className=\"middle left\">{props.middleLeft}</div>\n      <div className=\"middle center\">{props.middleCenter}</div>\n      <div className=\"middle right\">{props.middleRight}</div>\n      <div className=\"bottom left\">{props.bottomLeft}</div>\n      <div className=\"bottom center\">{props.bottomCenter}</div>\n      <div className=\"bottom right\">{props.bottomRight}</div>\n      <div className=\"background\">{props.background}</div>\n      <div className=\"gamescreen\">{props.children}</div>\n      {props.after}\n    </div>\n  )\n}\n  ","import * as React from 'react';\nimport { Layout } from '../Layouts/Base';\nimport { Screens } from '../Screens';\n\ninterface Props {\n  onPlayerInput: (ev: KeyboardEvent) => void;\n  nav:           (screen: Screens) => void;\n}\n\nexport class Intro extends React.Component<Props> {\n\n  componentDidMount() {\n    // document.addEventListener('keypress', this.props.onPlayerInput);\n    this.props.nav('menu');\n  }\n\n  componentWillUnmount() {\n    // document.removeEventListener('keypress', this.props.onPlayerInput);\n  }\n\n  render() {\n    return (\n      <Layout id=\"intro\" className=\"game-screen\">\n      </Layout>\n    )\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n    value: number;\n  }\n  \n  export function Lives(props: Props) {\n    return (\n      <div className=\"flex rows\">\n        <span>1UP</span>\n        <span>{props.value}</span>\n      </div>\n    )\n  }\n  ","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function HighScore(props: Props) {\n  return (\n    <div className=\"flex rows\">\n      <span>High Score</span>\n      <span className=\"center-text\">{props.value}</span>\n    </div>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function Credits(props: Props) {\n  return (\n    <span>Credits {props.value}</span>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: string | number | undefined;\n}\n\nexport function LevelStatus(props: Props) {\n  return <p>{props.value ? `Level: ${props.value}` : ''}</p>\n}\n","import * as React from 'react';\n\ninterface Props {\n  onClick: () => void;\n}\n\nexport function RestartButton(props: Props) {\n  return <button className=\"btn is-success\" onClick={props.onClick}>Restart</button>;\n}\n","import * as React from 'react';\nimport './styles/Overlay.style.css';\n\nimport { Layout } from \"./Base\";\nimport { Lives } from \"../Components/Lives\";\nimport { HighScore } from \"../Components/HighScore\";\nimport { Credits } from \"../Components/Credits\";\nimport { LevelStatus } from '../Components/LevelStatus';\nimport { RestartButton } from '../Components/RestartButton';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  id:         string;\n  className?: string;\n  level?:     string | number;\n  lives:      number;\n  score:      number;\n  credits:    number;\n  background: React.ReactNode;\n  children:   React.ReactNode;\n  onRestart: () => void;\n}\n\nexport function Gui(props: Props) {\n  return (\n    <Layout\n      id={props.id}\n      className={classNames(props.className, 'retro-container')}\n      topLeft={<Lives value={props.lives} />}\n      topCenter={<HighScore value={props.score} />}\n      topRight={<LevelStatus value={props.level} />}\n      bottomLeft={<Credits value={props.credits} />}\n      background={props.background}\n      bottomRight={<RestartButton onClick={props.onRestart} />}\n    >\n      {props.children}\n    </Layout>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/Logo.style.css';\n\nexport function NewGame() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"logo-container\" className=\"slide-up\">\n        <div id=\"logo\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default NewGame;\n","import {useEffect} from 'react';\nimport { Keyboard } from '../../extern/Keyboard';\n\nexport const withEnterKeyEffect = (onEnter: () => void) => useEffect(() => {\n  const enterKeyHandler = (e: KeyboardEvent) => {\n    if (e.keyCode === Keyboard.ENTER) {\n      onEnter();\n    }\n  }\n\n  document.addEventListener('keypress', enterKeyHandler)\n\n  return function cleanup() {\n    document.removeEventListener('keypress', enterKeyHandler);\n  }\n}, []);\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport StarFieldLogo from '../Backgrounds/NewGame';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { ON_START_GAME } from '../../events';\n\nimport { classNames } from '../Development/Dev';\nimport { Songs, Sfx } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\n\n\nexport function Menu(props: IGameState) {\n  const [ready, setReady] = useState(false);\n\n  function handleStartGame() {\n    setTimeout(() => {\n      props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n\n    setTimeout(() => {\n      props.system.events.emit(ON_START_GAME);\n    }, 2000);\n  }\n\n  useEffect(() => {\n    setTimeout(() => setReady(true), 3000);\n  }, []);\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.MENU);\n\n    return () => {\n      props.system.audio.stopSong(Songs.MENU);\n    }\n  }, []);\n\n  withEnterKeyEffect(once(handleStartGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"menu\"\n      score={0}\n      credits={0}\n      lives={0}\n      background={<StarFieldLogo />}\n      onRestart={handleStartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in', 'neon', 'retro-red')} onMouseUp={handleStartGame}>\n            <span>Press Enter</span>\n          </p>\n        </div>\n      </div>\n      <div className=\"overlay\">AV-1</div>\n    </Gui>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\n\nexport function StarField() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n    </div>\n  );\n}\n\nexport default StarField;\n","import * as React from 'react';\n\nexport class Level extends React.PureComponent {\n  render() {\n    return (\n      <div className=\"screen level\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ProjectileModel } from '../../../game/Domain/projectile';\n\ninterface Props {\n  model: ProjectileModel;\n}\n\nexport function Bullet(props: Props) {\n  const styles = getStyles(props);\n  return (\n    <div id=\"bullet\" className=\"sprite\" style={styles} />\n  )\n}\n\nfunction getStyles(props: Props): React.CSSProperties {\n  return {\n    position:     'absolute',\n    outline:      '1px solid white',\n    borderRadius: '25%',\n    height:       '32px',\n    width:        '0px',\n    left:         props.model.position.x + 30,\n    top:          props.model.position.y,\n    display:      cssDisplayValue(props.model),\n  }\n}\n\nfunction cssDisplayValue(model: ProjectileModel) {\n  return (model.offscreen) ? 'none' : ''\n}\n","import * as React from 'react';\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { LevelProps, ILoadedEnemy } from '../Levels/types';\nimport { Level } from '../Levels/Base';\nimport { ConnectedPlayer } from '../Containers/Player/Player';\nimport { Bullet } from '../Containers/Weapons/Bullet';\nimport { once } from '../../engine/utils';\nimport { ON_ENEMY_DEATH, ON_LEVEL_COMPLETE, ON_ENEMY_FREE, ON_ENEMY_GROUP, ON_LEVEL_BEGIN } from '../../events';\nimport { WithRandomWalk } from '../../engine/components/withRandomWalk';\n\nfunction arrayRandom<T>(items: T[]) {\n  return items[Math.floor(Math.random()*items.length)];\n}\n\ninterface WithGameLevelOptions {\n  enemyPositions: number[][];\n  levelId:        string | number;\n  completeEvent?: string;\n}\n\nexport const withGameLevel = (\n  options: WithGameLevelOptions\n): React.ComponentType<LevelProps> => {\n  return class LevelHOC extends React.Component<LevelProps, State> {\n    private interval: any;\n\n    state = {\n      enemyPositions: options.enemyPositions,\n      levelId: options.levelId,\n\n      enemies: [] as ILoadedEnemy[],\n      enemiesDead: 0,\n      ready: false,\n    }\n\n    componentDidMount() {\n      const {enemyPositions} = this.state;\n      const {system, loadLevel} = this.props;\n\n      const enemies = loadLevel(system, enemyPositions);\n\n      this.setState({ enemies, ready: true })\n\n      system.events.registerListener(ON_ENEMY_DEATH, this.countDeath);\n      system.events.registerListener(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.registerListener(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.registerListener(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n    }\n\n    componentDidUpdate(nextProps: LevelProps, nextState: State) {\n      if (!nextState.ready) {\n        return;\n      }\n\n      if (nextState.enemiesDead === nextState.enemies.length) {\n        this.onLevelComplete(this.props.system, this.state.levelId);\n      }\n    }\n\n    componentWillUnmount() {\n      const {system} = this.props;\n\n      clearInterval(this.interval);\n\n      system.events.unRegisterListener(ON_ENEMY_DEATH, this.countDeath);\n      system.events.unRegisterListener(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.unRegisterListener(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.unRegisterListener(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n\n      this.state.enemies.forEach(o =>\n        system.unRegisterEntity(o.entity.id)\n      );\n    }\n\n    countDeath = () => {\n      this.setState(state => ({\n        enemiesDead: state.enemiesDead + 1,\n      }));\n    }\n\n    onLevelComplete = once((system: ISystemManager, level: number | string) => {\n      system.events.emit(options.completeEvent || ON_LEVEL_COMPLETE, level);\n      clearInterval(this.interval);\n    })\n\n    enemyFree = () => {\n      const maybeComponent = arrayRandom(this.state.enemies.map(o => o.entity));\n\n      const controlComponent = this.props.system\n        .getEntityComponent<WithRandomWalk>(maybeComponent, 'controls');\n\n      if (controlComponent) {\n        controlComponent.state.disabled = false;\n      }\n    }\n\n    enemyGroup = () => {}\n\n    startFreeEnemyInterval = () => {\n      this.interval = setInterval(() => {\n        this.props.system.events.emit(ON_ENEMY_FREE);\n      }, 8000);\n    }\n\n    render() {\n      const {player, bullet1, bullet2, system} = this.props.state;\n      return (\n        <Level>\n\n          <ConnectedPlayer entity={player} system={system} />\n\n          <Bullet model={bullet1} />\n          <Bullet model={bullet2} />\n\n          {this.state.enemies.map((enemy: ILoadedEnemy) => {\n            const ConnectedEnemy = enemy.component;\n            return (\n              <ConnectedEnemy\n                key={enemy.entity.id}\n                entity={enemy.entity}\n                system={system}\n              />\n            )\n          })\n        }\n        </Level>\n      )\n    }\n  }\n}\n\ninterface State {\n  enemies:          ILoadedEnemy[];\n  enemyPositions:   number[][];\n  enemiesDead:      number;\n  levelId:          string | number;\n  ready:            boolean;\n}\n","import { ILevel, ILevels } from \"./types\";\n\nimport { Demo } from \"./Demo/Demo\";\nimport { Level1 } from \"./1/Level.1\";\nimport { Level2 } from \"./2/Level.2\";\nimport { Level3 } from \"./3/Level.3\";\nimport { Level4 } from \"./4/Level.4\";\nimport { End } from \"./End/End\";\n\nexport const Levels = {\n\tdemo: \t\t{\n    level: Demo,\n    next: 'level1',\n  },\n\tlevel1: \t{\n    level: Level1,\n    next: 'level2',\n  },\n\tlevel2: \t{\n    level: Level2,\n    next: 'level3',\n  },\n\tlevel3: \t{\n    level: Level3,\n    next: 'level4',\n  },\n\tlevel4: \t{\n    level: Level4,\n    next: 'end',\n  },\n\tend: \t{\n    level: End,\n    next: 'demo',\n  },\n}\n\nexport const humanizedLevelNames = {\n  demo:   'Demo',\n  level1: '1',\n  level2: '2',\n  level3: '3',\n  level4: '4',\n  end:    'End',\n}\n\nexport function getThisLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].level;\n}\n\nexport function getNextLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].next as ILevel;\n}\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Demo = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0],\n    [0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],\n  ],\n  levelId: 'Demo',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level1 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '1',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level2 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '2',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level3 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 5, 5, 5, 5, 5, 5, 0, 0, 0],\n    [0, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n  ],\n  levelId: '3',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\nimport { ON_GAME_OVER } from '../../../events';\n\nexport const Level4 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n  ],\n  levelId: '4',\n\n  completeEvent: ON_GAME_OVER,\n});\n","import { LevelProps } from '../types';\nimport * as React from 'react';\n\nimport { ConnectedPlayer } from '../../Containers/Player/Player';\n\nimport { Level } from '../Base';\n\n\nexport function End(props: LevelProps) {\n  const {player, system} = props.state;\n  return (\n    <Level>\n      <ConnectedPlayer entity={player} system={system} />\n    </Level>\n  )\n}\n","import * as React from 'react';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  level:    string;\n  onReady:  () => void;\n}\n\nexport function Countdown(props: Props) {\n  const {time, ready} = useCountdownHooks(props);\n\n  return (\n    <div className={classNames(\"center-content\", \"absolute-fit\", ready ? 'fadeout' : 'fadeout-visible')}>\n      <p className=\"neon green\">\n        <span>{time}</span>\n      </p>\n    </div>\n  );\n}\n\nfunction useCountdownHooks(props: Props) {\n  const [time, setTime] = React.useState(5);\n  const [ready, setReady] = React.useState(false);\n\n  React.useEffect(() => {\n    let END = 5;\n    \n    setTime(END);\n    setReady(false);\n  \n    for (let i = 0; i <= END; i++) {\n      setTimeout(() => setTime(END - i), i * 1000);\n    }\n  \n    setTimeout(() => {\n      setReady(true);\n      props.onReady();\n    }, END * 1000);\n\n  }, [props.level])\n\n  return { time, ready }\n}\n","import { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { IGameState } from '../../game/types';\nimport { ILevels, ILevel } from './types';\nimport * as React from 'react';\n\nimport { Countdown } from '../Components/Countdown'\nimport { Levels, getThisLevel } from './Directory';\nimport { loadLevel } from '../utils';\nimport { ON_LEVEL_BEGIN, ON_LEVEL_LOAD } from '../../events';\n\ninterface Props {\n\tlevels?:  \t\tILevels;\n\tcurrentLevel: ILevel;\n\tstate:    \t\tIGameState;\n\tsystem:   \t\tISystemManager;\n}\n\nexport function Loader({\n\tlevels = Levels,\n\t...rest\n}: Props) {\n\tconst [ready, setReady] = React.useState(false);\n\tconst [level, setLevel] = React.useState(rest.currentLevel);\n\n  const GameLevel = getThisLevel(rest.currentLevel);\n\t\n\tReact.useEffect(() => {\n\t\trest.system.events.emit(ON_LEVEL_LOAD)\n\t\tsetLevel(rest.currentLevel);\n\t\tsetReady(false);\n\t}, [rest.currentLevel])\n\n\tconst onCountdownFinished = () => {\n\t\trest.system.events.emit(ON_LEVEL_BEGIN, level)\n\t\tsetReady(true);\n\t}\n\n  return (\n\t\t<>\n\t\t\t<GameLevel\n\t\t\t\tloadLevel={loadLevel}\n\t\t\t\t{...rest}\n\t\t\t/>\n\n\t\t\t<Countdown\n\t\t\t\tlevel={level}\n\t\t\t\tonReady={onCountdownFinished}\n\t\t\t/>\n\t\t</>\n  );\n}\n","import { ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\n\nimport { humanizedLevelNames } from '../Levels';\nimport { once } from '../../engine/utils';\n\ninterface Props {\n  currentLevel: ILevel;\n  state:        ICurrentGameState;\n  onNextLevel:  () => void;\n}\n\nexport function LevelSummary(props: Props) {\n  withEnterKeyEffect(once(props.onNextLevel));\n  return (\n    <div className=\"complete container with-title is-center is-dark fade-in\">\n      <label className=\"title\">{`Level ${humanizedLevelNames[props.currentLevel]} Complete`}</label>\n\n      <p>{`Score:  ${props.state.score}`}</p>\n      <p>{`Shots:  ${props.state.shots}`}</p>\n      <p>{`Hits:   ${props.state.hits}`}</p>\n      <p>{`Ratio:  ${Math.round(props.state.hits / props.state.shots * 100)}%`}</p>\n\n      <button className=\"btn is-primary\" onClick={props.onNextLevel}>Press Enter</button>\n    </div>\n  )\n}\n","import { IVector, IEntity, IComponent } from '../../engine/types';\nimport { IGameState, IPointsLoot, ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport StarField from '../Backgrounds/StarField';\nimport { Gui } from '../Layouts/Gui';\n\nimport { ProjectileModel } from '../../game/Domain/projectile';\nimport { WithHealthState } from '../../engine/components/killable';\nimport { IsLootable } from '../../engine/components/lootable';\n\nimport { Loader, humanizedLevelNames } from '../Levels';\nimport { LevelSummary } from '../Components/LevelSummary';\n\nimport { first, mkEntity } from '../../engine/utils';\n\nimport { ON_LEVEL_COMPLETE, ON_ENEMY_DEATH, ON_COLLISION, ON_GAME_OVER, ON_PLAYER_ATTACK, ON_LEVEL_LOAD, ON_LEVEL_BEGIN, ON_START_ENGINE, ON_STOP_ENGINE } from '../../events';\nimport { getNextLevel } from '../Levels/Directory';\nimport { Sfx, Songs } from '../../game/catalogue';\nimport { Screens } from '../Screens';\nimport { WithPositionState } from '../../engine/components/withPosition';\nimport { WithHomePosition } from '../../engine/components/withHomePosition';\n\n\ninterface Props extends IGameState {\n  onRestart:    () => void;\n  onFinalScore: (stats: ICurrentGameState) => void;\n  nav:          (screen: Screens) => void;\n}\n\nexport class Game extends React.PureComponent<Props, ICurrentGameState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.registerEvents();\n  }\n\n  state = {\n    score:              0,\n    credits:            1,\n    lives:              3,\n    shots:              0,\n    hits:               0,\n    complete:           false,\n    completed:          [],\n    currentLevel:       'level1' as ILevel,\n  }\n\n  componentDidMount() {\n    this.props.system.audio.playSong(Songs.GAME);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.player.attacking && nextProps.player.attacking) {\n      this.fireBullet(this.props.player.center);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.system.audio.stopSong(Songs.GAME);\n    this.unRegisterEvents();\n  }\n\n  registerEvents = () => {\n    this.props.system.events.registerListener(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.registerListener(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.registerListener(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.registerListener(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.registerListener(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.registerListener(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  unRegisterEvents = () => {\n    this.props.system.events.unRegisterListener(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.unRegisterListener(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.unRegisterListener(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.unRegisterListener(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.unRegisterListener(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.unRegisterListener(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  handleBulletCollisions = (): void => { // !!! Move to system component\n    const { bullet1, bullet2 } = this.props;\n    if (bullet1.collisions.length || bullet2.collisions.length) {\n\n      const collisions = [\n        ...bullet1.collisions,\n        ...bullet2.collisions,\n      ];\n\n      const deadpool = [...new Set(collisions)].map(mkEntity);\n\n      deadpool.forEach(this.killEntity);\n    }\n  }\n\n  getBullet = (): ProjectileModel => {\n    return first([\n      this.props.bullet1,\n      this.props.bullet2,\n    ].filter(model => !!model.offscreen ))\n  }\n\n  fireBullet = (pos: IVector): void => {\n    const bullet = this.getBullet();\n\n    if (!bullet) {\n      return;\n    }\n\n    bullet.position.x = pos.x;\n    bullet.position.y = pos.y;\n\n    this.reviveEntity(bullet, 1);\n\n    this.setState(state => ({\n      ...state,\n      shots: state.shots + 1,\n    }));\n\n    this.props.system.events.emit(ON_PLAYER_ATTACK, this.props.player)\n  }\n\n  killEntity = (entity: IEntity) => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n\n    component.state.health.value = 0;\n  }\n\n  reviveEntity = (entity: IEntity, health: number): void => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n\n    component.state.health.value = health;\n  }\n\n  handleEnemyDeath = (source: IComponent): void => {\n    const component = this.props.system\n      .getEntityComponent<IsLootable<IPointsLoot>>({ id: source.entityId }, 'loot');\n\n    if (component === undefined) {\n      return;\n    }\n\n    const points = component.state.loot!.points;\n\n    this.setState(state => ({\n      score: state.score + points,\n      hits: state.hits + 1,\n    }));\n  }\n\n  handleLevelLoading = (): void => {\n    this.props.system.events.emit(ON_STOP_ENGINE)\n\n    const controls: IComponent<WithPositionState>[] = this.props.system.getState().components.filter(o => o.name === 'position');\n    const homePositions: IComponent<WithHomePosition>[] = this.props.system.getState().components.filter(o => o.name === 'homePosition');\n\n    controls.forEach(component => {\n      component.state.controllable = false;\n    })\n    homePositions.forEach(component => {\n      component.state.goHome = true;\n    })\n\n    this.props.system.events.emit(ON_START_ENGINE)\n  }\n\n  handleLevelBegin = (): void => {\n    this.props.system.events.emit(ON_START_ENGINE)\n\n    const controls: IComponent<WithPositionState>[] = this.props.system.getState().components.filter(o => o.name === 'position');\n    const homePositions: IComponent<WithHomePosition>[] = this.props.system.getState().components.filter(o => o.name === 'homePosition');\n\n    controls.forEach(component => {\n      component.state.controllable = true;\n    })\n    homePositions.forEach(component => {\n      component.state.goHome = false;\n    })\n  }\n\n  handleLevelComplete = (level: string | number): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n\n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.SUMMARY);\n\n      this.setState(state => ({\n        complete: true,\n        completed: state.completed.concat(level),\n      }));\n    }, 1500);\n  }\n\n  handleGameOver = (): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 1500);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.GAMEOVER);\n    }, 2250);\n\n    setTimeout(() => {\n      this.props.onFinalScore(this.state);\n    }, 3000);\n  }\n\n  startNewGame = (): void => {\n    this.props.system.audio.playSound(Sfx.NEW_GAME);\n\n    setTimeout(() => this.setState({ currentLevel: 'level1' }), 5);\n  }\n\n  onNextLevel = (): void => {\n    this.props.system.audio.stopSong(Songs.SUMMARY);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.NEXT_LEVEL);\n    }, 350);\n\n    setTimeout(() => {\n      const currentLevel = this.state.currentLevel;\n      const nextLevel = getNextLevel(currentLevel);\n\n      this.setState({ currentLevel: nextLevel as ILevel, complete: false })\n    }, 1200);\n\n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.GAME);\n    }, 3000);\n  }\n\n  render() {\n    const {currentLevel, score, credits, lives} = this.state;\n    return (\n      <Gui\n        id=\"gui\"\n        className=\"game\"\n        level={humanizedLevelNames[currentLevel]}\n        score={score}\n        credits={credits}\n        lives={lives}\n        onRestart={this.props.onRestart}\n        background={<StarField />}\n      >\n        <Loader\n          currentLevel={currentLevel}\n          state={this.props}\n          system={this.props.system}\n        />\n\n        {this.state.complete ? (\n          <div className=\"center-content absolute-fit\">\n            <LevelSummary\n              currentLevel={currentLevel}\n              state={this.state}\n              onNextLevel={this.onNextLevel}\n            />\n          </div>\n        ) : null}\n      </Gui>\n    )\n  }\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/GameOver.style.css';\n\nexport function GameOver() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"gameover-container\" className=\"slide-up\">\n        <div id=\"gameover\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default GameOver;\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport GameOver from '../Backgrounds/GameOver';\n\nimport { classNames } from '../Development/Dev';\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { Songs } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\nimport { Screens } from '../Screens';\n\ninterface FinalScore {\n  score:    number;\n  hits:     number;\n  shots:    number;\n  lives:    number;\n  credits:  number;\n}\n\ntype Props = {\n  nav:    (screen: Screens) => void;\n  final?: FinalScore\n}\nexport function Outro(props: Props & IGameState) {\n  const [ready, setReady] = useState(false);\n  const [final, setFinalScore] = useState<FinalScore>({} as FinalScore);\n\n  function handleStartNewGame() {\n    props.nav('game');\n  }\n  \n  function handleRestartGame() {\n    props.nav('menu');\n  }\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.END);\n    return () => {\n      props.system.audio.stopSong(Songs.END);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (props.final) {\n      try {\n        setFinalScore(props.final);\n      } catch (e) {\n        // meh\n      }\n    }\n\n    const timer = setTimeout(() => setReady(true), 3000);\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, []);\n\n  withEnterKeyEffect(once(handleStartNewGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"gameover\"\n      score={final.score}\n      credits={final.credits}\n      lives={final.lives}\n      background={<GameOver />}\n      onRestart={handleRestartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in')}>\n            Press Enter to Play Again\n          </p>\n        </div>\n      </div>\n    </Gui>\n  )\n}\n","import { IComponent, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { ISystemManager } from \"../interfaces/ISystemManager\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithPlayerControls = { direction: IVector; moving: boolean; speed: IVector; disabled?: boolean; };\n\nexport function withPlayerControlsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPlayerControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPlayerControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n          disabled: !!state.disabled,\n        },\n        update: (system: ISystemManager, component: IPlayerControllableEntity) => {\n          handleMovement(entity, component, system, 'vertical');\n          handleMovement(entity, component, system, 'horizontal');\n\n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\nexport type IPlayerControllableEntity = IComponent<WithPlayerControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  if (component.state.disabled) {\n    return;\n  }\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { createCharacter } from \"../Domain/character\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { defaultBoundary } from \"../../engine/utils\";\nimport { SpriteTextureIds } from \"../catalogue\";\n\nexport function createPlayer(\n  system:           ISystemManager,\n  name:             string = 'player 1',\n  collisionGroup:   string = 'friendly',\n) {\n\n  debugger\n  const playerEntity = createCharacter(system, {\n    name,\n\n    texture: SpriteTextureIds.Player,\n\n    health: {\n      value: 100,\n      immortal: false,\n    },\n\n    attackPower: 10,\n\n    speed: {\n      y: 0,\n      x: 6,\n    },\n\n    position: {\n      x: 400,\n      y: 475,\n    },\n\n    direction: {\n      x: 0,\n      y: 0,\n    },\n\n    geometry: {\n      width:  64,\n      height: 64,\n    },\n\n    moving: false,\n\n    attacking: false,\n\n    boundary: defaultBoundary,\n\n    collisionGroup,\n\n    homePosition: {\n      x: 400,\n      y: 475,\n    }\n  });\n\n  return playerEntity;\n}\n","import { IEntity } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { combatableFactory,         WithAttack } from \"../../engine/components/combatable\";\nimport { nameableFactory,           WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,           WithHealth, WithHealthState } from \"../../engine/components/killable\";\nimport { withPositionFactory,       WithPosition, WithPositionState } from \"../../engine/components/withPosition\";\nimport { withGeometryFactory,       WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withBoundaryFactory,       WithBoundary } from \"../../engine/components/withBoundary\";\nimport { withTextureFactory,        WithTexture } from \"../../engine/components/withTexture\";\nimport { isCollidableFactory,       IsCollidable } from \"../../engine/components/isCollidable\";\nimport { withCollisionsFactory,     WithCollisions } from \"../../engine/components/withCollisions\";\nimport { withHomePositionFactory,   WithHomePosition } from \"../../engine/components/withHomePosition\";\nimport { withPlayerControlsFactory, WithPlayerControls } from \"../../engine/components/withPlayerControls\";\nimport { registerComponentFactories } from \"../../engine/registerComponents\";\nimport { WithControls } from \"../../engine/components/controllable\";\n\nexport function createCharacter(\n  system:   ISystemManager,\n  options:  CharacterModelArgs,\n): IEntity {\n  const entity = system.registerEntity();\n\n  registerComponentFactories(system, entity, options, [\n    nameableFactory,\n    killableFactory,\n    withPositionFactory,\n    withGeometryFactory,\n    withTextureFactory,\n    combatableFactory,\n    isCollidableFactory,\n    withCollisionsFactory,\n    withBoundaryFactory,\n    withPlayerControlsFactory,\n    withHomePositionFactory,\n  ]);\n\n  return entity;\n}\n\nexport type CharacterModelArgs =\n  WithName          &\n  WithHealth        &\n  WithPosition      &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithHomePosition  &\n  WithPlayerControls;\n\nexport type CharacterModel =\n  WithName          &\n  WithHealthState   &\n  WithPositionState &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithHomePosition  &\n  WithPlayerControls;\n","import { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { createProjectile } from \"../Domain/projectile\";\n\nexport function createBullet(\n  system: ISystemManager,\n  name: string,\n  x: number = -100,\n  speed: number = 8,\n  collisionGroup: string = 'friendly',\n) {\n\n  const entity = createProjectile(system, {\n    name,\n\n    momentum: {\n      direction: {\n        x: 0,\n        y: -1,\n      },\n      speed,\n    },\n\n    position: {\n      x: x,\n      y: 440,\n    },\n\n    geometry: {\n      width:  2,\n      height: 32,\n    },\n\n    collisionGroup,\n  });\n\n  return entity;\n}\n","import { IEntity, IComponent } from \"../../engine/types\";\nimport { ISystemManager } from \"../../engine/interfaces/ISystemManager\";\nimport { withPositionFactory,     WithPosition } from \"../../engine/components/withPosition\";\nimport { withMomentumFactory,     WithMomentum } from \"../../engine/components/withMomentum\";\nimport { withOffscreenFactory,    WithOffscreen } from \"../../engine/components/withOffscreen\";\nimport { withGeometryFactory,     WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withCollisionsFactory,   WithCollisionArgs, WithCollisions } from \"../../engine/components/withCollisions\";\nimport { nameableFactory,         WithName } from \"../../engine/components/nameable\";\nimport { registerComponentFactories } from \"../../engine/registerComponents\";\n\n\nexport function createProjectile(\n  system:   ISystemManager,\n  options:  ProjectileBaseArgs,\n): IEntity {\n  const entity = system.registerEntity();\n\n  registerComponentFactories(system, entity, options, [\n    nameableFactory,\n    withPositionFactory,\n    withGeometryFactory,\n    withMomentumFactory,\n    withCollisionsFactory,\n    withOffscreenFactory,\n  ]);\n\n  return entity;\n}\n\nexport type ProjectileBaseArgs =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisionArgs   &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileBase =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisions      &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileModel = \n  IComponent &\n  ProjectileBase;\n","import * as React from 'react';\nimport './styles/App.style.css';\nimport './styles/FontGlow.style.css';\n\nimport { DevScreen } from './Development/Dev';\n\nimport { Intro } from './Containers/Intro';\nimport { Menu } from './Containers/Menu';\nimport { Game } from './Containers/Game';\nimport { Outro } from './Containers/Outro';\n\nimport { CharacterModel } from '../game/Domain/character';\nimport { ProjectileModel } from '../game/Domain/projectile';\n\nimport { createPlayer } from '../game/factories/player';\nimport { createBullet } from '../game/factories/bullet';\n\nimport { ON_START_GAME, ON_START_ENGINE, ON_STOP_ENGINE } from '../events';\nimport { keys } from '../engine/utils';\nimport { SfxLibrary, SongLibrary } from '../game/catalogue';\nimport { ICurrentGameState, IGameState } from '../game/types';\nimport { Screens } from './Screens';\nimport { ISystemManager } from '../engine/interfaces/ISystemManager';\nimport { IEntity } from '../engine/types';\n\ninterface Props {\n  system: ISystemManager\n}\n\nclass App extends React.PureComponent<Props, IGameState> {\n  private handler: number | undefined;\n  private system: ISystemManager;\n\n  private player:  IEntity\n  private bullet1: IEntity\n  private bullet2: IEntity\n\n  constructor(props: Props) {\n    super(props);\n\n    const { system } = props;\n    this.system  = system;\n\n    this.player  = createPlayer(system, 'Odin');\n    this.bullet1 = createBullet(system, 'Bullet of Destiny');\n    this.bullet2 = createBullet(system, 'Bullet of Greater Truth');\n\n    this.state = {\n      epoch:   system.epoch,\n      player:  system.getEntityModel<CharacterModel>(this.player),\n      bullet1: system.getEntityModel<ProjectileModel>(this.bullet1),\n      bullet2: system.getEntityModel<ProjectileModel>(this.bullet2),\n      final:   undefined,\n      screen:  'intro' as Screens,\n      system,\n    }\n\n    this.gameAudioInitialize();\n\n    system.events.registerListener(ON_START_GAME,    this.startNewGame);\n    system.events.registerListener(ON_START_ENGINE,  this.start);\n    system.events.registerListener(ON_STOP_ENGINE,   this.stop);\n  }\n\n  componentDidMount() {\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  componentWillUnmount() {\n    this.gameAudioCleanup();\n\n    this.system.events.unRegisterListener(ON_START_GAME,    this.startNewGame)\n    this.system.events.unRegisterListener(ON_START_ENGINE,  this.start);\n    this.system.events.unRegisterListener(ON_STOP_ENGINE,   this.stop);\n\n    this.stop();\n\n    delete this.handler;\n  }\n\n  gameAudioInitialize = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      this.system.audio.registerSong(`${key}`, { ...SongLibrary[key], volume: 0.6 })\n    });\n\n    keys(SfxLibrary).forEach((key: string | number) => {\n      this.system.audio.registerSound(`${key}`, { ...SfxLibrary[key], volume: 0.3 })\n    });\n  }\n\n  gameAudioCleanup = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      this.system.audio.unRegisterSong(`${key}`)\n    });\n\n    keys(SfxLibrary).forEach((key: string | number) => {\n      this.system.audio.unRegisterSound(`${key}`)\n    });\n  }\n\n  moUntWOrld = () => {\n    this.setState({ epoch: this.system.epoch });\n  }\n\n  tick = () => {\n    this.system.step();\n\n    this.setState(_ => ({\n      epoch:   this.system.epoch,\n      player:  this.system.getEntityModel(this.player),\n      bullet1: this.system.getEntityModel<ProjectileModel>(this.bullet1),\n      bullet2: this.system.getEntityModel<ProjectileModel>(this.bullet2),\n    }));\n  }\n\n  startNewGame = () => {\n    this.gotoScreen('game')\n  }\n\n  start = () => {\n    this.stop();\n\n    this._update();\n  }\n\n  _update = () => {\n    this.handler = requestAnimationFrame(this._update);\n\n    this.tick();\n  }\n\n  stop = () => {\n    if (this.handler) cancelAnimationFrame(this.handler);\n  }\n\n  save = () => {\n    this.system.storage.saveGame();\n  }\n\n  load = () => {\n    this.stop();\n\n    this.system.storage.loadGame();\n\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  restart = () => {\n    this.gotoScreen('menu');\n  }\n\n  gotoScreen = (screen: Screens) => {\n    this.setState({ screen});\n  }\n\n  setFinalScore = (score: ICurrentGameState) => {\n    this.setState(state => ({ ...state, final: score }));\n  }\n\n  render() {\n    return (\n      <div className=\"App container with-title is-center is-dark\">\n        <label className=\"title\">Galaga.ts</label>\n\n        {this.state.screen === 'intro'\n          ? <Intro\n              onPlayerInput={this.startNewGame}\n              nav={this.gotoScreen}\n              {...this.state}\n            />\n          : null\n        }\n        {this.state.screen === 'menu'\n          ? <Menu\n              system={this.system}\n              {...this.state}\n            />\n          : null\n        }\n        {this.state.screen === 'game'\n          ? <Game\n              system={this.system}\n              onRestart={this.restart}\n              onFinalScore={this.setFinalScore}\n              nav={this.gotoScreen}\n              {...this.state}\n            />\n          : null\n        }\n        {this.state.screen === 'end'\n          ? <Outro\n              system={this.system}\n              nav={this.gotoScreen}\n\n              {...this.state}\n            />\n          : null\n        }\n\n        <DevScreen\n          system={this.system}\n          onStart={this.start}\n          onStop={this.stop}\n          onTick={this.tick}\n          onSave={this.save}\n          onLoad={this.load}\n          nav={this.gotoScreen}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './app/styles/index.css';\n\nimport { system } from './game';\nimport App from './app/App';\n\nReactDOM.render(<App system={system} />, document.getElementById('root'));\n"],"sourceRoot":""}