(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/sfx_wpn_laser1.7c857ee1.wav"},,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAjklEQVRYR+2WQQrAIAwENz9p/v+o9CeWQANSvLiUBsp6FExmJyIampc194cAZEAGZOA/BiJiuPt2oO0D9XSzDZ9PPw2QhRLicMcZASZ91qAAKv0ARjZPCAOMsUIBzGMoA7nHWKAAKmmN4Fb5rYEZgk1P34HVJ4aZ/6sA7M+KugNss9U5AciADMiADLQbuADnnjshOGarxwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVRYR+2UwQ3EMAgEoZPQf1G4E59AwUK+ewCXyB/8ipSEXQYvCIcPHtaHNtAEmsAjBJh5ElGpVumnfwT3vZMyMCdMKYAIaCa8GXkv7zLLLfWxFPYiu4nXDXwJwk0Ecl17QmECO2orYuO4iGAwg1zGCTAxaCpswASl+OpAnlyFqGiJgP9JLyOCdnxdpCZMPJuQMAHDKgKCe+tC62TFNVGZyKwx3HEcg8HMrPkno5gyoN0Lcnf8TrCY2q6INJcy8IuAreAK/voIXMyqwivGEUxvflMawZOG2kATaAJN4DiBDzrKfCHGS/waAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABAklEQVRYR+2VSw4DIQhA4Sbj/Q/lUWyw0jCIBWya2dhNMz95Pj4iPPzDh+PDATgGjgHXQK21lVKm9/T9BtAQ8l3lAsg5IYO2Bg0RUN7bgUoBEAzvVO6YYOgZAdH/ypo19EIAt513hjcJB+yXw0g2FSEAi9xLQdRCCsCqAUt5NHhPm3cYkdLx4pTfVdGxHW/tEAAvEln0U6BGh6xgXAPywxXEt1b0LLgAOu+cNBo6mVz/bICDZSxEAF0DFjkvbBUhF2ykZsJFqANNgcUQ+gsAW6DA11X6pTUFvYLbHsW6FXn2axAdIJIGtwZuh844cnW/Zw8gCeoC7GjNfHMAjoFj4HEDL4r0ziE3SigHAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABW0lEQVRYR91WWw7EIAjEm9T7H8rexA1NbCzyGNwmm2z/2iIMwzha6MdP+XF9ggB0ol4Ii802BAHIJs3EpwH0Tp0LlPJkpLXWa61Lvoi9NACtO1k8KjrnCAFYnXES7Z8Xr4EPAYxFSGIkRoJQAVhzHotnineKqiOIEjGoIbxoxhmA7ggGKI0R/ncc9WrmBjaBRLcirIEooWTQYlR+fw3ArQ/hE9FoHwDkbPn9bI00g/EYmfWiCdf1gRlxJDZOhAjOY8EcgdZFRKcEFOnmErAVNAAgRT17jjzlAWC3GNKpNU6bAecO4G0xBiNFu6UBpCsrJsNkqAHr1NOKS+EiQMzDaNird9ZfdlwrK/nKo+5/4wIzGkg5IbozEP+AACzO2Kmf5+qMu56x+ADiatYFZfd2lBqBFJ5WVGPD21EwAETRlhBfAWBRv+P/7mn4jQHtrIVHgCRHx/S/DCAsyZgPlF0MMIC1WsUAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABEElEQVRYR81XWxLDIAiEo+T+h9Kb2DEdM2pFF3yk/Q3iviAN08QvEAUm4okW+OEQKDBj9c65cF2XCCx//hSNDmkAaBQpUKKXjMBKAFrnpvzTMJVquwBiyLxz1PMzNkaVa4F4TYEEeisAJCvwFCT5kKaabGxVIAci5eQYANMUaKQs2CpWtKjAij2PEIAsmJlzCUQiCAFAmFhrOLKLh9E3neYiZGR/FNjpfSTrfbnaj1rQytJRAH/1Mkpgmgog4dGEsVf7igV5Fvgk2+MZQMiZLFi5mk0AVgXw3sCtZrV0iJRWUGoFRmDq5/Vqr+27AfT2/0q/k0rFGFqls/4Dqu97LNjBNL9Msu5rgeLLd4VieY8P2WaPIboXUNsAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAs0lEQVRYR+2XSw6AMAgF4SZy/0P1KBiMIDV+YuKzLnCljSnTwZgHU7qUSJmI8xr6viuGArjaNwDsJT8twsLZ/h0AayNlsR683obFwsH+XaHWmorI68XNrBswCOKtxmcA+WPOBx0CYDAOMQzAISD9fvLvKIAyUAbKQBkoA2XgPwZQkfwuG/SpGJCG9wARTtdaCwByJrDslyFksnwusRQAyJlgP/7Zs88e0QLkTHD1HRTAcAMzqEdXu+U9kUQAAAAASUVORK5CYII="},function(e,t,n){e.exports=n.p+"static/media/sfx_exp_long1.e65a7e8b.wav"},,function(e,t,n){},,,,,function(e,t,n){e.exports=n.p+"static/media/game-menu.277a07d7.mp3"},function(e,t,n){e.exports=n.p+"static/media/game-main.62197df4.mp3"},function(e,t,n){e.exports=n.p+"static/media/game-end.4f698af1.mp3"},function(e,t,n){e.exports=n.p+"static/media/game-main-summary.430d3f4f.mp3"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_fanfare1.aae78736.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_powerup3.da47f034.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_fanfare3.25f989ff.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_powerup2.35e9b099.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_interaction1.60988248.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_pause1_in.b7b7a7b9.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_sounds_pause1_out.959daf2a.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_wpn_cannon1.75bcd782.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_exp_short_soft5.c6e20b31.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_exp_short_hard12.ffa98eb5.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_exp_cluster1.7a7460e6.wav"},function(e,t,n){e.exports=n.p+"static/media/sfx_exp_odd1.6d3db534.wav"},,,,function(e,t,n){e.exports=n(86)},,,,,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/ship.8745c391.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABvElEQVRYR+1XW5LDIAwjN1nufyj2Jt6BYlYYv5LpTH/an6YktYQsY+cqH/5c78RvrVGt9VbMWw8PstRofF8CqK/3Neu+sdM8ARkYf8/r9vtCGSowoUDimIAA7jIvEFaEd26p4pDwCcAuqBS6SokJT7BF9EdJFxAKCdBVO2oaeIiCZINU2IGp0QI3gpiqcNo0s4p0uASW0+8SQG/I6xQBatQd3d3s1balwJECRwldAahpJiKN3EF4LeMRayOuuaLdZwhEhrQVUGTDYJoCrin5jBB+OghEu2a5nxBYsYHEqcC8qe2G1xAc0+Caktp//zAJYEOZkknZuwIZAgcZJfbI8ubuBIGofWOK1OqwPMBnNwNwX7eMZxHxCGj+eingnNde3j0S2cNIJyC6YCR7pAbftxUopWAKKrRQWW6aAWUlyAOKgV0CKxXz39wJGVDWP1cDVoX2TA+3AUcH0TbTYUtWdPaGFPTOIJYqQwA5Rq+HRnjWCxBMm3K1AVXOg8mZIBzJeCjxjmZZytI3Xn+JZz1lKt5ePsBU2yCKKmrqzPsxAQ7kvXDgDNhdj+8HgXfyBBImfGLctxJIcDwe+RL4A6hvfDDjUhdcAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACBUlEQVRYR8VXQXLEIAyDnyz/fxT7EzpmMRXCBmdmO82lmSTFsizZ3pz++cozfqut3+fy++yvwEGsPZi8PIFAoHrPwE9nUKJ2th4bGNBiB4C3lFpOaWeYwPp0jyyWgxhALnm+t0AzWwaz53ojlXDYElQO9UoxWKq1tlJsbcVLMILUd0r9sFs5gGoBoBVjIDHFKxNWUGSA2Qi4agNwFQ+A6Gy8gl51nOX3ASNbCWhdQivS/Col5VY/PYXFSXo5a0ApHCXQIFpHDCqfKhBhpeULiMGI3Yg0TchAxaeK5r/yLxMgluXEQi7ZB0CCYvpntoN+LkPXhmFRtmQYgBy2ZDgoFNG+a/1YE33P4ryKENUV6fdAOQtzgrk0qC6xTdVGcBGUZImXUi6KZwZUD5tFQ62YUbfaGADTLQG79VJa7OjpABM5u0BrOvyPQruJsNtSdWA5YZx97wPQC9QJGJxLqEJdSnPQwmMAFv0WM3P4sB1xhG8idMavtlNsRpYgl2dGYKuN31cyZyZMisHvAnB5bu0KtK7Fx3Fw6M3PDsI7u0DeehMsMvsNwfEQu9twNIylb0dA4fTU+9Exn61kQoJutZYwuRzWJgQA+ufOqm5qYNuEsYVac8J7T0Ct5fTugqfi46HG/f/oAoemBYPx28DEeDoLWIzZ0MoqAjbA3jMAXwp67wMB5N/65Afslf0wgQfXLAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACd0lEQVRYR51XQYIDIQjTn9T/P8r+ZHaxYEMMs+320tZhAEOC2Ns3n2tey7yPvr7jP/qwZ7we9hzrmtfb0Y2RzFEFutsM+7ck++ivBGI3yqhyWiUQ6330OV+IjYc7wXc8Vk4ggoHhfL4Wx6hhRxsLarb4vZOADV6tGfyAgJXUF7G+5jwc7kSueUXQyBltELSdDKCAcd4ICKhtF48x2nPO9DQl9GjtSIbWFnpM4KjKEdcN2WnAiOuWnH04QWW7kyCeZQQAWoQOg25CeeZcItwQopdQMKOKhEfNBcSMmkrWgvdrrvIwP1AVqaF8Gvxw6Kw/ElP8ID7kjgba5TreBf0kIdv12qCpAWR+m0AFNdc2Gk7IdDcgQGYncIcAluAgUGuNm0wkGOvpf+w4mhKUAwmZOuHuaGgMjiwABlO/EQ1GBJtW9IWjFUedZDLejlW7jVZdlUMFX2pMdfYTagUA0iTyhP79oEmOi2dVcH0aij6PUKrWfEfKePZVI+Ig+yQUHNgHFEnm4EIcRtAFcwnoDIgSlF0P+IBJcOANP88E5TxAg0Q6B4iELMNEQFBStOVlT0PJSUKD2YeQv3bPz0Omav2YivroPheQOSgB2zHzQGlcSTF87EHWFjyGliEhUE06mABPTNiK1/bUMOJrH5UAAygZKjRK7ZcqiDeKWZ/ZXSViblRfSIMMTEUbATWQJna4Oiq4JfFoTkhE9BfuLyaIBsqTegDCHW1cJbRlCA+PqVgiQZeQSqab8az3COjQI0klCVWm8h7oiuExPUmOoODZIXHAdVnfFQo5yalZ3DUD3fNiUlwayjreKYbgLn3sy+l/g6PnT6/jnM3vez/v0LVIfdTdDwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFUlEQVRYR8VXQY7EIAyDnwz/fxTzE1ahBJnghLLSaudSTVsSx3EMzemff7nnb7X1ay7P/z/81frkKuXJtSRsKbVs7iEWXCzvfmtN5WOASzFeIaTQrWKLUAHI/Z4spVS/O0Va0WQUQChYrFwjUMp7slKyXnvSQV0PMqrG92xwy5bHrNtzlhxBzeeDVmFlYWGUiHGYtF61YKl+MPMpJeVWl5jYGgVj11oQR9VbmjGAMjLpb7UxENFQLQA2uiCgJpPKRf3eT/TR2wHXaLypDyBtJ0tAFuRdBTj1AmPK2uFqQGn1lG5BMoY8ECjWFQChXBlgE+CNqV2DIzoNjDmhWLKOU9QGD4wnUAXAnHYXIZgMqwSrEZB9HMG+t9ZYqzai2jSAFEUz7DFk53/bK0IArbaWn4retAAZwrhsLXNJWfNahCwZc0irg6krpxUUgJpI5HoqqMgpl1F+BcDsehiAjaM1Kc8bepwbAMjA5vewy1mAnhnheNtRnC1Y9gHHD6ztMoYiE2K2/nozWvQQnIwWsWohSj85rh23Y6WPofd2Rq9tRwbkhe1MCAdJfBYJzrol/rcg3BZ4mugBCChv5K6PZMoCO5Tqqbi/M07G3eHgXMhGLgJBzwPo52ihrAX2uev9zvfC1YcJE5F7jyQMt+PTVxEKlO0LC5Dg68iK/DyGEBl939vdrljadsNg9UnNt4n1/SsGfpskWvcD7otZP/TRmLkAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAu0lEQVRYR+2X3Q2AIAyEj1HYzg2cwQ3crm6CQUFb42/i6Uv7BiHl61GSa4CORhL6GMweeWEvYwGc5F0B8qEaDBUO8hsAaYHYAZRnaCTt5TdPkIAUAE4PFAUmiLj22XcAqpl1ob8AZJYK8RuAgiB/9Iv0nIZ7UJMDuAKugCvgCrgCroB1xQw3fNsPsGaCLUC156XYWQHiTJC9n2YYRGbrX2IBoM4E2/Evr40CyqU+cFOvHF2akDqUnKA6wAgOWExlxHkIvQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAAwklEQVRIS+2UUQ7EIAhE4Si9nT3R9nYehQ0IDau1YrPxq8SkPzjPGUgRFhQuYMALmUr5Pq6UCY7tp4cICLGK+aLPv2I8ExVgcZEmAPsKbABg2BjCXSkTHVt5nEH4cspQO73KMQZhbXZSVRNbZ1IxCEfCoI+6YRd7LpLVzJ45UYBALDKLyhQHoPF2OSEqE5FCPu4Bd476EC+gsfi5nJvl8+k4ikH0cuNEN+/k/AOiG0wSlVUgsth2Tf1E2uYXMhXgkri+xNVLFbLUHXYAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAm0lEQVQ4T+2UQRLDIAhF/z+Kh0kPnRwmRyFDFWvRatO6yCJu0AHf8AElJi5OZOGGxWoKIARotlfjumayCxiIZCuY85fwNswiFKrZrRA+UrMU5vz52EzbLjBQQTlYgYXP322PxlTYU1uUI1t4qVr2uE/yv8usiKpkdto5fAF/w96657v5S2Yl0MM/8boyTWKescEXM6zZmS/qurAD5VJKFMb8mZ4AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAjUlEQVQ4T9XUwQ2AMAgFUBil+w/VUb5BxRCEFhMucqz15ResTI3FjRb9HQOBeH+K2jE7MNCEDIgxCDzPWTGNNED6wEI68R24xCSRFFjSXaSAWboYkx6ZstizHAxkiwmkpenu5r3efWMu1fKGuHQ5phst7tdKmO9H9J0Fa3GyNixqUscN+Pp7qt3NotqKHVslNhRW8lxOAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t){e.exports="data:image/png;base64,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"},,,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,,,,function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(24),s=(n(52),n(4)),r=n(3),a=n(6),u=n(11),c=n(9),l=n(12),d=n(88),m=n(89),p=(n(55),n(57),n(2)),f=(n(59),n(87)),v=n(27),h=n.n(v);function g(e){return function(t,n){var i=t.components.filter(function(t){return i=n,t.id===i.id&&function(e,t){return void 0!==t[e]}(e,t.state);var i});return 0===i.length?null:E(i)}}function y(e){return function(t,n,i){var o=e(t,n);if(null===o)return o;o.state=i}}function A(e){return e}function E(e){return e[0]}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return{next:function(){return e++}}}};function b(e){return Object.keys(e)}function w(e){var t=!1;return function(){if(!t)return t=!0,e.apply(void 0,arguments)}}var R=function(e,t,n){return n<e?e:n>t?t:n},S=function(e){return e&&void 0!==e.state};function O(){var e,t,n,i,o,s=0;return e=Math.random,function(){if(s)o=n*i;else{do{t=2*e()-1,n=2*e()-1,i=t*t+n*n}while(i>=1);i=Math.sqrt(-2*Math.log(i)/i),o=t*i}return s^=1,o}}function F(e,t){var n,i=!1;return function(){return i||(n=e.apply(void 0,arguments),i=!0,setTimeout(function(){i=!1},t)),n}}var N,U={top:0,left:0,bottom:600,right:800};function P(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:"name",entityId:t.id,state:{name:n.name},update:function(){return null}}))}}!function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.PauseBreak=19]="PauseBreak",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Zero=48]="Zero",e[e.ClosedParen=48]="ClosedParen",e[e.One=49]="One",e[e.ExclamationMark=49]="ExclamationMark",e[e.Two=50]="Two",e[e.AtSign=50]="AtSign",e[e.Three=51]="Three",e[e.PoundSign=51]="PoundSign",e[e.Hash=51]="Hash",e[e.Four=52]="Four",e[e.DollarSign=52]="DollarSign",e[e.Five=53]="Five",e[e.PercentSign=53]="PercentSign",e[e.Six=54]="Six",e[e.Caret=54]="Caret",e[e.Hat=54]="Hat",e[e.Seven=55]="Seven",e[e.Ampersand=55]="Ampersand",e[e.Eight=56]="Eight",e[e.Star=56]="Star",e[e.Asterik=56]="Asterik",e[e.Nine=57]="Nine",e[e.OpenParen=57]="OpenParen",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.LeftWindowKey=91]="LeftWindowKey",e[e.RightWindowKey=92]="RightWindowKey",e[e.SelectKey=93]="SelectKey",e[e.Numpad0=96]="Numpad0",e[e.Numpad1=97]="Numpad1",e[e.Numpad2=98]="Numpad2",e[e.Numpad3=99]="Numpad3",e[e.Numpad4=100]="Numpad4",e[e.Numpad5=101]="Numpad5",e[e.Numpad6=102]="Numpad6",e[e.Numpad7=103]="Numpad7",e[e.Numpad8=104]="Numpad8",e[e.Numpad9=105]="Numpad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.DecimalPoint=110]="DecimalPoint",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.SemiColon=186]="SemiColon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.UnderScore=189]="UnderScore",e[e.PlusSign=187]="PlusSign",e[e.ForwardSlash=191]="ForwardSlash",e[e.Tilde=192]="Tilde",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.ClosedBracket=221]="ClosedBracket",e[e.Quote=222]="Quote"}(N||(N={}));var L="game:start",j="game:lose",I="level:load",k="level:begin",x="level:finished",B="attack:player",M="collision:begin",K="revive:player",Q="dead",G="dead:enemy",D="dead:player",T="enemy:free",V="engine:start",W="engine:stop",H="health";function Y(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:H,entityId:t.id,state:{health:n.health,isDead:n.isDead},update:function(e,n){if(!n.state.health.immortal){var o=n.state.isDead,s=!(n.state.health.value>0);n.state.isDead=s,!o&&s&&i.onChange(Q,n,t)}}}))}}y(g(H));var X="geometry";function q(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:X,state:{geometry:{width:n.geometry.width,height:n.geometry.height}},update:function(e,t){return null}}))}}var J={direction:{x:0,y:0},moving:!0,speed:{x:0,y:2.65},disabled:!1,jitter:400};function z(e){return function(t,n,i){var o,s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=n.controls||J,u=a.jitter||J.jitter,c=function(e){u=e||J.jitter,o=F(O(),u),s=F(O(),u)};return c(u),e.registerComponent(A({id:r,entityId:t.id,name:"controls",state:{direction:a.direction||{x:0,y:0},moving:a.moving||!0,speed:a.speed||{x:2,y:1.65},disabled:a.disabled||!1,jitter:u},update:function(e,t){t.state.jitter!==u&&c(u),t.state.disabled||function(e,t,n,i,o,s){if(t.state.disabled)return;var r=o(),a=s();t.state.direction.x=R(-1,1,r),t.state.direction.y=R(-1,1,a);var u=t.state.direction,c=u.x,l=u.y;t.state.moving=0!==c||0!==l}(0,t,0,0,o,s)}}))}}var Z="collidable";function _(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:Z,state:{collidable:n.collidable||!0,collisionGroup:n.collisionGroup},update:function(e,t){return null}}))}}y(g(Z));var $="loot";function ee(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:$,state:{loot:n.loot},update:function(e,t){return null}}))}}y(g($));var te="boundary";function ne(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:te,state:{boundary:n.boundary||U},update:function(e,n){var i=e.getEntityComponent(t,"geometry"),o=e.getEntityComponent(t,"position");if(S(i)){var s=i.state.geometry,r=s.width,a=s.height,u=n.state.boundary,c=R(u.left,u.right-r,o.state.position.x),l=R(u.top,u.bottom-a,o.state.position.y);o.state.position.x=c,o.state.position.y=l}}}))}}y(g(te));var ie="texture";function oe(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:ie,state:{texture:n.texture},update:function(e,t){return null}}))}}var se=.1,re=4;function ae(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:"wiggle",state:{wiggling:n.wiggling,wiggleState:{counter:0,increment:1}},update:function(e,n){!function(e,t,n,i){if(!t.state.wiggling)return;var o=t.state.wiggleState,s=o.counter,r=o.increment;s==re&&(t.state.wiggleState.increment=-1);s==-re&&(t.state.wiggleState.increment=1);t.state.wiggleState.counter+=r;var a=n.getEntityComponent(e,"position");S(a)&&(a.state.position.x+=s*se)}(t,n,e)}}))}}var ue="position";function ce(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:ue,entityId:t.id,state:{position:Object(s.a)({},n.position),center:Object(s.a)({},n.position),controllable:n.controllable||!0},update:function(e,n){!function(e,t,n,i){if(!n.state.controllable)return;var o=t.getEntityComponent(e,"controls");if(!n.state.controllable||!o||!o.state.moving)return;var s=o.state,r=s.direction,a=s.speed;n.state.position.x+=r.x*a.x,n.state.position.y+=r.y*a.y;var u=t.getEntityComponent(e,"geometry");if(u){var c=u.state.geometry,l=c.width,d=c.height;n.state.center.x=n.state.position.x-l/2,n.state.center.y=n.state.position.y-d/2}}(t,e,n)}}))}}y(g(ue));var le="homePosition";function de(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:le,entityId:t.id,state:{homePosition:Object(s.a)({},n.homePosition),goHome:n.goHome},update:function(e,n){!function(e,t,n,i){var o=t.getEntityComponent(e,"position");if(!o||!o.state)return;var s=n.state.homePosition,r=s.x,a=s.y,u=r-o.state.position.x,c=a-o.state.position.y;n.state.goHome&&(o.state.position.x=Math.abs(u)<1?r:o.state.position.x+u/me,o.state.position.y=Math.abs(c)<1?a:o.state.position.y+c/me);n.state.isHome=0===u&&0===c}(t,e,n)}}))}}var me=66*1.1;var pe="worldwrap";function fe(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:pe,entityId:t.id,state:{},update:function(e,n){!function(e,t,n,i){var o=t.getEntityComponent(e,"position"),s=t.getEntityComponent(e,"boundary"),r=t.getEntityComponent(e,"geometry");if(S(s)&&S(r)){var a=r.state.geometry,u=a.width,c=a.height,l=s.state.boundary,d=o.state.position,m=d.x,p=d.y;o.state.position.x=m<l.left?l.right-u:m>l.right?l.left:m,o.state.position.y=p<l.top?l.bottom-c:p>l.bottom?l.top:p}}(t,e)}}))}}function ve(e,t,n,i,o,s){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"hostile";return function(e,t){var n=P(e),i=Y(e),o=q(e),s=ne(e),r=ae(e),a=z(e),u=ce(e),c=fe(e),l=de(e),d=_(e),m=oe(e),p=ee(e),f=e.registerEntity();return e.registerComponent(n(f,t,e.events)),e.registerComponent(i(f,t,e.events)),e.registerComponent(s(f,t,e.events)),e.registerComponent(r(f,t,e.events)),e.registerComponent(u(f,t,e.events)),e.registerComponent(a(f,t,e.events)),e.registerComponent(c(f,t,e.events)),e.registerComponent(l(f,t,e.events)),e.registerComponent(o(f,t,e.events)),e.registerComponent(m(f,t,e.events)),e.registerComponent(d(f,t,e.events)),e.registerComponent(p(f,t,e.events)),f}(e,{name:n,texture:t,wiggling:!0,controls:{disabled:!0},health:{value:1},position:i,homePosition:o||i,geometry:s||{width:64,height:64},loot:{points:10},boundary:U,collisionGroup:r})}var he,ge,ye,Ae=n(14),Ee=n(5),Ce=n(28),be=n.n(Ce),we=n(29),Re=n.n(we),Se=n(30),Oe=n.n(Se),Fe=n(31),Ne=n.n(Fe),Ue=n(32),Pe=n.n(Ue),Le=n(33),je=n.n(Le),Ie=n(34),ke=n.n(Ie),xe=n(35),Be=n.n(xe),Me=n(36),Ke=n.n(Me),Qe=n(37),Ge=n.n(Qe),De=n(38),Te=n.n(De),Ve=function(e,t){return Object(s.a)({src:[e]},t)};!function(e){e[e.Player=0]="Player",e[e.Bug=1]="Bug",e[e.CrabBug=2]="CrabBug",e[e.HelmetBug=3]="HelmetBug",e[e.PincerBug=4]="PincerBug",e[e.SonicBug=5]="SonicBug"}(ye||(ye={}));var We={NEW_GAME:"newgame",GAMEOVER:"gameover",YOU_WIN:"youwin",LEVEL_WIN:"levelwin",PAUSE:"pause",UNPAUSE:"unpause",NEXT_LEVEL:"nextlevel"},He={MENU:"game-menu",GAME:"game-main",END:"game-end",SUMMARY:"game-main-summary"},Ye=(he={},Object(Ee.a)(he,He.MENU,Ve(be.a,{volume:.8})),Object(Ee.a)(he,He.GAME,Ve(Re.a,{volume:.4})),Object(Ee.a)(he,He.END,Ve(Oe.a,{volume:.8})),Object(Ee.a)(he,He.SUMMARY,Ve(Ne.a,{volume:.8})),he),Xe=(ge={},Object(Ee.a)(ge,We.GAMEOVER,Ve(Pe.a)),Object(Ee.a)(ge,We.LEVEL_WIN,Ve(ke.a)),Object(Ee.a)(ge,We.NEXT_LEVEL,Ve(Be.a)),Object(Ee.a)(ge,We.YOU_WIN,Ve(je.a)),Object(Ee.a)(ge,We.NEW_GAME,Ve(Ke.a)),Object(Ee.a)(ge,We.PAUSE,Ve(Ge.a)),Object(Ee.a)(ge,We.UNPAUSE,Ve(Te.a)),ge),qe=function(e){return function(t){t.entity;var n=t.system,o=Object(Ae.a)(t,["entity","system"]),s=n.getEntityModel(t.entity);return i.createElement(e,Object.assign({},o,{model:s,system:n}))}},Je=function(e){var t=Object(i.useState)(e.animations),n=Object(p.a)(t,2),o=n[0],s=(n[1],Object(i.useState)(e.currentFrame||function(e){return e.animations[e.currentState][0].frame}(e))),r=Object(p.a)(s,2),a=r[0],u=r[1],c=Object(i.useState)(e.currentState),l=Object(p.a)(c,2),d=l[0],m=l[1],f=Object(i.useState)(""),v=Object(p.a)(f,2),h=v[0],g=v[1],y=Object(i.useState)([]),A=Object(p.a)(y,2),E=A[0],C=A[1];function b(e,t){E.push(setTimeout(function(){return u(e)},t))}if(h!==d){var w=0;g(d),o[d].forEach(function(e){var t=e.frame,n=e.duration;b(t,w),w+=n});var R=setTimeout(function(){e.onFinished(d)},w);C(E.concat(R))}return{currentFrame:a,setCurrentState:m}};var ze=function(e,t){return{frame:e,duration:t}};var Ze=function(e){var t=function(t,n){var i=_e(n.id,"death");e.system.audio.playSound(i)},n=function(t){var n=_e(t.id,"shoot");e.system.audio.playSound(n)};Object(i.useEffect)(function(){return e.system.events.registerListener(Q,t),e.system.events.registerListener("attack:*",n),b(e.sounds).map(function(t){var n=_e(e.entity.id,"".concat(t));e.system.audio.registerSound(n,{src:[e.sounds[t]],volume:.2})}),function(){e.system.events.unRegisterListener(Q,t),e.system.events.unRegisterListener("attack:*",n),b(e.sounds).map(function(t){var n=_e(e.entity.id,"".concat(t));e.system.audio.unRegisterSound(n)})}},[])};function _e(e,t){return"entity-".concat(e,":").concat(t)}var $e=function(e){var t=Object(i.useState)(e.dead),n=Object(p.a)(t,2),o=n[0],s=n[1],r=function(t){o||(e.deathEvent===D&&s(!0),e.deathEvent===G&&-1!==t.state.collisions.indexOf(e.entity.id)&&s(!0))},a=function(e){s(!1)};return Object(i.useEffect)(function(){return e.system.events.registerListener(K,a),e.system.events.registerListener(e.deathEvent,r),function(){e.system.events.unRegisterListener(K,a),e.system.events.unRegisterListener(e.deathEvent,r)}},[]),{dead:o}};function et(e){return function(t){var n=i.useState(function(){return!1}),o=Object(p.a)(n,2),s=o[0],r=o[1],a=i.useState(function(){return!1}),u=Object(p.a)(a,2),c=u[0],l=u[1],d=Je({animations:e.animations,currentState:e.currentState,onFinished:function(e){"death"===e&&r(!0)}}),m=d.currentFrame,f=d.setCurrentState,v=$e({entity:t.model,system:t.system,deathEvent:e.deathEvent});Ze({entity:t.model,system:t.system,sounds:e.sounds});var h=w(function(){f("death"),l(!0)});v.dead&&!c&&h(),c&&!v.dead&&(f("normal"),l(!1),setTimeout(function(){r(!1)},100),setTimeout(function(){r(!0)},300),setTimeout(function(){r(!1)},400),setTimeout(function(){r(!0)},600),setTimeout(function(){r(!1)},700),setTimeout(function(){r(!0)},900),setTimeout(function(){r(!1)},1100),setTimeout(function(){r(!0)},1400),setTimeout(function(){r(!1)},1500));var g={position:"absolute",backgroundImage:"url(".concat(m,")"),backgroundSize:"contain",backgroundPosition:"center",width:"64px",height:"64px",left:s?-9999:t.model.position.x,top:s?-9999:t.model.position.y,display:function(e){return e?"none":""}(s)};return i.createElement("div",{id:e.elementId,className:"sprite",style:g})}}var tt,nt=n(39),it=n.n(nt),ot=n(21),st=n.n(ot),rt=qe(et({elementId:"player",currentState:"normal",animations:{normal:[ze(n(61),0)],death:[ze(n(62),0),ze(n(63),100),ze(n(64),100),ze(n(65),100),ze(n(66),75)]},sounds:{shoot:it.a,death:st.a},deathEvent:D})),at=n(10),ut=n.n(at),ct=n(40),lt=n.n(ct),dt=et({elementId:"enemy",animations:{normal:[ze(n(67),0)],death:[ze(n(15),0),ze(n(16),100),ze(n(17),100),ze(n(18),100),ze(n(19),100),ze(n(20),75)]},sounds:{shoot:ut.a,death:lt.a},currentState:"normal",deathEvent:G}),mt=n(41),pt=n.n(mt),ft=et({elementId:"enemy",animations:{normal:[ze(n(68),0)],death:[ze(n(15),0),ze(n(16),100),ze(n(17),100),ze(n(18),100),ze(n(19),100),ze(n(20),75)]},sounds:{shoot:ut.a,death:pt.a},currentState:"normal",deathEvent:G}),vt=n(42),ht=n.n(vt),gt=et({elementId:"enemy",animations:{normal:[ze(n(69),0)],death:[ze(n(15),0),ze(n(16),100),ze(n(17),100),ze(n(18),100),ze(n(19),100),ze(n(20),75)]},sounds:{shoot:ut.a,death:ht.a},currentState:"normal",deathEvent:G}),yt=n(43),At=n.n(yt),Et=et({elementId:"enemy",animations:{normal:[ze(n(70),0)],death:[ze(n(15),0),ze(n(16),100),ze(n(17),100),ze(n(18),100),ze(n(19),100),ze(n(20),75)]},sounds:{shoot:ut.a,death:At.a},currentState:"normal",deathEvent:G}),Ct=et({elementId:"enemy",animations:{normal:[ze(n(71),0)],death:[ze(n(15),0),ze(n(16),100),ze(n(17),100),ze(n(18),100),ze(n(19),100),ze(n(20),75)]},sounds:{shoot:ut.a,death:st.a},currentState:"normal",deathEvent:G}),bt=(tt={},Object(Ee.a)(tt,ye.Player,rt),Object(Ee.a)(tt,ye.Bug,dt),Object(Ee.a)(tt,ye.CrabBug,ft),Object(Ee.a)(tt,ye.HelmetBug,gt),Object(Ee.a)(tt,ye.PincerBug,Et),Object(Ee.a)(tt,ye.SonicBug,Ct),tt),wt=function(e){var t=bt[e];return function(e){e.entity;var n=e.system,o=Object(Ae.a)(e,["entity","system"]),s=n.getEntityModel(e.entity);return i.createElement(t,Object.assign({},o,{model:s,system:n}))}};function Rt(e,t){var n=[],i=0,o=0,s=!0,r=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var l=u.value,d=!0,m=!1,p=void 0;try{for(var f,v=l[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){var h=f.value;if(0!==h){var g={width:64,height:64},y={x:i*g.width,y:o*g.height},A=ve(e,h,JSON.stringify(y),y,y,g);n.push({component:wt(h),entity:A})}i++}}catch(E){m=!0,p=E}finally{try{d||null==v.return||v.return()}finally{if(m)throw p}}i=0,o++}}catch(E){r=!0,a=E}finally{try{s||null==c.return||c.return()}finally{if(r)throw a}}return n}function St(e){return function(t){t.currentTarget.blur(),e(t)}}var Ot=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).lastLoop=(new Date).getMilliseconds(),n.count=1,n.fps=0,n.throttled=!1,n.state={value:0},n.countFps=function(){var e=(new Date).getMilliseconds();return n.lastLoop>e?(n.fps=n.count,n.count=1):n.count+=1,n.lastLoop=e,n.fps},n.loop=function(){n.handler=requestAnimationFrame(function(){n.setFps(n.countFps()),n.loop()})},n.setFps=function(e){n.throttled||(n.setState({value:e}),n.throttled=!0,n.handler=setTimeout(function(){n.throttled=!1},n.props.updateFrequency))},n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.setFps(this.countFps()),this.loop()}},{key:"componentWillUnmount",value:function(){this.handler&&cancelAnimationFrame(this.handler)}},{key:"render",value:function(){return i.createElement("div",{id:"fps"},"Fps: ",this.state.value)}}]),t}(i.Component);Ot.defaultProps={updateFrequency:500};var Ft=qe(function(e){return i.createElement("pre",null,(t=e.model,JSON.stringify(t,null,"  ")));var t}),Nt=function(e){var t=Object(i.useState)(0),n=Object(p.a)(t,2),o=n[0],s=n[1],r=Object(i.useState)(!1),a=Object(p.a)(r,2),u=a[0],c=a[1],l=Object(i.useState)(!1),d=Object(p.a)(l,2),m=d[0],v=d[1],g=function(){return v(!1)},y=function(){m||c(!u),g()};return i.createElement(h.a,null,i.createElement("div",{id:"devscreen",className:"container"},i.createElement("div",{id:"header"},i.createElement("span",{className:"float-left title",onMouseUp:y,onMouseDown:g,onMouseMove:function(){return v(!0)}},i.createElement("h3",null,"Devtools")),i.createElement("i",{id:"close-x",className:"icon close float-right",onClick:y})),i.createElement("div",{className:Pt(!u&&"hidden")},i.createElement("span",{className:"links"},i.createElement(f.a,{to:"/intro"},"Intro")," | ",i.createElement(f.a,{to:"/menu"},"Menu")," | ",i.createElement(f.a,{to:"/game"},"Game")),i.createElement(Ut,e),i.createElement("p",null,"Epoch: ",e.system.epoch),i.createElement(Ot,null),i.createElement("div",{id:"entity-viewer"},"Entities",i.createElement("select",{onChange:function(e){var t=e.currentTarget.value;s(parseInt(t))}},e.system.getState().entities.map(function(t){var n=e.system.getEntityModel(t).name;return i.createElement("option",{key:t.id,value:t.id},n)})),i.createElement("div",{className:"scrollable p-1"},i.createElement(Ft,{entity:{id:o},system:e.system}))))))};function Ut(e){return i.createElement(i.Fragment,null,i.createElement("button",{className:"btn is-primary",onClick:St(e.onStart)},"Start"),i.createElement("button",{className:"btn is-error",onClick:St(e.onStop)},"Stop"),i.createElement("button",{className:"btn is-success",onClick:St(e.onTick)},"Evolve"),i.createElement("button",{className:"btn",onClick:St(e.onSave)},"Save"),i.createElement("button",{className:"btn is-warning",onClick:St(e.onLoad)},"Load"))}function Pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return"string"===typeof e}).join(" ")}n(74),n(76);function Lt(e){return i.createElement("div",{id:e.id,className:"layout ".concat(e.className)},i.createElement("div",{className:"top left"},e.topLeft),i.createElement("div",{className:"top center"},e.topCenter),i.createElement("div",{className:"top right"},e.topRight),i.createElement("div",{className:"middle left"},e.middleLeft),i.createElement("div",{className:"middle center"},e.middleCenter),i.createElement("div",{className:"middle right"},e.middleRight),i.createElement("div",{className:"bottom left"},e.bottomLeft),i.createElement("div",{className:"bottom center"},e.bottomCenter),i.createElement("div",{className:"bottom right"},e.bottomRight),i.createElement("div",{className:"background"},e.background),i.createElement("div",{className:"gamescreen"},e.children),e.after)}function jt(e){return i.createElement("div",{className:"flex rows"},i.createElement("span",null,"1UP"),i.createElement("span",null,e.value))}function It(e){return i.createElement("div",{className:"flex rows"},i.createElement("span",null,"High Score"),i.createElement("span",{className:"center-text"},e.value))}function kt(e){return i.createElement("span",null,"Credits ",e.value)}function xt(e){return e.value?i.createElement("p",null,"Level: ".concat(e.value)):null}function Bt(e){return i.createElement("button",{className:"btn is-success",onClick:e.onClick},"Restart")}function Mt(e){return i.createElement(Lt,{id:e.id,className:Pt(e.className,"retro-container"),topLeft:i.createElement(jt,{value:e.lives}),topCenter:i.createElement(It,{value:e.score}),topRight:i.createElement(xt,{value:e.level}),bottomLeft:i.createElement(kt,{value:e.credits}),background:e.background,bottomRight:i.createElement(Bt,{onClick:e.onRestart})},e.children)}n(23),n(79);var Kt=function(){return i.createElement("div",{id:"starfield",className:"background"},i.createElement("div",{id:"stars"}),i.createElement("div",{id:"stars2"}),i.createElement("div",{id:"stars3"}),i.createElement("div",{id:"logo-container",className:"slide-up"},i.createElement("div",{id:"logo"})))};function Qt(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1}function Gt(){this.keys=[],this.actions=[];for(var e=0;e<256;e++)this.keys.push(new Qt);this.events=[];var t=this.actions;this.events.push([window,"keydown",function(e){t.push(e.keyCode),t.push(Qt.DOWN)}]),this.events.push([window,"keyup",function(e){t.push(e.keyCode),t.push(Qt.UP)}]);for(var n=0;n<this.events.length;n++){var i=this.events[n];i[0].addEventListener(i[1],i[2])}}Qt.DOWN=-1,Qt.UP=1,Qt.RESET=0,Qt.prototype.update=function(e){this.justPressed=!1,this.justReleased=!1,e===Qt.DOWN?(this.pressed||(this.justPressed=!0),this.pressed=!0):e===Qt.UP?(this.pressed&&(this.justReleased=!0),this.pressed=!1):e===Qt.RESET&&(this.justReleased=!1,this.justPressed=!1)},Qt.prototype.set=function(e,t,n){this.pressed=t,this.justPressed=e,this.justReleased=n},Qt.prototype.reset=function(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1},Gt.prototype.update=function(){for(var e=0;this.actions.length>e;){var t=this.actions.shift(),n=this.actions.shift();this.keys[t].update(n),(this.keys[t].justReleased||this.keys[t].justPressed)&&(this.actions.push(t),this.actions.push(Qt.RESET),e+=2)}},Gt.prototype.reset=function(){this.actions=[];for(var e=0;e<this.keys.length;e++)this.keys[e].reset()},Gt.prototype.keyPressed=function(e){return this.keys[e].pressed},Gt.prototype.keyJustPressed=function(e){return this.keys[e].justPressed},Gt.prototype.keyJustReleased=function(e){return this.keys[e].justReleased},Gt.prototype.dispose=function(){for(var e=0;e<this.events.length;e++){var t=this.events[e];t[0].removeEventListener(t[1],t[2])}},Gt.TAB=9,Gt.ENTER=13,Gt.SHIFT=16,Gt.CTRL=17,Gt.ALT=18,Gt.CAPS_LOCK=20,Gt.ESC=27,Gt.SPACEBAR=32,Gt.PAGE_UP=33,Gt.PAGE_DOWN=34,Gt.END=35,Gt.HOME=36,Gt.INSERT=45,Gt.DEL=46,Gt.LEFT=37,Gt.RIGHT=39,Gt.UP=38,Gt.DOWN=40,Gt.NUM0=48,Gt.NUM1=49,Gt.NUM2=50,Gt.NUM3=51,Gt.NUM4=52,Gt.NUM5=53,Gt.NUM6=54,Gt.NUM7=55,Gt.NUM8=56,Gt.NUM9=57,Gt.A=65,Gt.B=66,Gt.C=67,Gt.D=68,Gt.E=69,Gt.F=70,Gt.G=71,Gt.H=72,Gt.I=73,Gt.J=74,Gt.K=75,Gt.L=76,Gt.M=77,Gt.N=78,Gt.O=79,Gt.P=80,Gt.Q=81,Gt.R=82,Gt.S=83,Gt.T=84,Gt.U=85,Gt.V=86,Gt.W=87,Gt.X=88,Gt.Y=89,Gt.Z=90,Gt.F1=112,Gt.F2=113,Gt.F3=114,Gt.F4=115,Gt.F5=116,Gt.F6=117,Gt.F7=118,Gt.F8=119,Gt.F9=120,Gt.F10=121,Gt.F11=122,Gt.F12=123;var Dt=function(e){return Object(i.useEffect)(function(){var t=function(t){t.keyCode===Gt.ENTER&&e()};return document.addEventListener("keypress",t),function(){document.removeEventListener("keypress",t)}},[])};function Tt(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),o=n[0],s=n[1];function r(){setTimeout(function(){e.system.audio.playSound(We.LEVEL_WIN)},750),setTimeout(function(){e.system.events.emit(L)},2e3)}return Object(i.useEffect)(function(){setTimeout(function(){return s(!0)},3e3)},[]),Object(i.useEffect)(function(){return e.system.audio.playSong(He.MENU),function(){e.system.audio.stopSong(He.MENU)}},[]),Dt(w(r)),i.createElement(Mt,{id:"gui",className:"menu",score:0,credits:0,lives:0,background:i.createElement(Kt,null),onRestart:r},i.createElement("div",{className:"screen menu"},i.createElement("div",{id:"press-enter",className:"center-content"},i.createElement("p",{className:Pt(!o&&"hidden","fade-in","neon","retro-red"),onMouseUp:r},i.createElement("span",null,"Press Enter")))),i.createElement("div",{className:"overlay"},"AV-1"))}var Vt=function(){return i.createElement("div",{id:"starfield",className:"background"},i.createElement("div",{id:"stars"}),i.createElement("div",{id:"stars2"}),i.createElement("div",{id:"stars3"}))},Wt=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return i.createElement("div",{className:"screen level"},this.props.children)}}]),t}(i.PureComponent);function Ht(e){var t=function(e){return{position:"absolute",outline:"1px solid white",borderRadius:"25%",height:"32px",width:"0px",left:e.model.position.x+30,top:e.model.position.y,display:(t=e.model,t.offscreen?"none":"")};var t}(e);return i.createElement("div",{id:"bullet",className:"sprite",style:t})}var Yt=2e3,Xt=function(e){return function(t){function n(){var t,i;Object(r.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(i=Object(u.a)(this,(t=Object(c.a)(n)).call.apply(t,[this].concat(s)))).state={enemyPositions:e.enemyPositions,levelId:e.levelId,enemies:[],enemiesDead:0,ready:!1},i.handleDeath=function(e,t){i.state.enemies.find(function(t){return t.entity.id===e.entityId})?(i.props.system.events.emit(G,e),i.setState(function(e){return{enemiesDead:e.enemiesDead+1}})):i.props.system.events.emit(D,e)},i.onLevelComplete=function(t,n){t.events.emit(e.completeEvent||x,n),i.stopFreeEnemyInterval()},i.enemyFree=function(){var e,t=(e=i.state.enemies.map(function(e){return e.entity}))[Math.floor(Math.random()*e.length)],n=i.props.system.getEntityComponent(t,"controls");n&&(n.state.disabled=!1)},i.stopAllFreeEnemies=function(){i.stopFreeEnemyInterval(),i.state.enemies.forEach(function(e){e.entity;var t=i.props.system.getEntityComponent(e.entity,"controls");t&&(t.state.disabled=!0)})},i.enemyGroup=function(){},i.startFreeEnemyInterval=function(){i.interval=setInterval(function(){i.props.system.events.emit(T)},Yt)},i.stopFreeEnemyInterval=function(){clearInterval(i.interval)},i}return Object(l.a)(n,t),Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.enemyPositions,t=this.props,n=t.system,i=(0,t.loadLevel)(n,e);this.setState({enemies:i,ready:!0}),n.events.registerListener(Q,this.handleDeath),n.events.registerListener(T,this.enemyFree),n.events.registerListener("enemy:group",this.enemyGroup),n.events.registerListener(k,this.startFreeEnemyInterval),n.events.registerListener(K,this.stopAllFreeEnemies)}},{key:"componentDidUpdate",value:function(e,t){t.ready&&t.enemiesDead===t.enemies.length&&this.onLevelComplete(this.props.system,this.state.levelId)}},{key:"componentWillUnmount",value:function(){var e=this.props.system;clearInterval(this.interval),e.events.unRegisterListener(Q,this.handleDeath),e.events.unRegisterListener(T,this.enemyFree),e.events.unRegisterListener("enemy:group",this.enemyGroup),e.events.unRegisterListener(k,this.startFreeEnemyInterval),e.events.unRegisterListener(K,this.stopAllFreeEnemies),this.state.enemies.forEach(function(t){return e.unRegisterEntity(t.entity.id)})}},{key:"render",value:function(){var e=this.props.state,t=e.player,n=e.bullet1,o=e.bullet2,s=e.system;return i.createElement(Wt,null,i.createElement(rt,{entity:t,system:s}),i.createElement(Ht,{model:n,system:s}),i.createElement(Ht,{model:o,system:s}),this.state.enemies.map(function(e){var t=e.component;return i.createElement(t,{key:e.entity.id,entity:e.entity,system:s})}))}}]),n}(i.Component)};var qt={demo:{level:Xt({enemyPositions:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,1,0,0],[0,0,1,0,1,0,1,0,1,0,0,0],[0,0,0,1,0,1,0,1,0,0,0,0]],levelId:"Demo"}),next:"level1"},level1:{level:Xt({enemyPositions:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0]],levelId:"1"}),next:"level2"},level2:{level:Xt({enemyPositions:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0]],levelId:"2"}),next:"level3"},level3:{level:Xt({enemyPositions:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,5,5,5,5,5,5,0,0,0],[0,0,0,3,3,0,0,3,3,0,0,0],[0,0,1,1,1,0,0,1,1,1,0,0],[0,0,1,1,1,0,0,1,1,1,0,0]],levelId:"3"}),next:"level4"},level4:{level:Xt({enemyPositions:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,0,0]],levelId:"4",completeEvent:j}),next:"end"},end:{level:function(e){var t=e.state,n=t.player,o=t.system;return i.createElement(Wt,null,i.createElement(rt,{entity:n,system:o}))},next:"demo"}},Jt={demo:"Demo",level1:"1",level2:"2",level3:"3",level4:"4",end:"End"};function zt(e){var t=i.useState(5),n=Object(p.a)(t,2),o=n[0],s=n[1],r=i.useState(!1),a=Object(p.a)(r,2),u=a[0],c=a[1];return i.useEffect(function(){s(5),c(!1);for(var t=function(e){setTimeout(function(){return s(5-e)},1e3*e)},n=0;n<=5;n++)t(n);setTimeout(function(){c(!0),e.onReady()},5e3)},[e.level,e.retries]),i.createElement("div",{className:Pt("center-content","absolute-fit",u?"fadeout":"fadeout-visible")},i.createElement("p",{className:"neon green"},i.createElement("span",null,o)))}function Zt(e){e.levels;var t=Object(Ae.a)(e,["levels"]),n=i.useState(!1),o=Object(p.a)(n,2),s=(o[0],o[1]),r=i.useState(0),a=Object(p.a)(r,2),u=a[0],c=a[1],l=i.useState(t.currentLevel),d=Object(p.a)(l,2),m=d[0],f=d[1],v=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt)[e].level}(t.currentLevel);i.useEffect(function(){t.system.events.emit(I),f(t.currentLevel),s(!1)},[t.currentLevel]),i.useEffect(function(){var e=function(){c(u+1),s(!1)};return t.system.events.registerListener(K,e),function(){t.system.events.unRegisterListener(K,e)}},[]);return i.createElement(i.Fragment,null,i.createElement(v,Object.assign({loadLevel:Rt},t)),i.createElement(zt,{retries:u,level:m,onReady:function(){t.system.events.emit(k,m),s(!0)}}))}function _t(e){return Dt(w(e.onNextLevel)),i.createElement("div",{className:"complete container with-title is-center is-dark fade-in"},i.createElement("label",{className:"title"},"Level ".concat(Jt[e.currentLevel]," Complete")),i.createElement("p",null,"Score:  ".concat(e.state.score)),i.createElement("p",null,"Shots:  ".concat(e.state.shots)),i.createElement("p",null,"Hits:   ".concat(e.state.hits)),i.createElement("p",null,"Ratio:  ".concat(Math.round(e.state.hits/e.state.shots*100),"%")),i.createElement("button",{className:"btn is-primary",onClick:e.onNextLevel},"Press Enter"))}var $t=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={score:0,credits:1,lives:3,shots:0,hits:0,complete:!1,completed:[],currentLevel:"level1"},n.registerEvents=function(){n.props.system.events.registerListener(I,n.handleLevelLoading),n.props.system.events.registerListener(k,n.handleLevelBegin),n.props.system.events.registerListener(x,n.handleLevelComplete),n.props.system.events.registerListener(D,n.onPlayerDeath),n.props.system.events.registerListener(K,n.onPlayerRevive),n.props.system.events.registerListener(G,n.onEnemyDeath),n.props.system.events.registerListener(j,n.handleGameOver),n.props.system.events.registerListener(M,n.handleCollision)},n.unRegisterEvents=function(){n.props.system.events.unRegisterListener(I,n.handleLevelLoading),n.props.system.events.unRegisterListener(k,n.handleLevelBegin),n.props.system.events.unRegisterListener(x,n.handleLevelComplete),n.props.system.events.unRegisterListener(D,n.onPlayerDeath),n.props.system.events.unRegisterListener(K,n.onPlayerRevive),n.props.system.events.unRegisterListener(G,n.onEnemyDeath),n.props.system.events.unRegisterListener(j,n.handleGameOver),n.props.system.events.unRegisterListener(M,n.handleCollision)},n.getBullet=function(){return E([n.props.bullet1,n.props.bullet2].filter(function(e){return!!e.offscreen}))},n.fireBullet=function(e){var t=n.getBullet();t&&(t.position.x=e.x,t.position.y=e.y,n.reviveEntity(t,1),n.setState(function(e){return Object(s.a)({},e,{shots:e.shots+1})}),n.props.system.events.emit(B,n.props.player))},n.killEntity=function(e){var t=n.props.system.getEntityComponent(e,"health");void 0!==t&&(t.state.health.value=0)},n.reviveEntity=function(e,t){var i=n.props.system.getEntityComponent(e,"health");void 0!==i&&(i.state.health.value=t)},n.handleCollision=function(e,t){n.props.player.id===t.id?n.props.system.events.emit(D,e):n.props.system.events.emit(G,e)},n.onPlayerRevive=function(){n.reviveEntity(n.props.player,100)},n.onPlayerDeath=function(e){0!==n.state.lives?(n.handleLevelLoading(),setTimeout(function(){n.props.system.events.emit(K)},850),n.setState(function(e){return{lives:R(0,1/0,e.lives-1)}})):n.handleGameOver()},n.onEnemyDeath=function(e){var t=n.props.system.getEntityComponent({id:e.entityId},"loot");if(void 0!==t){var i=t.state.loot.points;n.setState(function(e){return{score:e.score+i,hits:e.hits+1}})}},n.handleLevelLoading=function(){n.props.system.events.emit(W);var e=n.props.system.getState().components.filter(function(e){return"position"===e.name}),t=n.props.system.getState().components.filter(function(e){return"homePosition"===e.name});e.forEach(function(e){e.state.controllable=!1}),t.forEach(function(e){e.state.goHome=!0}),n.props.system.events.emit(V)},n.handleLevelBegin=function(){var e=n.props.system.getState().components.filter(function(e){return"position"===e.name}),t=n.props.system.getState().components.filter(function(e){return"homePosition"===e.name});e.forEach(function(e){e.state.controllable=!0}),t.forEach(function(e){e.state.goHome=!1})},n.handleLevelComplete=function(e){n.props.system.audio.stopSong(He.GAME),setTimeout(function(){n.props.system.audio.playSound(We.LEVEL_WIN)},750),setTimeout(function(){n.props.system.audio.playSong(He.SUMMARY),n.setState(function(t){return{complete:!0,completed:t.completed.concat(e)}})},1500)},n.handleGameOver=function(){n.props.system.audio.stopSong(He.GAME),setTimeout(function(){n.props.system.audio.playSound(We.LEVEL_WIN)},1500),setTimeout(function(){n.props.system.audio.playSound(We.GAMEOVER)},2250),setTimeout(function(){window.location.assign("/end?final=".concat(JSON.stringify({score:n.state.score,hits:n.state.hits,shots:n.state.shots,lives:n.state.lives,credits:n.state.credits})))},3e3)},n.startNewGame=function(){n.props.system.audio.playSound(We.NEW_GAME),setTimeout(function(){return n.setState({currentLevel:"level1"})},5)},n.onNextLevel=function(){n.props.system.audio.stopSong(He.SUMMARY),setTimeout(function(){n.props.system.audio.playSound(We.NEXT_LEVEL)},350),setTimeout(function(){var e=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt)[e].next}(n.state.currentLevel);n.setState({currentLevel:e,complete:!1})},1200),setTimeout(function(){n.props.system.audio.playSong(He.GAME)},3e3)},n.registerEvents(),n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.system.audio.playSong(He.GAME)}},{key:"componentWillReceiveProps",value:function(e){!this.props.player.attacking&&e.player.attacking&&this.fireBullet(this.props.player.center)}},{key:"componentWillUnmount",value:function(){this.props.system.audio.stopSong(He.GAME),this.unRegisterEvents()}},{key:"render",value:function(){var e=this.state,t=e.currentLevel,n=e.score,o=e.credits,s=e.lives;return i.createElement(Mt,{id:"gui",className:"game",level:Jt[t],score:n,credits:o,lives:s,onRestart:this.props.onRestart,background:i.createElement(Vt,null)},i.createElement(Zt,{currentLevel:t,state:this.props,system:this.props.system}),this.state.complete?i.createElement("div",{className:"center-content absolute-fit"},i.createElement(_t,{currentLevel:t,state:this.state,onNextLevel:this.onNextLevel})):null)}}]),t}(i.PureComponent);n(81);var en=function(){return i.createElement("div",{id:"starfield",className:"background"},i.createElement("div",{id:"stars"}),i.createElement("div",{id:"stars2"}),i.createElement("div",{id:"stars3"}),i.createElement("div",{id:"gameover-container",className:"slide-up"},i.createElement("div",{id:"gameover"})))};function tn(e){var t=Object(i.useState)(!1),n=Object(p.a)(t,2),o=n[0],s=n[1],r=Object(i.useState)({}),a=Object(p.a)(r,2),u=a[0],c=a[1];return Object(i.useEffect)(function(){return e.system.audio.playSong(He.END),function(){e.system.audio.stopSong(He.END)}},[]),Object(i.useEffect)(function(){var e=function(e){var t,n=e.split("+").join(" "),i={},o=/[?&]?([^=]+)=([^&]*)/g;for(;t=o.exec(n);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i}(window.location.search);if(e&&"string"===typeof e.final)try{c(JSON.parse(e.final))}catch(n){}var t=setTimeout(function(){return s(!0)},3e3);return function(){clearTimeout(t)}},[]),Dt(w(function(){window.location.assign("/game")})),i.createElement(Mt,{id:"gui",className:"gameover",score:u.score,credits:u.credits,lives:u.lives,background:i.createElement(en,null),onRestart:function(){window.location.assign("/menu")}},i.createElement("div",{className:"screen menu"},i.createElement("div",{id:"press-enter",className:"center-content"},i.createElement("p",{className:Pt(!o&&"hidden","fade-in")},"Press Enter to Play Again"))))}var nn="attack";function on(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:nn,state:{attacking:n.attacking,attackPower:n.attackPower},update:function(e,t){!function(e,t){t.input.keyPressed(t.input.KeyCodes.SPACEBAR)?e.state.attacking=!0:e.state.attacking=!1}(t,e)}}))}}y(g(nn));function sn(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:"controls",state:{direction:n.direction,moving:n.moving,speed:n.speed,disabled:!!n.disabled},update:function(e,n){!function(e,t,n){rn(e,t,n,"vertical")}(t,n,e),function(e,t,n){rn(e,t,n)}(t,n,e),function(e,t,n){var i=t.state.direction,o=i.x,s=i.y;t.state.moving=0!==o||0!==s}(0,n)}}))}}function rn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"horizontal";if(!t.state.disabled){var o="horizontal"===i?"x":"y",s="horizontal"===i?[n.input.KeyCodes.LEFT,n.input.KeyCodes.RIGHT]:[n.input.KeyCodes.UP,n.input.KeyCodes.DOWN],r=Object(p.a)(s,2),a=r[0],u=r[1];n.input.keyPressed(u)?t.state.direction[o]=1:n.input.keyPressed(a)?t.state.direction[o]=-1:t.state.direction[o]=0}}var an="collisions";function un(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:an,state:{collisions:n.collisions||[],collisionGroup:n.collisionGroup},update:function(e,n){!function(e,t,n,i){var o=n.getEntityModel({id:t.entityId}),s=n.getEntitiesByComponentTypes(["geometry","position","collidable"]).filter(function(e){return e!==t.entityId}).map(function(e){return n.getEntityModel({id:e})}).filter(function(e){return e.collisionGroup!==t.state.collisionGroup}),r=cn(o.position,o.geometry),a=[];s.forEach(function(e){var t,n,i=cn(e.position,e.geometry);n=i,(t=r).left>n.right||n.left>t.right||t.bottom<n.top||n.bottom<t.top||void 0===i||a.push(e.id)});var u=t.state.collisions?t.state.collisions.map(function(e){return e}):[];t.state.collisions=a,function(e,t){var n=e.sort(),i=t.sort();if(i.length>n.length)return!0;for(var o=0;o<n.length;++o)if(n[o]!=i[o])return!0;return!1}(u,a)&&a.length>0&&i.onChange(M,t,e)}(t,n,e,i)}}))}}y(g(an));function cn(e,t){return{left:e.x-t.width/2,right:e.x+t.width/2,top:e.y,bottom:e.y+t.height}}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"player 1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"friendly";return function(e,t){var n=P(e),i=Y(e),o=ce(e),s=sn(e),r=on(e),a=q(e),u=oe(e),c=_(e),l=un(e),d=ne(e),m=de(e),p=e.registerEntity();return e.registerComponent(n(p,t,e.events)),e.registerComponent(i(p,t,e.events)),e.registerComponent(o(p,t,e.events)),e.registerComponent(m(p,t,e.events)),e.registerComponent(a(p,t,e.events)),e.registerComponent(u(p,t,e.events)),e.registerComponent(r(p,t,e.events)),e.registerComponent(c(p,t,e.events)),e.registerComponent(l(p,t,e.events)),e.registerComponent(d(p,t,e.events)),e.registerComponent(s(p,{direction:t.direction,moving:t.moving,speed:t.speed},e.events)),p}(e,{name:t,texture:ye.Player,health:{value:100,immortal:!1},attackPower:10,speed:{y:0,x:6},position:{x:400,y:475},homePosition:{x:400,y:475},direction:{x:0,y:0},geometry:{width:64,height:64},moving:!1,attacking:!1,boundary:U,collisionGroup:n})}var dn="momentum";function mn(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:dn,state:{momentum:{direction:n.momentum.direction,speed:n.momentum.speed}},update:function(e,n){!function(e,t,n){var i=n.getEntityComponent(e,"position").state.position;if(n.getEntityComponent(e,"offscreen").state.offscreen)return;var o=t.state.momentum,s=o.direction,r=o.speed;i.y+=s.y*r,i.x+=s.x*r}(t,n,e)}}))}}y(g(dn));function pn(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:"offscreen",state:{offscreen:n.offscreen||!1},update:function(e,n){!function(e,t,n){var i=n.getEntityComponent(e,"position").state.position,o=n.config.screenSize;if(i.x<0||i.y<0)return void(t.state.offscreen=!0);if(i.x>o.x||i.y>o.y)return void(t.state.offscreen=!0);if(i.x>window.innerWidth||i.y>window.innerHeight)return void(t.state.offscreen=!0);t.state.offscreen=!1}(t,n,e)}}))}}function fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-100;return function(e,t){var n=P(e),i=ce(e),o=mn(e),s=pn(e),r=q(e),a=un(e),u=e.registerEntity();return e.registerComponent(n(u,t,e.events)),e.registerComponent(i(u,t,e.events)),e.registerComponent(r(u,t,e.events)),e.registerComponent(o(u,t,e.events)),e.registerComponent(a(u,t,e.events)),e.registerComponent(s(u,t,e.events)),u}(e,{name:t,momentum:{direction:{x:0,y:-1},speed:arguments.length>3&&void 0!==arguments[3]?arguments[3]:8},position:{x:n,y:440},geometry:{width:2,height:32},collisionGroup:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"friendly"})}var vn=n(25),hn={name:"AudioManager",debug:!0,logging:!0,version:"1"},gn=function(){function e(t){var n=this;Object(r.a)(this,e),this.init=function(e){return null},this.toString=function(){return JSON.stringify({config:n.config},null,"  ")},this.config=Object(s.a)({},hn,t),this.sounds={},this.songs={},this.soundFactory=vn.Howl,this.audioEngine=vn.Howler}return Object(a.a)(e,[{key:"registerSound",value:function(e,t){this.sounds[e]=new this.soundFactory(t)}},{key:"unRegisterSound",value:function(e){this.sounds[e].stop(),this.sounds[e].unload(),delete this.sounds[e]}},{key:"registerSong",value:function(e,t){this.songs[e]=new this.soundFactory(Object(s.a)({loop:!0},t))}},{key:"unRegisterSong",value:function(e){this.songs[e].stop(),this.songs[e].unload(),delete this.songs[e]}},{key:"playSound",value:function(e,t){}},{key:"stopSound",value:function(e,t){try{this.sounds[e].stop(t)}catch(n){throw new Error('[AudioManager:ERROR]: Sound: "'.concat(e,'" not found..'))}}},{key:"playSong",value:function(e,t){}},{key:"stopSong",value:function(e,t){try{this.songs[e].stop(t)}catch(n){throw new Error('[AudioManager:ERROR]: Song: "'.concat(e,'" not found..'))}}},{key:"registerListener",value:function(e,t,n){this.sounds[e].on(t,n)}},{key:"registerOnceListener",value:function(e,t,n){this.sounds[e].once(t,n)}},{key:"unRegisterListener",value:function(e,t,n){this.sounds[e].off(t,n)}},{key:"changeVolume",value:function(e){this.audioEngine.volume(e)}}]),e}(),yn={name:"componentManager",debug:!0,logging:!0,version:"1"},An=function(){function e(t){var n=this;Object(r.a)(this,e),this.init=function(e){return null},this.registerComponent=function(e){e.id=-1===e.id?n.idGenerator().next():e.id;var t=A(e);return n.components[e.id]=t,t},this.unRegisterComponent=function(e){delete n.components[e]},this.get=function(e){var t="number"===typeof e?e:e&&e.id;return n.components[t]},this.getSerializableState=function(){return{config:n.config,components:n.components}},this.loadHydratedState=function(e){n.config=e.config,n.components=e.components},this.toString=function(){return JSON.stringify({config:n.config,components:n.components},null,"  ")},this.config=Object(s.a)({},yn,t),this.components=[],this.idGenerator=C()}return Object(a.a)(e,[{key:"getState",get:function(){return this.components}}],[{key:"isSameComponent",value:function(e,t){return e.id===t.id}}]),e}(),En={name:"EntityManager",debug:!0,logging:!0,version:"1"},Cn=function(){function e(t){var n=this;Object(r.a)(this,e),this.init=function(e){return null},this.registerEntity=function(){var e=n.idGenerator().next(),t=A({id:e});return n.entities[e]=t,t},this.unRegisterEntity=function(e){delete n.entities[e]},this.get=function(e){var t="number"===typeof e?e:e.id;return n.entities[t]},this.getSerializableState=function(){return{config:n.config,entities:n.entities}},this.loadHydratedState=function(e){n.config=e.config,n.entities=e.entities},this.toString=function(){return JSON.stringify({config:n.config,entities:n.entities},null,"  ")},this.config=Object(s.a)({},En,t),this.entities=[],this.idGenerator=C()}return Object(a.a)(e,[{key:"getState",get:function(){return this.entities}}],[{key:"isSameEntity",value:function(e,t){return e.id===t.id}}]),e}(),bn=n(44),wn={name:"EventManager",debug:!0,logging:!0,version:"1"},Rn=function e(t){var n=this;Object(r.a)(this,e),this.init=function(e){return null},this.registerListener=function(e,t){n.emitter.addListener(e,t)},this.unRegisterListener=function(e,t){n.emitter.removeListener(e,t)},this.emit=function(e,t){n._emit(e,t)},this.onUpdate=function(e,t){n._emit("updateComponent",e,t)},this.onChange=function(e,t,i){n._emit(e,t,i)},this._emit=function(e){for(var t,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];n.config.logging&&console.log('[EventService]: Event: "'.concat(e,'"; args:'),o),(t=n.emitter).emit.apply(t,[e].concat(o))},this.config=Object(s.a)({},wn,t),this.emitter=new bn.EventEmitter2({delimiter:":",wildcard:!0,maxListeners:20})};function Sn(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0}function On(){this._keys=[],this._position=new Sn(0,0),this._positionUpdated=!1,this._delta=new Sn(0,0),this._wheel=0,this._wheelUpdated=!1,this._doubleClicked=!1,this.keys=[],this.position=new Sn(0,0),this.delta=new Sn(0,0),this.wheel=0,this.doubleClicked=!1,this.canvas=null,this.events=[];for(var e=0;e<3;e++)this._keys.push(new Qt),this.keys.push(new Qt);var t=this;if(void 0!==window.onmousewheel?this.events.push([window,"mousewheel",function(e){t._wheel=e.deltaY,t._wheelUpdated=!0}]):void 0!==window.addEventListener?this.events.push([window,"DOMMouseScroll",function(e){t._wheel=30*e.detail,t._wheelUpdated=!0}]):this.events.push([window,"wheel",function(e){t._wheel=e.deltaY,t._wheelUpdated=!0}]),"ontouchstart"in window||navigator.msMaxTouchPoints>0){var n=new Sn(0,0);this.events.push([window,"touchstart",function(e){var i=e.touches[0];n.set(i.clientX,i.clientY),t.updateKey(On.LEFT,Qt.DOWN)}]),this.events.push([window,"touchend",function(e){t.updateKey(On.LEFT,Qt.UP)}]),this.events.push([window,"touchmove",function(e){var i=e.touches[0];if(null!==t.canvas){var o=t.canvas.getBoundingClientRect();t.updatePosition(i.clientX-o.left,i.clientY-o.top,i.clientX-n.x,i.clientY-n.y)}else t.updatePosition(i.clientX,i.clientY,i.clientX-n.x,i.clientY-n.y);n.set(i.clientX,i.clientY)}])}else this.events.push([window,"mousemove",function(e){if(null!==t.canvas){var n=t.canvas.getBoundingClientRect();t.updatePosition(e.clientX-n.left,e.clientY-n.top,e.movementX,e.movementY)}else t.updatePosition(e.clientX,e.clientY,e.movementX,e.movementY)}]),this.events.push([window,"mousedown",function(e){t.updateKey(e.which-1,Qt.DOWN)}]),this.events.push([window,"mouseup",function(e){t.updateKey(e.which-1,Qt.UP)}]);this.events.push([window,"dblclick",function(e){t._doubleClicked=!0}]);for(var i=0;i<this.events.length;i++){var o=this.events[i];o[0].addEventListener(o[1],o[2])}}Sn.prototype.set=function(e,t){this.x=e,this.y=t},On.LEFT=0,On.MIDDLE=1,On.RIGHT=2,On.prototype.setCanvas=function(e){this.canvas=e,e.mouseInside=!1,e.addEventListener("mouseenter",function(){this.mouseInside=!0}),e.addEventListener("mouseleave",function(){this.mouseInside=!1})},On.prototype.insideCanvas=function(){return null!==this.canvas&&this.canvas.mouseInside},On.prototype.setLock=function(e){null!==this.canvas&&(e?this.canvas.requestPointerLock?this.canvas.requestPointerLock():this.canvas.mozRequestPointerLock?this.canvas.mozRequestPointerLock():this.canvas.webkitRequestPointerLock&&this.canvas.webkitRequestPointerLock():document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock&&document.webkitExitPointerLock())},On.prototype.buttonPressed=function(e){return this.keys[e].pressed},On.prototype.buttonDoubleClicked=function(){return this.doubleClicked},On.prototype.buttonJustPressed=function(e){return this.keys[e].justPressed},On.prototype.buttonJustReleased=function(e){return this.keys[e].justReleased},On.prototype.updatePosition=function(e,t,n,i){this._position.set(e,t),this._delta.x+=n,this._delta.y+=i,this._positionUpdated=!0},On.prototype.updateKey=function(e,t){e>-1&&this._keys[e].update(t)},On.prototype.update=function(){for(var e=0;e<this._keys.length;e++)this._keys[e].justPressed&&this.keys[e].justPressed&&(this._keys[e].justPressed=!1),this._keys[e].justReleased&&this.keys[e].justReleased&&(this._keys[e].justReleased=!1),this.keys[e].set(this._keys[e].justPressed,this._keys[e].pressed,this._keys[e].justReleased);this._wheelUpdated?(this.wheel=this._wheel,this._wheelUpdated=!1):this.wheel=0,this._doubleClicked?(this.doubleClicked=!0,this._doubleClicked=!1):this.doubleClicked=!1,this._positionUpdated?(this.delta.x=this._delta.x,this.delta.y=this._delta.y,this._delta.set(0,0),this.position.x=this._position.x,this.position.y=this._position.y,this._positionUpdated=!1):(this.delta.x=0,this.delta.y=0)},On.prototype.dispose=function(){for(var e=0;e<this.events.length;e++){var t=this.events[e];t[0].removeEventListener(t[1],t[2])}};var Fn=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new On,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gt;Object(r.a)(this,e),this.mouse=n,this.keyboard=i,this.KeyCodes=Gt,this.buttonPressed=function(e){return t.mouse.buttonPressed(e)},this.keyPressed=function(e){return t.keyboard.keyPressed(e)},this.keyJustPressed=function(e){return t.keyboard.keyJustPressed(e)},this.keyJustReleased=function(e){return t.keyboard.keyJustReleased(e)},this.update=function(){t.mouse.update(),t.keyboard.update()}},Nn=function(){function e(t){var n=this;Object(r.a)(this,e),this.system=t,this.saveGame=function(){n.saveState("ecs",n.system.getSerializableState())},this.loadGame=function(){var e=n.loadStateFromKey("ecs");if(e){var t=n.hydrateLoadedComponents(n.system,e);e.system.components=t,n.system.loadHydratedState(e)}}}return Object(a.a)(e,[{key:"saveState",value:function(e,t){var n=JSON.stringify(t);window.localStorage.setItem(e,n)}},{key:"loadStateFromKey",value:function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}},{key:"hydrateLoadedComponents",value:function(e,t){var n=this,i=t.system.components,o={};return i.map(function(t){var i,s=o[t.name];return s?i=s:(i=n.system.getComponentFactory(t.name)(e),o[t.name]=i),i({id:t.entityId},t.state,{onUpdate:function(e,t){return null},onChange:function(e,t,n){return null}},t.id)})}}]),e}();function Un(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"horizontal",o="horizontal"===i?"x":"y",s="horizontal"===i?[n.input.KeyCodes.LEFT,n.input.KeyCodes.RIGHT]:[n.input.KeyCodes.UP,n.input.KeyCodes.DOWN],r=Object(p.a)(s,2),a=r[0],u=r[1];n.input.keyPressed(u)?t.state.direction[o]=1:n.input.keyPressed(a)?t.state.direction[o]=-1:t.state.direction[o]=0}var Pn={name:P,health:Y,position:ce,age:function(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,name:"age",entityId:t.id,state:{age:n.age},update:function(e,t){var n=e.epoch;0===n%2e3&&n>0&&t.state.age++}}))}},controls:function(e){return function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return e.registerComponent(A({id:o,entityId:t.id,name:"controls",state:{direction:n.direction,moving:n.moving,speed:n.speed},update:function(e,n){!function(e,t,n){Un(e,t,n,"vertical")}(t,n,e),function(e,t,n){Un(e,t,n)}(t,n,e),function(e,t,n){var i=t.state.direction,o=i.x,s=i.y;t.state.moving=0!==o||0!==s}(0,n)}}))}},collisions:un,collidable:_,attack:on,momentum:mn,offscreen:pn,geometry:q,loot:ee,boundary:ne,texture:oe,wiggle:ae,homePosition:de,worldwrap:fe};var Ln={debug:!1,logging:!0},jn=function e(t,n,i){var o,a=this;Object(r.a)(this,e),this.entityModelCache={},this.entityComponentCache={},this.init=function(e){return null},this.registerEntity=function(){return a.entityManager.registerEntity()},this.registerComponent=function(e){var t=a.componentManager.registerComponent(e);return a.entityComponentSetter([t.entityId,t.name],t.id),t},this.getComponent=function(e){return a.componentManager.get(e)},this.getComponentById=function(e){return a.componentManager.get(e)},this.getComponentIdsForEntity=function(e){return void 0===e?[]:(t=a.entityComponents[e.id],Object.keys(t).map(function(e){return t[e]}));var t},this.getComponentsForEntity=function(e){return a.getComponentIdsForEntity(e).map(a.componentManager.get)},this.getComponentFactory=function(e){return a.componentFactories[e]},this.getCachedComponentsForEntity=function(e){var t=a.entityModelCache[e.id];if(t)return t;var n=a.getComponentsForEntity(e);return a.entityModelCache[e.id]=n,n},this.unRegisterEntity=function(e){a.unRegisterComponentsForEntity(e),a.deleteEntityComponents(e),a.clearEntityComponentCache(),a.clearEntityModelCache(),a.entityManager.unRegisterEntity(e)},this.unRegisterComponent=function(e){a.componentManager.unRegisterComponent(e)},this.unRegisterComponentsForEntity=function(e){a.getComponentIdsForEntity({id:e}).forEach(function(e){return a.componentManager.unRegisterComponent(e)})},this.deleteEntityComponents=function(e){delete a.entityComponents[e]},this.clearEntityComponentCache=function(){delete a.entityComponentCache,a.entityComponentCache={}},this.clearEntityModelCache=function(){delete a.entityModelCache,a.entityModelCache={}},this.getEntityComponent=function(e,t){return a.getComponentById(a.entityComponents[e.id][t])},this.getEntityModel=function(e){return function(e,t){return t.filter(function(t){return t&&t.entityId===e.id}).reduce(function(e,t){return Object(s.a)({},e,t.state)},{id:e.id})}(e,a.system.components)},this.getEntitiesByComponentTypes=function(e){var t=e.join("-");if(void 0!==a.entityComponentCache[t])return a.entityComponentCache[t];for(var n=function(t){return-1!==e.indexOf(t.name)},i=[],o=0;o<a.system.entities.length;o++){var s=a.system.entities[o];a.getComponentIdsForEntity(s).map(a.getComponentById).filter(n).length===e.length&&i.push(s.id)}return a.entityComponentCache[t]=i,i},this.step=function(){return a.input.update(),a.updateSystemEntities(),a.entityComponentCache={},a.epoch++,a.system},this.updateSystemEntities=function(){a.system.entities.forEach(a.updateComponentsForEntity)},this.updateComponentsForEntity=function(e){for(var t=a.getCachedComponentsForEntity(e),n=0;n<t.length;n++)a.updateComponent(t[n])},this.updateComponent=function(e){return e.update(a,e)},this.getSerializableState=function(){return{system:a.system,config:a.config,epoch:a.epoch,entityComponents:a.entityComponents}},this.loadHydratedState=function(e){a.system=e.system,a.config=e.config,a.epoch=e.epoch,a.entityComponents=e.entityComponents},this.getState=function(){return a.system},this.toString=function(){return JSON.stringify({system:a.system,config:a.config},null,"  ")},this.config=Object(s.a)({},Ln,t),this.input=n||new Fn,this.storage=new Nn(this),this.events=new Rn(t),this.audio=new gn(t),this.epoch=i||0,this.componentFactories=Pn,this.entityManager=new Cn(t),this.componentManager=new An(t),this.entityComponents={},this.system={entities:this.entityManager.entities,components:this.componentManager.components},this.entityComponentSetter=(o=this.entityComponents,function(e,t){return function(e,t,n){for(var i=t,o=e,s=0;s<i.length-1;s++){var r=i[s];r in o?o=o[r]:(o[r]={},o=o[r])}o[i[i.length-1]]=n}(o,e,t)})};var In=function(e){var t=e.name,n=e.version,i=void 0===n?"1":n,o=e.logging;return new jn({name:t,version:i,logging:void 0===o||o,screenSize:{x:800,y:600}})}({name:"Galaga"}),kn=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).player=ln(In,"Odin"),n.bullet1=fn(In,"Bullet of Destiny"),n.bullet2=fn(In,"Bullet of Greater Truth"),n.state={epoch:In.epoch,player:In.getEntityModel(n.player),bullet1:In.getEntityModel(n.bullet1),bullet2:In.getEntityModel(n.bullet2)},n.gameAudioInitialize=function(){b(Ye).forEach(function(e){In.audio.registerSong("".concat(e),Object(s.a)({},Ye[e],{volume:.6}))}),b(Xe).forEach(function(e){In.audio.registerSound("".concat(e),Object(s.a)({},Xe[e],{volume:.3}))})},n.gameAudioCleanup=function(){b(Ye).forEach(function(e){In.audio.unRegisterSong("".concat(e))}),b(Xe).forEach(function(e){In.audio.unRegisterSound("".concat(e))})},n.moUntWOrld=function(){n.setState({epoch:In.epoch})},n.tick=function(){In.step(),n.setState(function(e){return{epoch:In.epoch,player:In.getEntityModel(n.player),bullet1:In.getEntityModel(n.bullet1),bullet2:In.getEntityModel(n.bullet2)}})},n.startNewGame=function(){window.location.assign("/game")},n.start=function(){n.stop(),n._update()},n._update=function(){n.handler=requestAnimationFrame(n._update),n.tick()},n.stop=function(){n.handler&&cancelAnimationFrame(n.handler)},n.save=function(){In.storage.saveGame()},n.load=function(){n.stop(),In.storage.loadGame(),n.moUntWOrld(),n.start()},n.restart=function(){window.location.assign("/menu")},n.gameAudioInitialize(),In.events.registerListener(L,n.startNewGame),In.events.registerListener(V,n.start),In.events.registerListener(W,n.stop),n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.moUntWOrld(),this.start()}},{key:"componentWillUnmount",value:function(){this.gameAudioCleanup(),In.events.unRegisterListener(L,this.startNewGame),In.events.registerListener(V,this.start),In.events.registerListener(W,this.stop),this.stop(),delete this.handler}},{key:"render",value:function(){var e=this;return i.createElement(d.a,null,i.createElement("div",{className:"App container with-title is-center is-dark"},i.createElement("label",{className:"title"},"Galaga.ts"),i.createElement(m.a,{exact:!0,path:"/",render:function(t){return i.createElement(Tt,Object.assign({system:In},e.state,t))}}),i.createElement(m.a,{path:"/game",render:function(t){return i.createElement($t,Object.assign({system:In,onRestart:e.restart},e.state,t))}}),i.createElement(m.a,{path:"/end",render:function(t){return i.createElement(tn,Object.assign({system:In},e.state,t))}}),i.createElement(Nt,{system:In,onStart:this.start,onStop:this.stop,onTick:this.tick,onSave:this.save,onLoad:this.load})))}}]),t}(i.PureComponent);o.render(i.createElement(kn,null),document.getElementById("root"))}],[[47,2,1]]]);
//# sourceMappingURL=main.efafac38.chunk.js.map