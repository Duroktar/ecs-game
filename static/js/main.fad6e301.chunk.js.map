{"version":3,"sources":["audio/Weapons/Lasers/sfx_wpn_laser1.wav","assets/enemy/enemy-explosion-00.png","assets/enemy/enemy-explosion-01.png","assets/enemy/enemy-explosion-02.png","assets/enemy/enemy-explosion-03.png","assets/enemy/enemy-explosion-04.png","assets/enemy/enemy-explosion-05.png","audio/Explosions/Long/sfx_exp_long1.wav","audio/Music/game-menu.mp3","audio/Music/game-main.mp3","audio/Music/game-end.mp3","audio/Music/game-main-summary.mp3","audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav","audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav","audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav","audio/General Sounds/Interactions/sfx_sounds_interaction1.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav","audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav","audio/Weapons/Cannon/sfx_wpn_cannon1.wav","audio/Explosions/Short/sfx_exp_short_soft5.wav","audio/Explosions/Short/sfx_exp_short_hard12.wav","audio/Explosions/Clusters/sfx_exp_cluster1.wav","audio/Explosions/Odd/sfx_exp_odd1.wav","assets/player/ship.png","assets/player/explosion-1/explosion-1-01.png","assets/player/explosion-1/explosion-1-02.png","assets/player/explosion-1/explosion-1-03.png","assets/player/explosion-1/explosion-1-04.png","assets/player/explosion-1/explosion-1-05.png","assets/enemy/enemy-ship.png","assets/crab-bug/crab-bug-ship.png","assets/helmet-bug/helmet-bug-ship.png","assets/pincer-bug/pincer-bug-ship.png","assets/sonic-enemy/sonic-enemy-ship.png","engine/utils.ts","engine/components/nameable.ts","events.ts","engine/components/killable.ts","engine/components/withGeometry.ts","engine/components/withRandomWalk.ts","engine/components/isCollidable.ts","engine/components/lootable.ts","engine/components/withWrapAroundPosition.ts","engine/components/withBoundary.ts","engine/components/withTexture.ts","engine/components/withBugWiggle.ts","game/factories/enemy.ts","game/Domain/mob.ts","game/catalogue.ts","client/Hoc/withEntity.tsx","client/hooks/withAnimationState.ts","client/hooks/withSoundEffects.ts","client/Hoc/withSpriteEffects.tsx","client/Containers/Player/Player.tsx","client/Containers/NPCs/Bug.tsx","client/Containers/NPCs/CrabBug.tsx","client/Containers/NPCs/HelmetBug.tsx","client/Containers/NPCs/PincerBug.tsx","client/Containers/NPCs/SonicBug.tsx","client/Containers/Sprites.ts","client/Hoc/withTexture.tsx","client/utils.ts","client/Development/FPS.tsx","client/Development/Dev.tsx","client/Layouts/Base.tsx","client/Containers/Intro.tsx","client/Components/Lives.tsx","client/Components/HighScore.tsx","client/Components/Credits.tsx","client/Components/LevelStatus.tsx","client/Components/RestartButton.tsx","client/Layouts/Gui.tsx","client/Backgrounds/NewGame.tsx","extern/Key.js","extern/Keyboard.js","client/hooks/withEnterKeyEffect.ts","client/Containers/Menu.tsx","client/Backgrounds/StarField.tsx","client/Levels/Base.tsx","client/Containers/Weapons/Bullet.tsx","client/Hoc/withGameLevel.tsx","client/Levels/Directory.ts","client/Levels/Demo/Demo.tsx","client/Levels/1/Level.1.tsx","client/Levels/2/Level.2.tsx","client/Levels/3/Level.3.tsx","client/Levels/4/Level.4.tsx","client/Levels/End/End.tsx","client/Components/Countdown.tsx","client/Levels/Loader.tsx","client/Components/LevelSummary.tsx","client/Containers/Game.tsx","client/Backgrounds/GameOver.tsx","client/Containers/Outro.tsx","engine/components/withPosition.ts","engine/components/combatable.ts","engine/components/withPlayerControls.ts","game/factories/player.ts","game/Domain/character.ts","engine/components/withMomentum.ts","engine/components/withOffscreen.ts","engine/components/withCollisions.ts","game/factories/bullet.ts","game/Domain/projectile.ts","engine/services/AudioManager.ts","engine/services/ComponentManager.ts","engine/services/EntityManager.ts","engine/services/EventManager.ts","extern/Vector2.js","extern/Mouse.js","engine/services/InputManager.ts","engine/services/StorageManager.ts","engine/components/controllable.ts","engine/components/index.ts","engine/components/ageable.ts","engine/services/SystemManager.ts","game/index.ts","game/factories/system.ts","client/App.tsx","index.tsx"],"names":["module","exports","__webpack_require__","p","createSelector","path","system","entity","searchResult","components","filter","o","b","id","state","undefined","hasState","length","first","createSetter","selector","component","factory","config","mkEntity","array","defaultIdGenerator","epoch","arguments","next","keys","Object","once","fn","called","apply","clamp","min","max","num","ifStateProp","obj","boxMullerRandomGeneratorFactory","random","x1","x2","w","z","phase","Math","sqrt","log","throttle","wait","last","isCalled","setTimeout","KeysEnum","defaultBoundary","top","left","bottom","right","nameableFactory","events","registerComponent","name","entityId","update","ON_START_GAME","ON_GAME_OVER","ON_LEVEL_LOAD","ON_LEVEL_BEGIN","ON_LEVEL_COMPLETE","ON_PLAYER_ATTACK","ON_COLLISION","ON_ENEMY_DEATH","ON_ENEMY_FREE","ON_START_ENGINE","ON_STOP_ENGINE","COMPONENT_NAMESPACE","killableFactory","health","isDead","immortal","wasDeadBefore","isDeadNow","value","onChange","withGeometryFactory","geometry","width","height","defaults","direction","x","y","moving","speed","disabled","jitter","withRandomWalkFactory","randomWalkGeneratorX","randomWalkGeneratorY","options","controls","setJitter","level","deltaX","deltaY","_component$state$dire","handleMovement","isCollidableFactory","collidable","lootableFactory","loot","withWrapAroundPositionFactory","position","getEntityComponent","_controls$state","boundaryComponent","geometryComponent","_geometryComponent$st","boundary","_component$state$posi","handleMovementState","withBoundaryFactory","withTextureFactory","texture","BRAKE","PULSE_WIDTH","withBugWiggleFactory","wiggling","wiggleState","counter","increment","_component$state$wigg","positionComponent","handleBugWiggle","createEnemy","textureId","withName","withHealth","withGeometry","withBoundary","withPosition","withBugWiggle","withRandomWalk","isCollidable","withTexture","isLootable","registerEntity","createMob","points","SpriteTextureIds","mkAudioSrc","src","opts","esm_objectSpread","Sfx","NEW_GAME","GAMEOVER","YOU_WIN","LEVEL_WIN","PAUSE","UNPAUSE","NEXT_LEVEL","Songs","MENU","GAME","END","SUMMARY","SongLibrary","_SongLibrary","defineProperty","MenuMusic","volume","MainMusic","EndMusic","SummaryMusic","SfxLibrary","_SfxLibrary","GameOverSound","LevelWinSound","NextLevelSound","YouWinSound","NewGameSound","PauseGameSound","UnPauseGameSound","withEntity","Component","props","rest","objectWithoutProperties","model","getEntityModel","react","assign","withAnimationState","_useState","useState","animations","_useState2","slicedToArray","_useState3","currentFrame","currentState","frame","getDefaultFrame","_useState4","setCurrentFrame","_useState5","_useState6","setCurrentState","_useState7","_useState8","timers","setTimers","queueFrame","when","push","buffer","forEach","_ref","duration","timer","onFinished","concat","fr","withSoundEffects","playDeathAudio","collectionKey","mkAudioCollectionKey","audio","playSound","playAttackAudio","useEffect","registerEvent","sounds","map","key","registerSound","unRegisterEvent","actionType","unRegisterSound","action","withSpriteEffects","_React$useState","React","_React$useState2","hidden","setHidden","_React$useState3","_React$useState4","dead","setDead","_withAnimationState","styles","backgroundImage","backgroundSize","backgroundPosition","display","cssDisplayValue","elementId","className","style","ConnectedPlayer","normal","require","death","shoot","ShootSound","DeathSound","AnimatedBug","AnimatedCrabBug","AnimatedHelmetBug","AnimatedPincerBug","AnimatedSonicBug","SpriteTextureCollection","_SpriteTextureCollect","Player","Bug","CrabBug","HelmetBug","PincerBug","SonicBug","ConnectedComponent","loadLevel","enemyPositions","enemies","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","row","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","enemyTypeId","JSON","stringify","err","return","withBlur","handler","event","currentTarget","blur","FPS","_React$Component","_getPrototypeOf2","_this","esm_classCallCheck","this","_len","args","Array","_key","esm_possibleConstructorReturn","esm_getPrototypeOf","call","lastLoop","Date","getMilliseconds","count","fps","throttled","countFps","currentLoop","loop","requestAnimationFrame","setFps","setState","updateFrequency","esm_inherits","esm_createClass","cancelAnimationFrame","defaultProps","EntityInspector","DevScreen","setEntityId","open","setOpen","dragging","setDrag","setDragFalse","handleClick","react_draggable_default","a","onMouseUp","onMouseDown","onMouseMove","onClick","classNames","nav","Buttons","FPS_FPS","e","parseInt","getState","entities","onStart","onStop","onTick","onSave","onLoad","classes","join","Layout","topLeft","topCenter","topRight","middleLeft","middleCenter","middleRight","bottomLeft","bottomCenter","bottomRight","background","children","after","Intro","classCallCheck","possibleConstructorReturn","getPrototypeOf","inherits","createClass","Lives","HighScore","Credits","LevelStatus","RestartButton","Gui","lives","score","credits","onRestart","NewGame","Key","pressed","justPressed","justReleased","Keyboard","actions","i","window","keyCode","DOWN","UP","addEventListener","RESET","prototype","set","reset","end","shift","keyPressed","keyJustPressed","keyJustReleased","dispose","removeEventListener","TAB","ENTER","SHIFT","CTRL","ALT","CAPS_LOCK","ESC","SPACEBAR","PAGE_UP","PAGE_DOWN","HOME","INSERT","DEL","LEFT","RIGHT","NUM0","NUM1","NUM2","NUM3","NUM4","NUM5","NUM6","NUM7","NUM8","NUM9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","withEnterKeyEffect","onEnter","enterKeyHandler","document","Menu","esm_slicedToArray","ready","setReady","handleStartGame","emit","playSong","stopSong","Backgrounds_NewGame","StarField","Level","_React$PureComponent","Bullet","outline","borderRadius","offscreen","getStyles","withGameLevel","LevelHOC","levelId","enemiesDead","countDeath","onLevelComplete","completeEvent","clearInterval","interval","enemyFree","items","maybeComponent","floor","controlComponent","enemyGroup","startFreeEnemyInterval","setInterval","_this$props","nextProps","nextState","unRegisterEntity","_this$props$state","player","bullet1","bullet2","Base_Level","enemy","ConnectedEnemy","Levels","demo","level1","level2","level3","level4","_props$state","humanizedLevelNames","Countdown","time","setTime","_loop","onReady","Loader","levels","esm_objectWithoutProperties","currentLevel","setLevel","GameLevel","current","getThisLevel","LevelSummary","onNextLevel","shots","hits","round","Game","complete","completed","registerEvents","handleLevelLoading","handleLevelBegin","handleLevelComplete","handleEnemyDeath","handleBulletCollisions","handleGameOver","unRegisterEvents","collisions","toConsumableArray","Set","killEntity","getBullet","fireBullet","pos","bullet","reviveEntity","objectSpread","source","onFinalScore","startNewGame","nextLevel","getNextLevel","attacking","center","_this$state","Backgrounds_StarField","GameOver","Outro","final","setFinalScore","clearTimeout","Backgrounds_GameOver","withPositionFactory","clampedX","clampedY","combatableFactory","attackPower","input","KeyCodes","handleAttack","withPlayerControlsFactory","handleVerticalMovement","handleHorizontalMovement","handleMovingFlag","_ref2","neg","createPlayer","withControls","withAttack","createCharacter","withMomentumFactory","momentum","_component$state$mome","withOffscreenFactory","screenSize","innerWidth","innerHeight","handleOffscreenFlag","withCollisionsFactory","collidableEntities","getEntitiesByComponentTypes","ownBounds","getBounds","otherBounds","lastCollisions","handleCollisions","dimensions","createBullet","withMomentum","withOffscreen","withCollisions","createProjectile","configDefaults","debug","logging","version","AudioManager","init","toString","songs","soundFactory","Howl","audioEngine","Howler","stop","unload","sprite","play","Error","callback","on","off","ComponentManager","idGenerator","unRegisterComponent","componentId","get","getSerializableState","loadHydratedState","EntityManager","EventManager","emitter","addListener","removeListener","eventName","data","onUpdate","EventEmitter2","delimiter","wildcard","maxListeners","Vector2","Mouse","_keys","_position","_positionUpdated","_delta","_wheel","_wheelUpdated","_doubleClicked","delta","wheel","doubleClicked","canvas","self","onmousewheel","detail","navigator","msMaxTouchPoints","lastTouch","touch","touches","clientX","clientY","updateKey","rect","getBoundingClientRect","updatePosition","movementX","movementY","which","MIDDLE","setCanvas","mouseInside","insideCanvas","setLock","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","buttonPressed","button","buttonDoubleClicked","buttonJustPressed","buttonJustReleased","xDiff","yDiff","InputManager","mouse","keyboard","StorageManager","saveGame","saveState","loadGame","loadedFromStorage","loadStateFromKey","hydratedComponents","hydrateLoadedComponents","serialized","localStorage","setItem","getItem","parse","_this2","componentInitializerCache","componentInitializer","cached","getComponentFactory","defaultComponentFactories","age","attack","wiggle","SystemManager","epochs","object","entityModelCache","entityComponentCache","entityManager","registered","componentManager","entityComponentSetter","getComponent","getComponentById","getComponentIdsForEntity","entityComponents","getComponentsForEntity","componentFactories","getCachedComponentsForEntity","entityModels","unRegisterComponentsForEntity","deleteEntityComponents","clearEntityComponentCache","clearEntityModelCache","componentName","reduce","acc","val","groupEntityComponents","componentNames","cacheKey","isValidComponent","indexOf","step","updateSystemEntities","updateComponentsForEntity","updateComponent","storage","n","setValue","_ref$version","_ref$logging","createSystem","App","screen","gameAudioInitialize","registerSong","gameAudioCleanup","unRegisterSong","moUntWOrld","tick","_","gotoScreen","start","_update","save","load","restart","BrowserRouter","Intro_Intro","onPlayerInput","Game_Game","Dev_DevScreen","ReactDOM","client_App","getElementById"],"mappings":"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","file":"static/js/main.fad6e301.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_laser1.7c857ee1.wav\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAjklEQVRYR+2WQQrAIAwENz9p/v+o9CeWQANSvLiUBsp6FExmJyIampc194cAZEAGZOA/BiJiuPt2oO0D9XSzDZ9PPw2QhRLicMcZASZ91qAAKv0ARjZPCAOMsUIBzGMoA7nHWKAAKmmN4Fb5rYEZgk1P34HVJ4aZ/6sA7M+KugNss9U5AciADMiADLQbuADnnjshOGarxwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVRYR+2UwQ3EMAgEoZPQf1G4E59AwUK+ewCXyB/8ipSEXQYvCIcPHtaHNtAEmsAjBJh5ElGpVumnfwT3vZMyMCdMKYAIaCa8GXkv7zLLLfWxFPYiu4nXDXwJwk0Ecl17QmECO2orYuO4iGAwg1zGCTAxaCpswASl+OpAnlyFqGiJgP9JLyOCdnxdpCZMPJuQMAHDKgKCe+tC62TFNVGZyKwx3HEcg8HMrPkno5gyoN0Lcnf8TrCY2q6INJcy8IuAreAK/voIXMyqwivGEUxvflMawZOG2kATaAJN4DiBDzrKfCHGS/waAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABAklEQVRYR+2VSw4DIQhA4Sbj/Q/lUWyw0jCIBWya2dhNMz95Pj4iPPzDh+PDATgGjgHXQK21lVKm9/T9BtAQ8l3lAsg5IYO2Bg0RUN7bgUoBEAzvVO6YYOgZAdH/ypo19EIAt513hjcJB+yXw0g2FSEAi9xLQdRCCsCqAUt5NHhPm3cYkdLx4pTfVdGxHW/tEAAvEln0U6BGh6xgXAPywxXEt1b0LLgAOu+cNBo6mVz/bICDZSxEAF0DFjkvbBUhF2ykZsJFqANNgcUQ+gsAW6DA11X6pTUFvYLbHsW6FXn2axAdIJIGtwZuh844cnW/Zw8gCeoC7GjNfHMAjoFj4HEDL4r0ziE3SigHAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABW0lEQVRYR91WWw7EIAjEm9T7H8rexA1NbCzyGNwmm2z/2iIMwzha6MdP+XF9ggB0ol4Ii802BAHIJs3EpwH0Tp0LlPJkpLXWa61Lvoi9NACtO1k8KjrnCAFYnXES7Z8Xr4EPAYxFSGIkRoJQAVhzHotnineKqiOIEjGoIbxoxhmA7ggGKI0R/ncc9WrmBjaBRLcirIEooWTQYlR+fw3ArQ/hE9FoHwDkbPn9bI00g/EYmfWiCdf1gRlxJDZOhAjOY8EcgdZFRKcEFOnmErAVNAAgRT17jjzlAWC3GNKpNU6bAecO4G0xBiNFu6UBpCsrJsNkqAHr1NOKS+EiQMzDaNird9ZfdlwrK/nKo+5/4wIzGkg5IbozEP+AACzO2Kmf5+qMu56x+ADiatYFZfd2lBqBFJ5WVGPD21EwAETRlhBfAWBRv+P/7mn4jQHtrIVHgCRHx/S/DCAsyZgPlF0MMIC1WsUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABEElEQVRYR81XWxLDIAiEo+T+h9Kb2DEdM2pFF3yk/Q3iviAN08QvEAUm4okW+OEQKDBj9c65cF2XCCx//hSNDmkAaBQpUKKXjMBKAFrnpvzTMJVquwBiyLxz1PMzNkaVa4F4TYEEeisAJCvwFCT5kKaabGxVIAci5eQYANMUaKQs2CpWtKjAij2PEIAsmJlzCUQiCAFAmFhrOLKLh9E3neYiZGR/FNjpfSTrfbnaj1rQytJRAH/1Mkpgmgog4dGEsVf7igV5Fvgk2+MZQMiZLFi5mk0AVgXw3sCtZrV0iJRWUGoFRmDq5/Vqr+27AfT2/0q/k0rFGFqls/4Dqu97LNjBNL9Msu5rgeLLd4VieY8P2WaPIboXUNsAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAs0lEQVRYR+2XSw6AMAgF4SZy/0P1KBiMIDV+YuKzLnCljSnTwZgHU7qUSJmI8xr6viuGArjaNwDsJT8twsLZ/h0AayNlsR683obFwsH+XaHWmorI68XNrBswCOKtxmcA+WPOBx0CYDAOMQzAISD9fvLvKIAyUAbKQBkoA2XgPwZQkfwuG/SpGJCG9wARTtdaCwByJrDslyFksnwusRQAyJlgP/7Zs88e0QLkTHD1HRTAcAMzqEdXu+U9kUQAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_long1.e65a7e8b.wav\";","module.exports = __webpack_public_path__ + \"static/media/game-menu.277a07d7.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main.62197df4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-end.4f698af1.mp3\";","module.exports = __webpack_public_path__ + \"static/media/game-main-summary.430d3f4f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare1.aae78736.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup3.da47f034.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_fanfare3.25f989ff.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_powerup2.35e9b099.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_interaction1.60988248.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_in.b7b7a7b9.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_sounds_pause1_out.959daf2a.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_wpn_cannon1.75bcd782.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_soft5.c6e20b31.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_short_hard12.ffa98eb5.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_cluster1.7a7460e6.wav\";","module.exports = __webpack_public_path__ + \"static/media/sfx_exp_odd1.6d3db534.wav\";","module.exports = __webpack_public_path__ + \"static/media/ship.8745c391.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABvElEQVRYR+1XW5LDIAwjN1nufyj2Jt6BYlYYv5LpTH/an6YktYQsY+cqH/5c78RvrVGt9VbMWw8PstRofF8CqK/3Neu+sdM8ARkYf8/r9vtCGSowoUDimIAA7jIvEFaEd26p4pDwCcAuqBS6SokJT7BF9EdJFxAKCdBVO2oaeIiCZINU2IGp0QI3gpiqcNo0s4p0uASW0+8SQG/I6xQBatQd3d3s1balwJECRwldAahpJiKN3EF4LeMRayOuuaLdZwhEhrQVUGTDYJoCrin5jBB+OghEu2a5nxBYsYHEqcC8qe2G1xAc0+Caktp//zAJYEOZkknZuwIZAgcZJfbI8ubuBIGofWOK1OqwPMBnNwNwX7eMZxHxCGj+eingnNde3j0S2cNIJyC6YCR7pAbftxUopWAKKrRQWW6aAWUlyAOKgV0CKxXz39wJGVDWP1cDVoX2TA+3AUcH0TbTYUtWdPaGFPTOIJYqQwA5Rq+HRnjWCxBMm3K1AVXOg8mZIBzJeCjxjmZZytI3Xn+JZz1lKt5ePsBU2yCKKmrqzPsxAQ7kvXDgDNhdj+8HgXfyBBImfGLctxJIcDwe+RL4A6hvfDDjUhdcAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACBUlEQVRYR8VXQXLEIAyDnyz/fxT7EzpmMRXCBmdmO82lmSTFsizZ3pz++cozfqut3+fy++yvwEGsPZi8PIFAoHrPwE9nUKJ2th4bGNBiB4C3lFpOaWeYwPp0jyyWgxhALnm+t0AzWwaz53ojlXDYElQO9UoxWKq1tlJsbcVLMILUd0r9sFs5gGoBoBVjIDHFKxNWUGSA2Qi4agNwFQ+A6Gy8gl51nOX3ASNbCWhdQivS/Col5VY/PYXFSXo5a0ApHCXQIFpHDCqfKhBhpeULiMGI3Yg0TchAxaeK5r/yLxMgluXEQi7ZB0CCYvpntoN+LkPXhmFRtmQYgBy2ZDgoFNG+a/1YE33P4ryKENUV6fdAOQtzgrk0qC6xTdVGcBGUZImXUi6KZwZUD5tFQ62YUbfaGADTLQG79VJa7OjpABM5u0BrOvyPQruJsNtSdWA5YZx97wPQC9QJGJxLqEJdSnPQwmMAFv0WM3P4sB1xhG8idMavtlNsRpYgl2dGYKuN31cyZyZMisHvAnB5bu0KtK7Fx3Fw6M3PDsI7u0DeehMsMvsNwfEQu9twNIylb0dA4fTU+9Exn61kQoJutZYwuRzWJgQA+ufOqm5qYNuEsYVac8J7T0Ct5fTugqfi46HG/f/oAoemBYPx28DEeDoLWIzZ0MoqAjbA3jMAXwp67wMB5N/65Afslf0wgQfXLAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACd0lEQVRYR51XQYIDIQjTn9T/P8r+ZHaxYEMMs+320tZhAEOC2Ns3n2tey7yPvr7jP/qwZ7we9hzrmtfb0Y2RzFEFutsM+7ck++ivBGI3yqhyWiUQ6330OV+IjYc7wXc8Vk4ggoHhfL4Wx6hhRxsLarb4vZOADV6tGfyAgJXUF7G+5jwc7kSueUXQyBltELSdDKCAcd4ICKhtF48x2nPO9DQl9GjtSIbWFnpM4KjKEdcN2WnAiOuWnH04QWW7kyCeZQQAWoQOg25CeeZcItwQopdQMKOKhEfNBcSMmkrWgvdrrvIwP1AVqaF8Gvxw6Kw/ElP8ID7kjgba5TreBf0kIdv12qCpAWR+m0AFNdc2Gk7IdDcgQGYncIcAluAgUGuNm0wkGOvpf+w4mhKUAwmZOuHuaGgMjiwABlO/EQ1GBJtW9IWjFUedZDLejlW7jVZdlUMFX2pMdfYTagUA0iTyhP79oEmOi2dVcH0aij6PUKrWfEfKePZVI+Ig+yQUHNgHFEnm4EIcRtAFcwnoDIgSlF0P+IBJcOANP88E5TxAg0Q6B4iELMNEQFBStOVlT0PJSUKD2YeQv3bPz0Omav2YivroPheQOSgB2zHzQGlcSTF87EHWFjyGliEhUE06mABPTNiK1/bUMOJrH5UAAygZKjRK7ZcqiDeKWZ/ZXSViblRfSIMMTEUbATWQJna4Oiq4JfFoTkhE9BfuLyaIBsqTegDCHW1cJbRlCA+PqVgiQZeQSqab8az3COjQI0klCVWm8h7oiuExPUmOoODZIXHAdVnfFQo5yalZ3DUD3fNiUlwayjreKYbgLn3sy+l/g6PnT6/jnM3vez/v0LVIfdTdDwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFUlEQVRYR8VXQY7EIAyDnwz/fxTzE1ahBJnghLLSaudSTVsSx3EMzemff7nnb7X1ay7P/z/81frkKuXJtSRsKbVs7iEWXCzvfmtN5WOASzFeIaTQrWKLUAHI/Z4spVS/O0Va0WQUQChYrFwjUMp7slKyXnvSQV0PMqrG92xwy5bHrNtzlhxBzeeDVmFlYWGUiHGYtF61YKl+MPMpJeVWl5jYGgVj11oQR9VbmjGAMjLpb7UxENFQLQA2uiCgJpPKRf3eT/TR2wHXaLypDyBtJ0tAFuRdBTj1AmPK2uFqQGn1lG5BMoY8ECjWFQChXBlgE+CNqV2DIzoNjDmhWLKOU9QGD4wnUAXAnHYXIZgMqwSrEZB9HMG+t9ZYqzai2jSAFEUz7DFk53/bK0IArbaWn4retAAZwrhsLXNJWfNahCwZc0irg6krpxUUgJpI5HoqqMgpl1F+BcDsehiAjaM1Kc8bepwbAMjA5vewy1mAnhnheNtRnC1Y9gHHD6ztMoYiE2K2/nozWvQQnIwWsWohSj85rh23Y6WPofd2Rq9tRwbkhe1MCAdJfBYJzrol/rcg3BZ4mugBCChv5K6PZMoCO5Tqqbi/M07G3eHgXMhGLgJBzwPo52ihrAX2uev9zvfC1YcJE5F7jyQMt+PTVxEKlO0LC5Dg68iK/DyGEBl939vdrljadsNg9UnNt4n1/SsGfpskWvcD7otZP/TRmLkAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAu0lEQVRYR+2X3Q2AIAyEj1HYzg2cwQ3crm6CQUFb42/i6Uv7BiHl61GSa4CORhL6GMweeWEvYwGc5F0B8qEaDBUO8hsAaYHYAZRnaCTt5TdPkIAUAE4PFAUmiLj22XcAqpl1ob8AZJYK8RuAgiB/9Iv0nIZ7UJMDuAKugCvgCrgCroB1xQw3fNsPsGaCLUC156XYWQHiTJC9n2YYRGbrX2IBoM4E2/Evr40CyqU+cFOvHF2akDqUnKA6wAgOWExlxHkIvQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAAwklEQVRIS+2UUQ7EIAhE4Si9nT3R9nYehQ0IDau1YrPxq8SkPzjPGUgRFhQuYMALmUr5Pq6UCY7tp4cICLGK+aLPv2I8ExVgcZEmAPsKbABg2BjCXSkTHVt5nEH4cspQO73KMQZhbXZSVRNbZ1IxCEfCoI+6YRd7LpLVzJ45UYBALDKLyhQHoPF2OSEqE5FCPu4Bd476EC+gsfi5nJvl8+k4ikH0cuNEN+/k/AOiG0wSlVUgsth2Tf1E2uYXMhXgkri+xNVLFbLUHXYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAm0lEQVQ4T+2UQRLDIAhF/z+Kh0kPnRwmRyFDFWvRatO6yCJu0AHf8AElJi5OZOGGxWoKIARotlfjumayCxiIZCuY85fwNswiFKrZrRA+UrMU5vz52EzbLjBQQTlYgYXP322PxlTYU1uUI1t4qVr2uE/yv8usiKpkdto5fAF/w96657v5S2Yl0MM/8boyTWKescEXM6zZmS/qurAD5VJKFMb8mZ4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAjUlEQVQ4T9XUwQ2AMAgFUBil+w/VUb5BxRCEFhMucqz15ResTI3FjRb9HQOBeH+K2jE7MNCEDIgxCDzPWTGNNED6wEI68R24xCSRFFjSXaSAWboYkx6ZstizHAxkiwmkpenu5r3efWMu1fKGuHQ5phst7tdKmO9H9J0Fa3GyNixqUscN+Pp7qt3NotqKHVslNhRW8lxOAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import { ITypes, IEntity, IdGeneratorFunc, ISystem, IComponent, IComponentEvents, AnonymousCB, EntityIdType } from \"./types\";\n\nexport const pp = (obj: object | null | undefined) => JSON.stringify(obj, null, '  ')\n\nexport type Setter<T> = (system: ISystem, entity: IEntity, state: T) => null | undefined;\n\nexport type Selector<T> = (system: ISystem, entity: IEntity) => null | IComponent<T>\n\nexport function createSelector<T>(path: string): Selector<T> {\n  return (system: ISystem, entity: IEntity): null | IComponent<T> => {\n    const searchResult = system\n      .components\n      .filter(o =>\n        isSameEntity(o, entity)\n        && hasState(path, o.state));\n\n    if (searchResult.length === 0) {\n      return null;\n    };\n\n    return first(searchResult);\n  }\n}\n\nexport function createSetter<T>(selector: Selector<T>): Setter<T> {\n  return (system: ISystem, entity: IEntity, state: T) => {\n    const component = selector(system, entity);\n\n    if (component === null) {\n      return component;\n    }\n\n    component.state = state;\n  }\n}\n\nexport function hasState(path: string, state: any) {\n  return state[path] !== undefined;\n}\n\nexport function factory<T extends ITypes>(config: T): T {\n  return config;\n}\n\nexport function mkEntity(id: EntityIdType): IEntity {\n  return { id };\n}\n\nexport function isSameEntity(a: IEntity, b: IEntity) {\n  return a.id === b.id;\n}\n\nexport function values(obj: any) {\n  return Object.keys(obj).map(key => obj[key]);\n}\n\nexport function first<T>(array: T[]): T {\n  return array[0];\n}\n\nexport const defaultIdGenerator = (genesis: number = 0): IdGeneratorFunc => {\n  let epoch: number = genesis;\n  return () => ({ next: () => epoch++ })\n}\n\nexport const defaultComponentEvents = (): IComponentEvents => ({\n  onUpdate: (component: IComponent, entity: IEntity) => null,\n  onChange: (eventName: string, component: IComponent, entity: IEntity) => null,\n})\n\nexport function partialSetValue(object: any) {\n  return (path: (string | number)[], value: any) => setValue(object, path, value);\n}\n\nexport function setValue(object: any, path: (string | number)[], value: any) {\n  let a = path;\n  let o = object;\n\n  for (let i = 0; i < a.length - 1; i++) {\n      let n = a[i];\n      if (n in o) {\n          o = o[n];\n      } else {\n          o[n] = {};\n          o = o[n];\n      }\n  }\n\n  o[a[a.length - 1]] = value;\n}\n\nexport function getValue<T extends any>(object: T, path: string) {\n  let o = object;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  let a = path.split('.');\n\n  while (a.length) {\n      let n = a.shift() as string;\n\n      if (n in o) {\n          o = o[n];\n      } else {\n          return;\n      }\n  }\n\n  return o;\n}\n\nexport function keys<O>(o: O) {\n  return Object.keys(o) as (keyof O)[];\n}\n\nexport function once(fn: AnonymousCB) {\n  let called = false;\n  return (...args: any[]) => {\n    if (!called) {\n      called = true;\n      return fn(...args);\n    }\n    return undefined;\n  }\n}\n\nexport const clamp = (min: number, max: number, num: number) => {\n  return num < min ? min : num > max ? max : num;\n}\n\nexport const ifStateProp = (obj: any) => {\n  return obj && obj.state !== undefined;\n}\nexport function boxMullerRandomGeneratorFactory() {\n  let phase:      number = 0;\n  let random:     () => number;\n  let x1:         number;\n  let x2:         number;\n  let w:          number;\n  let z:          number;\n\n  random = Math.random;\n\n  return function () {\n      if (!phase) {\n          do {\n              x1 = 2.0 * random() - 1.0;\n              x2 = 2.0 * random() - 1.0;\n              w = x1 * x1 + x2 * x2;\n          } while (w >= 1.0);\n\n          w = Math.sqrt((-2.0 * Math.log(w)) / w);\n          z = x1 * w;\n      } else {\n          z = x2 * w;\n      }\n\n      phase ^= 1;\n\n      return z;\n  }\n};\n\n/**\n * limits your function to be called at most every W milliseconds, where W is wait.\n * Calls over W get dropped.\n * Thanks to Pat Migliaccio.\n * see https://medium.com/@pat_migliaccio/rate-limiting-throttling-consecutive-function-calls-with-queues-4c9de7106acc\n * @param fn\n * @param wait\n * @example let throttledFunc = throttle(myFunc,500);\n */\nexport function throttle<T>(fn: Function, wait: number){\n  let isCalled = false;\n  let last: T;\n  return function(...args: any[]): T {\n    if (!isCalled){\n      last = fn(...args);\n      isCalled = true;\n      setTimeout(function(){\n        isCalled = false;\n      }, wait)\n    }\n    return last;\n  };\n}\n\nexport const defaultBoundary = {\n  top:    0,\n  left:   0,\n  bottom: 600,\n  right:  800,\n}\n\nexport enum KeysEnum {\n  Backspace = 8,\n  Tab = 9,\n  Enter = 13,\n  Shift = 16,\n  Ctrl = 17,\n  Alt = 18,\n  PauseBreak = 19,\n  CapsLock = 20,\n  Escape = 27,\n  Space = 32,\n  PageUp = 33,\n  PageDown = 34,\n  End = 35,\n  Home = 36,\n\n  LeftArrow = 37,\n  UpArrow = 38,\n  RightArrow = 39,\n  DownArrow = 40,\n\n  Insert = 45,\n  Delete = 46,\n\n  Zero = 48,\n  ClosedParen = Zero,\n  One = 49,\n  ExclamationMark = One,\n  Two = 50,\n  AtSign = Two,\n  Three = 51,\n  PoundSign = Three,\n  Hash = PoundSign,\n  Four = 52,\n  DollarSign = Four,\n  Five = 53,\n  PercentSign = Five,\n  Six = 54,\n  Caret = Six,\n  Hat = Caret,\n  Seven = 55,\n  Ampersand = Seven,\n  Eight = 56,\n  Star = Eight,\n  Asterik = Star,\n  Nine = 57,\n  OpenParen = Nine,\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  LeftWindowKey = 91,\n  RightWindowKey = 92,\n  SelectKey = 93,\n\n  Numpad0 = 96,\n  Numpad1 = 97,\n  Numpad2 = 98,\n  Numpad3 = 99,\n  Numpad4 = 100,\n  Numpad5 = 101,\n  Numpad6 = 102,\n  Numpad7 = 103,\n  Numpad8 = 104,\n  Numpad9 = 105,\n\n  Multiply = 106,\n  Add = 107,\n  Subtract = 109,\n  DecimalPoint = 110,\n  Divide = 111,\n\n  F1 = 112,\n  F2 = 113,\n  F3 = 114,\n  F4 = 115,\n  F5 = 116,\n  F6 = 117,\n  F7 = 118,\n  F8 = 119,\n  F9 = 120,\n  F10 = 121,\n  F11 = 122,\n  F12 = 123,\n\n  NumLock = 144,\n  ScrollLock = 145,\n\n  SemiColon = 186,\n  Equals = 187,\n  Comma = 188,\n  Dash = 189,\n  Period = 190,\n  UnderScore = Dash,\n  PlusSign = Equals,\n  ForwardSlash = 191,\n  Tilde = 192,\n  GraveAccent = Tilde,\n\n  OpenBracket = 219,\n  ClosedBracket = 221,\n  Quote = 222\n}\n  ","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nexport type WithName = { name: string };\n\nexport function nameableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithName, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithName>>({\n        id,\n        name: 'name',\n        entityId: entity.id,\n        state: { name: state.name },\n        update: () => null,\n      }))\n  }\n}\n","export const ON_START_GAME      = 'game:start';\nexport const ON_GAME_WIN        = 'game:win';\nexport const ON_GAME_OVER       = 'game:lose';\n\nexport const ON_LEVEL_LOAD      = 'level:load';\nexport const ON_LEVEL_BEGIN     = 'level:begin';\nexport const ON_LEVEL_COMPLETE  = 'level:finished';\n\nexport const ON_ATTACK          = 'attack:*';\nexport const ON_PLAYER_ATTACK   = 'attack:player';\nexport const ON_ENEMY_ATTACK    = 'attack:enemy';\n\nexport const ON_COLLISION       = 'collision:begin';\n\nexport const ON_DEATH           = 'dead:*';\nexport const ON_ENEMY_DEATH     = 'dead:enemy';\nexport const ON_CHARACTER_DEATH = 'dead:player';\n\nexport const ON_ENEMY_FREE      = 'enemy:free';\nexport const ON_ENEMY_GROUP     = 'enemy:group';\nexport const ON_ENEMY_PATH      = 'enemy:path';\n\nexport const ON_START_ENGINE    = 'engine:start';\nexport const ON_STOP_ENGINE     = 'engine:stop';\n\n// !!! Move to the catalogue I think\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, defaultComponentEvents } from \"../utils\";\nimport { ON_ENEMY_DEATH } from \"../../events\";\n\nconst COMPONENT_NAMESPACE = 'health';\n\nexport interface WithHealth {\n  health: {\n    value: number;\n    immortal?: boolean;\n  };\n};\n\nexport type WithHealthState = WithHealth & { isDead?: boolean; };\n\nexport function killableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithHealthState, events: IComponentEvents, id: number = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithHealthState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { health: state.health, isDead: state.isDead },\n        update: (system: ISystemManager, component: IComponent<WithHealthState>) => {\n\n          if (component.state.health.immortal) {\n            return;\n          }\n\n          const wasDeadBefore = component.state.isDead;\n          const isDeadNow = !(component.state.health.value > 0);\n\n          component.state.isDead = isDeadNow;\n\n          if (!wasDeadBefore && isDeadNow) {\n            // sad times\n            events.onChange!(ON_ENEMY_DEATH, component, entity)\n          }\n        },\n      }))\n  }\n}\n\nexport type IKillableEntity = IComponent<WithHealthState>\n\nexport const selectKillableState = createSelector<WithHealthState>(COMPONENT_NAMESPACE);\nexport const setKillableState    = createSetter<WithHealthState>(selectKillableState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents, IVector } from \"../types\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'geometry';\n\nexport type IGeometry  = { width: number; height: number; };\nexport type WithGeometry = { geometry: IGeometry };\n\nexport function withGeometryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithGeometry, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithGeometry>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { geometry: { width: state.geometry.width, height: state.geometry.height } },\n        update: (system: ISystemManager, component: IWithGeometryEntity) => null,\n      }))\n  }\n}\n\nexport type IWithGeometryEntity = IComponent<WithGeometry>\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, boxMullerRandomGeneratorFactory, clamp, throttle } from \"../utils\";\n\nexport type WithRandomWalkArgs = { controls?: Partial<WithRandomWalk> };\nexport type WithRandomWalk = { direction: IVector; moving: boolean; speed: IVector; disabled: boolean; jitter: number; };\n\nconst defaults = { direction: { x: 0, y: 0 }, moving: true, speed: { x: 2, y: 1.65 }, disabled: false, jitter: 400 }\n\nexport function withRandomWalkFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithRandomWalkArgs, events: IComponentEvents, id = -1) => {\n\n    const options = state.controls || defaults;\n\n    let jitter: number = options.jitter || defaults.jitter;\n    let randomWalkGeneratorX: () => number;\n    let randomWalkGeneratorY: () => number;\n\n    const setJitter = (level?: number) => {\n      jitter = level || defaults.jitter;\n      randomWalkGeneratorX = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n      randomWalkGeneratorY = throttle<number>(boxMullerRandomGeneratorFactory(), jitter);\n    }\n\n    setJitter(jitter);\n\n    return system.registerComponent(\n      factory<IComponent<WithRandomWalk>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: options.direction || { x: 0, y: 0 },\n          moving: options.moving || true,\n          speed: options.speed || { x: 2, y: 1.65 },\n          disabled: options.disabled || false,\n          jitter,\n        },\n        update: (system: ISystemManager, component: IWithRandomWalkEntity) => {\n\n          if (component.state.jitter !== jitter) {\n            setJitter(jitter);\n          }\n\n          if (!component.state.disabled) {\n            handleMovement(entity, component, system, events, randomWalkGeneratorX, randomWalkGeneratorY);\n          }\n        },\n      }))\n  }\n}\n\ntype IWithRandomWalkEntity = IComponent<WithRandomWalk & Partial<WithPosition>>;\ntype RNGFunc = (...args: any[]) => number;\n\nfunction handleMovement(entity: IEntity, component: IWithRandomWalkEntity, system: ISystemManager, events: IComponentEvents, randomWalkGeneratorX: RNGFunc, randomWalkGeneratorY: RNGFunc) {\n\n  const deltaX = randomWalkGeneratorX();\n  const deltaY = randomWalkGeneratorY();\n\n  component.state.direction.x = clamp(-1, 1, deltaX);\n\n  component.state.direction.y = clamp(-1, 1, deltaY);\n\n  const {x, y} = component.state.direction;\n\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'collidable';\n\nexport type IsCollidable = { collidable?: boolean; };\n\nexport function isCollidableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: IsCollidable, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsCollidable>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collidable: state.collidable || true },\n        update: (system: ISystemManager, component: ICollidableEntity) => null,\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<IsCollidable & WithGeometry & WithPosition>;\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'loot';\n\nexport type IsLootable<T extends any = {}> = { loot?: T; };\n\nexport function lootableFactory<T>(system: ISystemManager) {\n  return (entity: IEntity, state: IsLootable<T>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<IsLootable<T>>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { loot: state.loot },\n        update: (system: ISystemManager, component: LootableEntity) => null,\n      }))\n  }\n}\n\nexport type LootableEntity<T extends any = {}> = IComponent<IsLootable<T> & WithGeometry & WithPosition>\n\nexport const selectLootableState = createSelector<LootableEntity>(COMPONENT_NAMESPACE);\nexport const setLootableState    = createSetter<LootableEntity>(selectLootableState);\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; }\n\nexport function withWrapAroundPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPosition>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: state.position },\n        update: (system: ISystemManager, component: IComponent<WithPosition>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n  \nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPosition>, events: IComponentEvents) {\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n\n  // wrap around if necessary\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n  \n  if (ifStateProp(boundaryComponent) && ifStateProp(geometryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n\n    const {x, y} = component.state.position;\n    component.state.position.x = (x < boundary.left) ? (boundary.right - width) : (x > boundary.right) ? boundary.left : x;\n    component.state.position.y = (y < boundary.top) ? (boundary.bottom - height) : (y > boundary.bottom) ? boundary.top : y;\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IComponent, ISystemManager, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents, BoundedTouchingState, BoundedTouchingStateKeys } from \"../types\";\nimport { factory, createSelector, createSetter, keys, defaultBoundary } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\n\nconst COMPONENT_NAMESPACE = 'boundary';\n\nexport type WithBoundary = { boundary: Bounds; };\n\nexport function withBoundaryFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBoundary, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBoundary>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { boundary: state.boundary || defaultBoundary },\n        update: (system: ISystemManager, component: IBoundedEntity) => null,\n      }))\n  }\n}\n\ntype IBoundedEntity = IComponent<WithGeometry & WithPosition & WithBoundary>\n\nexport const selectBoundaryState = createSelector<IBoundedEntity>(COMPONENT_NAMESPACE);\nexport const setBoundaryState    = createSetter<IBoundedEntity>(selectBoundaryState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'texture';\n\nexport type WithTexture = { texture: string | number; };\n\nexport function withTextureFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithTexture, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithTexture>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state:    { texture: state.texture },\n        update:   (system: ISystemManager, component: IWithTextureEntity) => null,\n      }))\n  }\n}\n\nexport type IWithTextureEntity = IComponent<WithTexture>\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\n\nimport { factory, ifStateProp } from \"../utils\";\nimport { WithPosition } from \"./withPosition\";\n\ntype WiggleState = { counter: number; increment: number; };\n\nexport type WithBugWiggleArgs = { wiggling: boolean; wiggleState?: WiggleState; };\nexport type WithBugWiggle = { wiggling: boolean; wiggleState: WiggleState; };\n\nconst BRAKE       = 0.1;\nconst PULSE_WIDTH = 4;\n\nexport function withBugWiggleFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithBugWiggleArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithBugWiggle>>({\n        id,\n        entityId: entity.id,\n        name: 'wiggle',\n        state: {\n          wiggling: state.wiggling,\n\n          wiggleState: {\n            counter: 0,\n            increment: +1,\n          }\n        },\n        update: (system: ISystemManager, component: IWithBugWiggleEntity) => {\n          handleBugWiggle(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype IWithBugWiggleEntity = IComponent<WithBugWiggle & Partial<WithPosition>>;\n\nfunction handleBugWiggle(entity: IEntity, component: IWithBugWiggleEntity, system: ISystemManager, events: IComponentEvents) {\n\n  if (!component.state.wiggling) {\n    return;\n  }\n\n  let {counter, increment} = component.state.wiggleState;\n\n  if(counter == PULSE_WIDTH) {\n    component.state.wiggleState.increment = -1;\n  };\n\n  if(counter == -PULSE_WIDTH) {\n    component.state.wiggleState.increment = +1;\n  };\n\n  component.state.wiggleState.counter+= increment;\n\n  const positionComponent = system.getEntityComponent<WithPosition>(entity, 'position');\n\n  if (ifStateProp(positionComponent)) {\n    positionComponent.state.position.x += (counter * BRAKE);\n  }\n}\n","import { ISystemManager, IVector, IDimensions } from \"../../engine/types\";\nimport { createMob } from \"../Domain/mob\";\nimport { defaultBoundary } from \"../../engine/utils\";\n\nexport function createEnemy(\n    system:           ISystemManager,\n    textureId:        number,\n    name:             string,\n    position?:        IVector,\n    geometry?:        IDimensions,\n) {\n\n  const entity = createMob(system, {\n    name,\n\n    texture: textureId,\n\n    wiggling: true,\n\n    controls: {\n      disabled: true,\n    },\n\n    health: {\n      value: 1,\n    },\n\n    position: position || {\n      x: -999,\n      y: -999,\n    },\n\n    geometry: geometry ||{\n      width:  64,\n      height: 64,\n    },\n\n    loot: {\n      points: 10,\n    },\n\n    boundary: defaultBoundary,\n  });\n\n  return entity;\n}\n","import { IEntity, ISystemManager } from \"../../engine/types\";\nimport { IPointsLoot } from \"../types\";\n\nimport { nameableFactory,               WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,               WithHealthState } from \"../../engine/components/killable\";\nimport { withGeometryFactory,           WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withRandomWalkFactory,         WithRandomWalkArgs } from \"../../engine/components/withRandomWalk\";\nimport { isCollidableFactory,           IsCollidable } from \"../../engine/components/isCollidable\";\nimport { lootableFactory,               IsLootable } from \"../../engine/components/lootable\";\nimport { withWrapAroundPositionFactory, WithPosition } from \"../../engine/components/withWrapAroundPosition\";\nimport { withBoundaryFactory,           WithBoundary } from \"../../engine/components/withBoundary\";\nimport { withTextureFactory,            WithTexture } from \"../../engine/components/withTexture\";\nimport { withBugWiggleFactory,          WithBugWiggle, WithBugWiggleArgs } from \"../../engine/components/withBugWiggle\";\nimport { WithPositionState } from \"../../engine/components/withPosition\";\n\n\nexport function createMob(\n  system:   ISystemManager,\n  options:  MobModelArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withHealth      = killableFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withBoundary    = withBoundaryFactory(system);\n  const withPosition    = withWrapAroundPositionFactory(system);\n  const withBugWiggle   = withBugWiggleFactory(system);\n  const withRandomWalk  = withRandomWalkFactory(system);\n  const isCollidable    = isCollidableFactory(system);\n  const withTexture     = withTextureFactory(system);\n  const isLootable      = lootableFactory<IPointsLoot>(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withHealth(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withTexture(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBoundary(entity, options, system.events)\n  );\n  system.registerComponent(\n    withRandomWalk(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBugWiggle(entity, options, system.events)\n  );\n  system.registerComponent(\n    isCollidable(entity, options, system.events)\n  );\n  system.registerComponent(\n    isLootable(entity, options, system.events)\n  );\n  return entity;\n}\n\nexport type MobModelArgs =\n  WithName                &\n  WithHealthState         &\n  WithPosition            &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggleArgs       &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n\nexport type MobModel =\n  WithName                &\n  WithHealthState         &\n  WithPositionState       &\n  WithGeometry            &\n  WithTexture             &\n  WithBoundary            &\n  WithRandomWalkArgs      &\n  WithBugWiggle           &\n  IsLootable<IPointsLoot> &\n  IsCollidable;\n","import MenuMusic from '../audio/Music/game-menu.mp3'\nimport MainMusic from '../audio/Music/game-main.mp3'\nimport EndMusic from '../audio/Music/game-end.mp3'\nimport SummaryMusic from '../audio/Music/game-main-summary.mp3'\n\nimport GameOverSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare1.wav'\nimport YouWinSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup3.wav'\nimport LevelWinSound from '../audio/General Sounds/Fanfares/sfx_sounds_fanfare3.wav'\nimport NextLevelSound from '../audio/General Sounds/Positive Sounds/sfx_sounds_powerup2.wav'\nimport NewGameSound from '../audio/General Sounds/Interactions/sfx_sounds_interaction1.wav'\nimport PauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_in.wav'\nimport UnPauseGameSound from '../audio/General Sounds/Pause Sounds/sfx_sounds_pause1_out.wav'\nimport { Omit } from 'react-router';\n\n\nexport const mkAudioSrc = (src: string, opts?: Omit<IHowlProperties, 'src'>) => ({ src: [src], ...opts });\n\nexport enum SpriteTextureIds {\n  Player          = 0,\n  Bug             = 1,\n  CrabBug         = 2,\n  HelmetBug       = 3,\n  PincerBug       = 4,\n  SonicBug        = 5,\n}\n\nexport const Sfx = {\n  NEW_GAME:     'newgame',\n  GAMEOVER:     'gameover',\n  YOU_WIN:      'youwin',\n  LEVEL_WIN:    'levelwin',\n  PAUSE:        'pause',\n  UNPAUSE:      'unpause',\n  NEXT_LEVEL:   'nextlevel',\n}\n\nexport const Songs = {\n  MENU:     'game-menu',\n  GAME:     'game-main',\n  END:      'game-end',\n  SUMMARY:  'game-main-summary',\n}\n\nexport const SongLibrary = {\n  [Songs.MENU]:     mkAudioSrc(MenuMusic,     { volume: 0.8 }),\n  [Songs.GAME]:     mkAudioSrc(MainMusic,     { volume: 0.4 }),\n  [Songs.END]:      mkAudioSrc(EndMusic,      { volume: 0.8 }),\n  [Songs.SUMMARY]:  mkAudioSrc(SummaryMusic,  { volume: 0.8 }),\n}\n\nexport const SfxLibrary = {\n  [Sfx.GAMEOVER]:    mkAudioSrc(GameOverSound),\n  [Sfx.LEVEL_WIN]:   mkAudioSrc(LevelWinSound),\n  [Sfx.NEXT_LEVEL]:  mkAudioSrc(NextLevelSound),\n  [Sfx.YOU_WIN]:     mkAudioSrc(YouWinSound),\n  [Sfx.NEW_GAME]:    mkAudioSrc(NewGameSound),\n  [Sfx.PAUSE]:       mkAudioSrc(PauseGameSound),\n  [Sfx.UNPAUSE]:     mkAudioSrc(UnPauseGameSound),\n}\n","import { IEntity, WithComponentMeta, ISystemManager } from \"../../engine/types\";\nimport * as React from 'react';\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\ninterface WithEntityProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withEntity = <P extends MobModel | CharacterModel> (\n    Component: React.ComponentType<IModelType<P>>,\n): React.ComponentType<WithEntityProps> => {\n  function WithEntity(props: WithEntityProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <Component {...rest} model={model} system={system} />;\n  };\n\n  return WithEntity;\n}\n","import {useState} from 'react';\n\n\nexport const withAnimationState = (options: WithAnimationOptions) => {\n  const [animations, setAnimations] = useState(options.animations);\n  const [currentFrame, setCurrentFrame] = useState(options.currentFrame || getDefaultFrame(options));\n  const [currentState, setCurrentState] = useState(options.currentState);\n  const [timers, setTimers] = useState<NodeJS.Timer[]>([])\n\n  function queueFrame(frame: string, when: number) {\n    const setFrame = (fr: string) => setCurrentFrame(fr);\n\n    timers.push(setTimeout(() => setFrame(frame), when));\n  }\n\n  if (different(options.currentState, currentState)) {\n    let buffer: number = 0;\n\n    setCurrentState(options.currentState);\n\n    animations[currentState]\n      .forEach(({ frame, duration }) => {\n        queueFrame(frame, buffer);\n        buffer += duration;\n      }\n    )\n    \n    const timer = setTimeout(() => {\n      options.onFinished(currentState)\n    }, buffer);\n\n    setTimers(timers.concat(timer));\n  }\n\n  return { currentFrame, setCurrentState };\n}\n\nexport interface WithAnimationOptions {\n  animations:       IAnimations;\n  currentState:     keyof IAnimations;\n  onFinished:       (...args: any[]) => void;\n  currentFrame?:    string;\n}\n\ninterface IFrame {\n  frame:      string;\n  duration:   number;\n}\n\ninterface IAnimations {\n  normal: IFrame[];\n  death:  IFrame[];\n}\n\nexport function different<T>(a: T, b: T) {\n  return a !== b;\n}\n\nexport const fr = (frame: string, duration: number) => ({ frame, duration });\n\nexport function getDefaultFrame(options: WithAnimationOptions): string {\n  return options.animations[options.currentState][0].frame;\n}\n","import { ISystemManager, IAudioCollectionInitializer, WithComponentMeta, IComponent, IEntity, EntityIdType } from '../../engine/types';\nimport {useEffect} from 'react';\n\nimport { ON_DEATH, ON_ATTACK } from '../../events';\nimport { keys } from '../../engine/utils';\nimport { WithHealthState } from '../../engine/components/killable';\n\n\nexport const withSoundEffects = <T>(options: WithSoundEffectsOptions<T>) => {\n\n  const playDeathAudio = (component: IComponent<WithHealthState>, entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'death');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  const playAttackAudio = (entity: IEntity): void => {\n    const collectionKey = mkAudioCollectionKey(entity.id, 'shoot');\n    options.system.audio.playSound(collectionKey);\n  }\n\n  useEffect(() => {\n    options.system.events.registerEvent(ON_DEATH,         playDeathAudio);\n    options.system.events.registerEvent(ON_ATTACK,        playAttackAudio);\n\n    keys(options.sounds).map(key => {\n      const collectionKey = mkAudioCollectionKey(options.entity.id, `${key}`);\n\n      options.system.audio.registerSound(collectionKey, {\n        src: [options.sounds[key]],\n        volume: 0.2,\n      })\n    })\n\n    return function cleanup() {\n      options.system.events.unRegisterEvent(ON_DEATH,     playDeathAudio);\n      options.system.events.unRegisterEvent(ON_ATTACK,    playAttackAudio);\n  \n      keys(options.sounds).map((actionType: string | number) => {\n        const collectionKey = mkAudioCollectionKey(options.entity.id, `${actionType}`);\n\n        options.system.audio.unRegisterSound(collectionKey);\n      })\n    }\n  }, []);\n};\n\nexport type WithSoundEffectsOptions<T> = {\n  entity:         WithComponentMeta<T>\n  system:         ISystemManager;\n  sounds:         IAudioCollectionInitializer;\n}\n\nexport function mkAudioCollectionKey(entityId: EntityIdType, action: string) {\n  return `entity-${entityId}:${action}`;\n}\n","import { IModelType } from './withEntity';\nimport * as React from 'react';\nimport { Omit } from 'react-router';\n\nimport { CharacterModel } from '../../game/Domain/character';\nimport { MobModel } from '../../game/Domain/mob';\n\nimport { withAnimationState, WithAnimationOptions } from '../hooks/withAnimationState';\nimport { withSoundEffects } from '../hooks/withSoundEffects';\nimport { IAudioCollectionInitializer } from '../../engine/types';\n\n\ninterface WithSpriteEffectsOptions extends WithAnimationOptions {\n  elementId:          string;\n  sounds:             IAudioCollectionInitializer;\n}\n\ntype HOCModelType = MobModel | CharacterModel;\n\ntype ISpriteState = 'normal' | 'death';\n\nexport function withSpriteEffects<T extends HOCModelType>(\n  options: Omit<WithSpriteEffectsOptions, 'onFinished'>\n): React.ComponentType<IModelType<T>> {\n  return function WithSpriteEffectsHOC(props: IModelType<T>) {\n    const [hidden, setHidden] = React.useState(() => false)\n    const [dead, setDead]     = React.useState(() => false)\n\n    const {currentFrame, setCurrentState} = withAnimationState({\n      animations:             options.animations,\n      currentState:           options.currentState,\n\n      onFinished:             (state: ISpriteState) =>\n        { if (state === 'death') setHidden(true); }\n    });\n\n    withSoundEffects<T>({\n      entity:         props.model,\n      system:         props.system,\n      sounds:         options.sounds,\n    });\n\n    if (!hidden && !dead && props.model.isDead) {\n      setCurrentState('death');\n\n      setDead(true);\n    }\n  \n    const styles: React.CSSProperties = {\n      position:               'absolute',\n      backgroundImage:        `url(${currentFrame})`,\n      backgroundSize:         'contain',\n      backgroundPosition:     'center',\n      width:                  '64px',\n      height:                 '64px',\n      left:                   hidden ? -9999 : props.model.position.x,\n      top:                    hidden ? -9999 : props.model.position.y,\n      display:                cssDisplayValue(hidden),\n    }\n  \n    return (\n      <div id={options.elementId} className=\"sprite\" style={styles} />\n    )\n  }\n}\n\nfunction cssDisplayValue(dead: boolean) {\n  return dead ? 'none' : ''\n}\n","import { CharacterModel } from '../../../game/Domain/character';\n\nimport { withEntity } from '../../Hoc/withEntity';\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Cannon/sfx_wpn_cannon1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedPlayer = withSpriteEffects<CharacterModel>({\n  elementId: 'player',\n\n  currentState: 'normal',\n\n  animations: {\n    normal: [\n      fr(require('../../../assets/player/ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/player/explosion-1/explosion-1-01.png'), 0),\n      fr(require('../../../assets/player/explosion-1/explosion-1-02.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-03.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-04.png'), 100),\n      fr(require('../../../assets/player/explosion-1/explosion-1-05.png'), 75),\n    ],\n  },\n\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n});\n\nexport const ConnectedPlayer = withEntity<CharacterModel>(AnimatedPlayer)\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_soft5.wav';\n\nexport const AnimatedBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/enemy/enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Short/sfx_exp_short_hard12.wav';\n\n\nexport const AnimatedCrabBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/crab-bug/crab-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Clusters/sfx_exp_cluster1.wav';\n\nexport const AnimatedHelmetBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/helmet-bug/helmet-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Odd/sfx_exp_odd1.wav';\n\nexport const AnimatedPincerBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/pincer-bug/pincer-bug-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","import { MobModel } from '../../../game/Domain/mob';\n\nimport { withSpriteEffects } from '../../Hoc/withSpriteEffects';\nimport { fr } from '../../hooks/withAnimationState';\n\nimport ShootSound from '../../../audio/Weapons/Lasers/sfx_wpn_laser1.wav';\nimport DeathSound from '../../../audio/Explosions/Long/sfx_exp_long1.wav';\n\nexport const AnimatedSonicBug = withSpriteEffects<MobModel>({\n  elementId: 'enemy',\n  animations: {\n    normal: [\n      fr(require('../../../assets/sonic-enemy/sonic-enemy-ship.png'), 0)\n    ],\n    death: [\n      fr(require('../../../assets/enemy/enemy-explosion-00.png'), 0),\n      fr(require('../../../assets/enemy/enemy-explosion-01.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-02.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-03.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-04.png'), 100),\n      fr(require('../../../assets/enemy/enemy-explosion-05.png'), 75),\n    ],\n  },\n  sounds: {\n    shoot: ShootSound,\n    death: DeathSound,\n  },\n  currentState: 'normal',\n});\n","\nimport { SpriteTextureIds } from \"../../game/catalogue\";\nimport { ConnectedPlayer } from \"./Player/Player\";\nimport { AnimatedBug, AnimatedCrabBug, AnimatedHelmetBug, AnimatedPincerBug, AnimatedSonicBug } from \"./NPCs\";\n\n\nexport const SpriteTextureCollection: TextureIdIndexed = {\n    [SpriteTextureIds.Player]:      ConnectedPlayer,\n    [SpriteTextureIds.Bug]:         AnimatedBug,\n    [SpriteTextureIds.CrabBug]:     AnimatedCrabBug,\n    [SpriteTextureIds.HelmetBug]:   AnimatedHelmetBug,\n    [SpriteTextureIds.PincerBug]:   AnimatedPincerBug,\n    [SpriteTextureIds.SonicBug]:    AnimatedSonicBug,\n}\n\ntype TextureIdIndexed = { [K in SpriteTextureIds]: any; }\n","\nimport { IEntity, WithComponentMeta, ISystemManager } from \"../../engine/types\";\nimport * as React from 'react';\n\nimport { MobModel } from \"../../game/Domain/mob\";\nimport { CharacterModel } from \"../../game/Domain/character\";\n\nimport { SpriteTextureCollection } from \"../Containers/Sprites\";\nimport { SpriteTextureIds } from \"../../game/catalogue\";\n\nexport interface WithTextureProps {\n  entity:     IEntity;\n  system:     ISystemManager;\n  onDeath?:   (entity: IEntity) => void;\n}\n\nexport type IModelType<P> = { model: WithComponentMeta<P>; system: ISystemManager };\n\nexport const withTexture = <P extends MobModel | CharacterModel> (\n  textureId: SpriteTextureIds,\n): React.ComponentType<WithTextureProps> => {\n  const ConnectedComponent: React.ComponentType<IModelType<P>> = SpriteTextureCollection[textureId]\n  function WithTextureHOC(props: WithTextureProps) {\n    const { entity, system, ...rest } = props;\n    const model = system.getEntityModel<P>(props.entity);\n    return <ConnectedComponent {...rest} model={model} system={system} />;\n  };\n\n  return WithTextureHOC;\n}\n","import { ISystemManager } from \"../engine/types\";\nimport { MouseEvent } from \"react\";\nimport { createEnemy } from \"../game/factories/enemy\";\nimport { withTexture } from \"./Hoc/withTexture\";\nimport { ILoadedEnemy } from \"./Levels/types\";\n\nexport function loadLevel(system: ISystemManager, enemyPositions: number[][]): ILoadedEnemy[] {\n  let enemies: ILoadedEnemy[] = [];\n\n  let x: number = 0;\n  let y: number = 0;\n\n  for (const row of enemyPositions) {\n    for (const enemyTypeId of row) {\n      if (enemyTypeId !== 0) {\n        const geometry = {\n          width:    64,\n          height:   64,\n        }\n  \n        const position = {\n          x:    x * geometry.width,\n          y:    y * geometry.height,\n        }\n  \n        const entity = createEnemy(system, enemyTypeId, JSON.stringify(position), position, geometry)\n        enemies.push({\n          component: withTexture(enemyTypeId),\n          entity,\n        });\n      }\n\n      x++;\n    }\n\n    x = 0;\n    y++;\n  }\n\n  return enemies;\n}\n\nexport function withBlur(handler: any) {\n  return (event: MouseEvent<HTMLButtonElement>): void | undefined => {\n    event.currentTarget.blur();\n    handler(event);\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  updateFrequency?: number;\n}\n\ninterface State {\n  value: number;\n}\n\nexport class FPS extends React.Component<Props, State> {\n  private lastLoop: number = (new Date()).getMilliseconds();\n  private count: number = 1;\n  private fps: number = 0;\n  private throttled: boolean = false;\n  private handler: number | undefined;\n\n  static defaultProps = {\n    updateFrequency: 500,\n  }\n\n  state = {\n    value: 0,\n  }\n\n  componentDidMount() {\n    this.setFps(this.countFps());\n    this.loop();\n  }\n\n  componentWillUnmount() {\n    if (this.handler) {\n      cancelAnimationFrame(this.handler)\n    }\n  }\n\n  countFps = () => {\n    const currentLoop = (new Date()).getMilliseconds();\n    if (this.lastLoop > currentLoop) {\n      this.fps = this.count;\n      this.count = 1;\n    } else {\n      this.count += 1;\n    }\n    this.lastLoop = currentLoop;\n    return this.fps;\n  };\n  \n  loop = () => {\n    this.handler = requestAnimationFrame(() => {\n      this.setFps(this.countFps());\n      this.loop();\n    });\n  }\n\n  setFps = (value: number) => {\n    if (!this.throttled) {\n      this.setState({ value })\n      this.throttled = true;\n      this.handler = setTimeout(() => {\n        this.throttled = false;\n      }, this.props.updateFrequency)\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"fps\">Fps: {this.state.value}</div>\n    );\n  }\n}\n","import { ISystemManager, IFactoryComponent } from '../../engine/types';\nimport * as React from 'react';\nimport './styles/Dev.style.css';\n\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Draggable from 'react-draggable';\n\nimport { pp } from '../../engine/utils';\nimport { withBlur } from '../utils';\nimport { withEntity } from '../Hoc/withEntity';\nimport { FPS } from './FPS';\nimport { Screens } from '../Screens';\n\ninterface Props {\n  system:   ISystemManager;\n  onStart:  () => void;\n  onStop:   () => void;\n  onTick:   () => void;\n  onSave:   () => void;\n  onLoad:   () => void;\n  nav:      (screen: Screens) => void;\n}\n\nconst EntityInspector = withEntity(props =>\n  <pre>{pp(props.model)}</pre>\n);\n\nexport const DevScreen = (props: Props) => {\n  const [entityId, setEntityId] = useState(0);\n\n  const [open, setOpen]         = useState(false);\n  const [dragging, setDrag]     = useState(false);\n\n  const setDragFalse = () => setDrag(false);\n  const setDragTrue  = () => setDrag(true);\n  const toggleOpen   = () => setOpen(!open);\n\n  const handleClick = () => {\n    dragging ? open : toggleOpen();\n    setDragFalse();\n  }\n\n  return (\n    <Draggable>\n      <div id=\"devscreen\" className={'container'}>\n\n        <div id=\"header\">\n          <span className=\"float-left title\" onMouseUp={handleClick} onMouseDown={setDragFalse} onMouseMove={setDragTrue}>\n            <h3>Devtools</h3>\n          </span>\n          <i id=\"close-x\" className=\"icon close float-right\" onClick={handleClick}></i>\n        </div>\n\n        <div className={classNames(!open && 'hidden')}>\n          <span className=\"links\">\n            <a onClick={() => props.nav('intro')}>Intro</a>{' | '}\n            <a onClick={() => props.nav('menu')}>Menu</a>{' | '}\n            <a onClick={() => props.nav('game')}>Game</a>\n          </span>\n\n          <Buttons {...props} />\n\n          <p>Epoch: {props.system.epoch}</p>\n\n          <FPS />\n\n          <div id=\"entity-viewer\">\n            Entities\n            <select onChange={e => {\n              const value = e.currentTarget.value;\n              setEntityId(parseInt(value));\n            }}>\n              {props.system.getState().entities.map(o => {\n                const { name } = props.system.getEntityModel<IFactoryComponent>(o);\n                return <option key={o.id} value={o.id}>{name}</option>\n              })}\n            </select>\n            <div className=\"scrollable p-1\">\n              <EntityInspector entity={{ id: entityId }} system={props.system} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Draggable>\n  )\n}\n\nfunction Buttons(props: Props) {\n  return (\n    <>\n      <button className=\"btn is-primary\" onClick={withBlur(props.onStart)}>Start</button>\n      <button className=\"btn is-error\" onClick={withBlur(props.onStop)}>Stop</button>\n      <button className=\"btn is-success\" onClick={withBlur(props.onTick)}>Evolve</button>\n      <button className=\"btn\" onClick={withBlur(props.onSave)}>Save</button>\n      <button className=\"btn is-warning\" onClick={withBlur(props.onLoad)}>Load</button>\n    </>\n  )\n}\n\nexport function classNames(...classes: (string | boolean | undefined | null)[]) {\n  return classes.filter(o => typeof o === 'string').join(' ');\n}\n","import * as React from 'react';\nimport \"./styles/Layout.style.css\";\n\ninterface Props {\n  id?:            string;\n  className?:     string;\n  topLeft?:       React.ReactNode;\n  topCenter?:     React.ReactNode;\n  topRight?:      React.ReactNode;\n  middleLeft?:    React.ReactNode;\n  middleCenter?:  React.ReactNode;\n  middleRight?:   React.ReactNode;\n  bottomLeft?:    React.ReactNode;\n  bottomCenter?:  React.ReactNode;\n  bottomRight?:   React.ReactNode;\n  background?:    React.ReactNode;\n  children:       React.ReactNode;\n  after?:         React.ReactNode;\n}\n\nexport function Layout(props: Props) {\n  return (\n    <div id={props.id} className={`layout ${props.className}`}>\n      <div className=\"top left\">{props.topLeft}</div>\n      <div className=\"top center\">{props.topCenter}</div>\n      <div className=\"top right\">{props.topRight}</div>\n      <div className=\"middle left\">{props.middleLeft}</div>\n      <div className=\"middle center\">{props.middleCenter}</div>\n      <div className=\"middle right\">{props.middleRight}</div>\n      <div className=\"bottom left\">{props.bottomLeft}</div>\n      <div className=\"bottom center\">{props.bottomCenter}</div>\n      <div className=\"bottom right\">{props.bottomRight}</div>\n      <div className=\"background\">{props.background}</div>\n      <div className=\"gamescreen\">{props.children}</div>\n      {props.after}\n    </div>\n  )\n}\n  ","import * as React from 'react';\nimport { Layout } from '../Layouts/Base';\nimport { Screens } from '../Screens';\n\ninterface Props {\n  onPlayerInput: (ev: KeyboardEvent) => void;\n  nav:           (screen: Screens) => void;\n}\n\nexport class Intro extends React.Component<Props> {\n\n  componentDidMount() {\n    // document.addEventListener('keypress', this.props.onPlayerInput);\n    this.props.nav('menu');\n  }\n\n  componentWillUnmount() {\n    // document.removeEventListener('keypress', this.props.onPlayerInput);\n  }\n\n  render() {\n    return (\n      <Layout id=\"intro\" className=\"game-screen\">\n      </Layout>\n    )\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n    value: number;\n  }\n  \n  export function Lives(props: Props) {\n    return (\n      <div className=\"flex rows\">\n        <span>1UP</span>\n        <span>{props.value}</span>\n      </div>\n    )\n  }\n  ","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function HighScore(props: Props) {\n  return (\n    <div className=\"flex rows\">\n      <span>High Score</span>\n      <span className=\"center-text\">{props.value}</span>\n    </div>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: number;\n}\n\nexport function Credits(props: Props) {\n  return (\n    <span>Credits {props.value}</span>\n  )\n}\n","import * as React from 'react';\n\ninterface Props {\n  value: string | number | undefined;\n}\n\nexport function LevelStatus(props: Props) {\n  return props.value\n    ? <p>{`Level: ${props.value}`}</p>\n    : null;\n}\n","import * as React from 'react';\n\ninterface Props {\n  onClick: () => void;\n}\n\nexport function RestartButton(props: Props) {\n  return <button className=\"btn is-success\" onClick={props.onClick}>Restart</button>;\n}\n","import * as React from 'react';\nimport './styles/Overlay.style.css';\n\nimport { Layout } from \"./Base\";\nimport { Lives } from \"../Components/Lives\";\nimport { HighScore } from \"../Components/HighScore\";\nimport { Credits } from \"../Components/Credits\";\nimport { LevelStatus } from '../Components/LevelStatus';\nimport { RestartButton } from '../Components/RestartButton';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  id:         string;\n  className?: string;\n  level?:     string | number;\n  lives:      number;\n  score:      number;\n  credits:    number;\n  background: React.ReactNode;\n  children:   React.ReactNode;\n  onRestart: () => void;\n}\n\nexport function Gui(props: Props) {\n  return (\n    <Layout\n      id={props.id}\n      className={classNames(props.className, 'retro-container')}\n      topLeft={<Lives value={props.lives} />}\n      topCenter={<HighScore value={props.score} />}\n      topRight={<LevelStatus value={props.level} />}\n      bottomLeft={<Credits value={props.credits} />}\n      background={props.background}\n      bottomRight={<RestartButton onClick={props.onRestart} />}\n    >\n      {props.children}\n    </Layout>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/Logo.style.css';\n\nexport function NewGame() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"logo-container\" className=\"slide-up\">\n        <div id=\"logo\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default NewGame;\n","\nexport function Key()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n\n//Action List\nKey.DOWN = -1;\nKey.UP = 1;\nKey.RESET = 0;\n\n//Update key status based new state\nKey.prototype.update = function(action)\n{\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n\n\tif(action === Key.DOWN)\n\t{\n\t\tif(!this.pressed)\n\t\t{\n\t\t\tthis.justPressed = true;\n\t\t}\n\t\tthis.pressed = true;\n\t}\n\telse if(action === Key.UP)\n\t{\n\t\tif(this.pressed)\n\t\t{\n\t\t\tthis.justReleased = true;\n\t\t}\n\t\tthis.pressed = false;\n\t}\n\telse if(action === Key.RESET)\n\t{\n\t\tthis.justReleased = false;\n\t\tthis.justPressed = false;\n\t}\n}\n\n//Set key status\nKey.prototype.set = function(justPressed, pressed, justReleased)\n{\n\tthis.pressed = pressed;\n\tthis.justPressed = justPressed;\n\tthis.justReleased = justReleased;\n}\n\n//Reset key to default values\nKey.prototype.reset = function()\n{\n\tthis.pressed = false;\n\tthis.justPressed = false;\n\tthis.justReleased = false;\n}\n","import {Key} from './Key';\n\n\nexport function Keyboard() {\n\tthis.keys = [];\n\tthis.actions = [];\n\n\t//Initialize Keys\n\tfor(let i = 0; i < 256; i++)\n\t{\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Events\n\tthis.events = [];\n\n\t//Actions pointer\n\tconst actions = this.actions;\n\n\t//Key down\n\tthis.events.push([window, \"keydown\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.DOWN);\n\t}]);\n\n\t//Key up\n\tthis.events.push([window, \"keyup\", function(event)\n\t{\n\t\tactions.push(event.keyCode);\n\t\tactions.push(Key.UP);\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Update key flags syncronously\nKeyboard.prototype.update = function()\n{\n\tlet end = 0;\n\n\twhile(this.actions.length > end)\n\t{\n\t\tlet key = this.actions.shift();\n\t\tlet action = this.actions.shift();\n\n\t\tthis.keys[key].update(action);\n\n\t\tif(this.keys[key].justReleased || this.keys[key].justPressed)\n\t\t{\n\t\t\tthis.actions.push(key);\n\t\t\tthis.actions.push(Key.RESET);\n\t\t\tend += 2;\n\t\t}\n\t}\n}\n\n//Reset keyboard status\nKeyboard.prototype.reset = function()\n{\n\t//Clear actions array\n\tthis.actions = [];\n\n\t//Reset all keys\n\tfor(let i = 0; i < this.keys.length; i++)\n\t{\n\t\tthis.keys[i].reset();\n\t}\n}\n\n//Check if a key is pressed\nKeyboard.prototype.keyPressed = function(key)\n{\n\treturn this.keys[key].pressed;\n}\n\n//Check is a key as just pressed\nKeyboard.prototype.keyJustPressed = function(key)\n{\n\treturn this.keys[key].justPressed;\n}\n\n//Check if a key was just released\nKeyboard.prototype.keyJustReleased = function(key)\n{\n\treturn this.keys[key].justReleased;\n}\n\n//Dispose keyboard events\nKeyboard.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tlet event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n\n//Key codes\nKeyboard.TAB = 9;\nKeyboard.ENTER = 13;\nKeyboard.SHIFT = 16;\nKeyboard.CTRL = 17;\nKeyboard.ALT = 18;\nKeyboard.CAPS_LOCK = 20;\nKeyboard.ESC = 27;\nKeyboard.SPACEBAR = 32;\nKeyboard.PAGE_UP = 33;\nKeyboard.PAGE_DOWN = 34;\nKeyboard.END = 35;\nKeyboard.HOME = 36;\nKeyboard.INSERT = 45;\nKeyboard.DEL = 46;\n\nKeyboard.LEFT = 37;\nKeyboard.RIGHT = 39;\nKeyboard.UP = 38;\nKeyboard.DOWN = 40;\n\nKeyboard.NUM0 = 48;\nKeyboard.NUM1 = 49;\nKeyboard.NUM2 = 50;\nKeyboard.NUM3 = 51;\nKeyboard.NUM4 = 52;\nKeyboard.NUM5 = 53;\nKeyboard.NUM6 = 54;\nKeyboard.NUM7 = 55;\nKeyboard.NUM8 = 56;\nKeyboard.NUM9 = 57;\n\nKeyboard.A = 65;\nKeyboard.B = 66;\nKeyboard.C = 67;\nKeyboard.D = 68;\nKeyboard.E = 69;\nKeyboard.F = 70;\nKeyboard.G = 71;\nKeyboard.H = 72;\nKeyboard.I = 73;\nKeyboard.J = 74;\nKeyboard.K = 75;\nKeyboard.L = 76;\nKeyboard.M = 77;\nKeyboard.N = 78;\nKeyboard.O = 79;\nKeyboard.P = 80;\nKeyboard.Q = 81;\nKeyboard.R = 82;\nKeyboard.S = 83;\nKeyboard.T = 84;\nKeyboard.U = 85;\nKeyboard.V = 86;\nKeyboard.W = 87;\nKeyboard.X = 88;\nKeyboard.Y = 89;\nKeyboard.Z = 90;\n\nKeyboard.F1 = 112;\nKeyboard.F2 = 113;\nKeyboard.F3 = 114;\nKeyboard.F4 = 115;\nKeyboard.F5 = 116;\nKeyboard.F6 = 117;\nKeyboard.F7 = 118;\nKeyboard.F8 = 119;\nKeyboard.F9 = 120;\nKeyboard.F10 = 121;\nKeyboard.F11 = 122;\nKeyboard.F12 = 123;","import {useEffect} from 'react';\nimport { Keyboard } from '../../extern/Keyboard';\n\nexport const withEnterKeyEffect = (onEnter: () => void) => useEffect(() => {\n  const enterKeyHandler = (e: KeyboardEvent) => {\n    if (e.keyCode === Keyboard.ENTER) {\n      onEnter();\n    }\n  }\n\n  document.addEventListener('keypress', enterKeyHandler)\n\n  return function cleanup() {\n    document.removeEventListener('keypress', enterKeyHandler);\n  }\n}, []);\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport StarFieldLogo from '../Backgrounds/NewGame';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { ON_START_GAME } from '../../events';\n\nimport { classNames } from '../Development/Dev';\nimport { Songs, Sfx } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\n\n\nexport function Menu(props: IGameState) {\n  const [ready, setReady] = useState(false);\n\n  function handleStartGame() {\n    setTimeout(() => {\n      props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n\n    setTimeout(() => {\n      props.system.events.emit(ON_START_GAME);\n    }, 2000);\n  }\n\n  useEffect(() => {\n    setTimeout(() => setReady(true), 3000);\n  }, []);\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.MENU);\n\n    return () => {\n      props.system.audio.stopSong(Songs.MENU);\n    }\n  }, []);\n\n  withEnterKeyEffect(once(handleStartGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"menu\"\n      score={0}\n      credits={0}\n      lives={0}\n      background={<StarFieldLogo />}\n      onRestart={handleStartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in', 'neon', 'retro-red')} onMouseUp={handleStartGame}>\n            <span>Press Enter</span>\n          </p>\n        </div>\n      </div>\n      <div className=\"overlay\">AV-1</div>\n    </Gui>\n  )\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\n\nexport function StarField() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n    </div>\n  );\n}\n\nexport default StarField;\n","import * as React from 'react';\n\nexport class Level extends React.PureComponent {\n  render() {\n    return (\n      <div className=\"screen level\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ProjectileModel } from '../../../game/Domain/projectile';\n\ninterface Props {\n  model: ProjectileModel;\n}\n\nexport function Bullet(props: Props) {\n  const styles = getStyles(props);\n  return (\n    <div id=\"bullet\" className=\"sprite\" style={styles} />\n  )\n}\n\nfunction getStyles(props: Props): React.CSSProperties {\n  return {\n    position:     'absolute',\n    outline:      '1px solid white',\n    borderRadius: '25%',\n    height:       '32px',\n    width:        '0px',\n    left:         props.model.position.x + 30,\n    top:          props.model.position.y,\n    display:      cssDisplayValue(props.model),\n  }\n}\n\nfunction cssDisplayValue(model: ProjectileModel) {\n  return (model.offscreen) ? 'none' : ''\n}\n","import * as React from 'react';\nimport { ISystemManager } from '../../engine/types';\nimport { LevelProps, ILoadedEnemy } from '../Levels/types';\nimport { Level } from '../Levels/Base';\nimport { ConnectedPlayer } from '../Containers/Player/Player';\nimport { Bullet } from '../Containers/Weapons/Bullet';\nimport { once, first } from '../../engine/utils';\nimport { ON_ENEMY_DEATH, ON_LEVEL_COMPLETE, ON_ENEMY_FREE, ON_ENEMY_GROUP, ON_LEVEL_BEGIN } from '../../events';\nimport { WithControls } from '../../engine/components/controllable';\nimport { WithRandomWalk } from '../../engine/components/withRandomWalk';\n\nfunction arrayRandom<T>(items: T[]) {\n  return items[Math.floor(Math.random()*items.length)];\n}\n\ninterface WithGameLevelOptions {\n  enemyPositions: number[][];\n  levelId:        string | number;\n  completeEvent?: string;\n}\n\nexport const withGameLevel = (\n  options: WithGameLevelOptions\n): React.ComponentType<LevelProps> => {\n  return class LevelHOC extends React.Component<LevelProps, State> {\n    private interval: any;\n\n    state = {\n      enemyPositions: options.enemyPositions,\n      levelId: options.levelId,\n      \n      enemies: [] as ILoadedEnemy[],\n      enemiesDead: 0,\n      ready: false,\n    }\n  \n    componentDidMount() {\n      const {enemyPositions} = this.state;\n      const {system, loadLevel} = this.props;\n  \n      const enemies = loadLevel(system, enemyPositions);\n  \n      this.setState({ enemies, ready: true })\n  \n      system.events.registerEvent(ON_ENEMY_DEATH, this.countDeath);\n      system.events.registerEvent(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.registerEvent(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.registerEvent(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n    }\n  \n    componentDidUpdate(nextProps: LevelProps, nextState: State) {\n      if (!nextState.ready) {\n        return;\n      }\n  \n      if (nextState.enemiesDead === nextState.enemies.length) {\n        this.onLevelComplete(this.props.system, this.state.levelId);\n      }\n    }\n  \n    componentWillUnmount() {\n      const {system} = this.props;\n\n      clearInterval(this.interval);\n      \n      system.events.unRegisterEvent(ON_ENEMY_DEATH, this.countDeath);\n      system.events.unRegisterEvent(ON_ENEMY_FREE,  this.enemyFree);\n      system.events.unRegisterEvent(ON_ENEMY_GROUP, this.enemyGroup);\n      system.events.unRegisterEvent(ON_LEVEL_BEGIN, this.startFreeEnemyInterval);\n      \n      this.state.enemies.forEach(o =>\n        system.unRegisterEntity(o.entity.id)\n      );\n    }\n  \n    countDeath = () => {\n      this.setState(state => ({\n        enemiesDead: state.enemiesDead + 1,\n      }));\n    }\n  \n    onLevelComplete = once((system: ISystemManager, level: number | string) => {\n      system.events.emit(options.completeEvent || ON_LEVEL_COMPLETE, level);\n      clearInterval(this.interval);\n    })\n  \n    enemyFree = () => {\n      const maybeComponent = arrayRandom(this.state.enemies.map(o => o.entity));\n\n      const controlComponent = this.props.system\n        .getEntityComponent<WithRandomWalk>(maybeComponent, 'controls');\n\n      if (controlComponent) {\n        controlComponent.state.disabled = false;\n      }\n    }\n\n    enemyGroup = () => {}\n   \n    startFreeEnemyInterval = () => {\n      this.interval = setInterval(() => {\n        this.props.system.events.emit(ON_ENEMY_FREE);\n      }, 8000);\n    }\n\n    render() {\n      const {player, bullet1, bullet2, system} = this.props.state;\n      return (\n        <Level>\n    \n          <ConnectedPlayer entity={player} system={system} />\n    \n          <Bullet model={bullet1} />\n          <Bullet model={bullet2} />\n    \n          {this.state.enemies.map((enemy: ILoadedEnemy) => {\n            const ConnectedEnemy = enemy.component;\n            return (\n              <ConnectedEnemy\n                key={enemy.entity.id}\n                entity={enemy.entity}\n                system={system}\n              />\n            )\n          })\n        }\n        </Level>\n      )\n    }\n  }\n}\n\ninterface State {\n  enemies:          ILoadedEnemy[];\n  enemyPositions:   number[][];\n  enemiesDead:      number;\n  levelId:          string | number;\n  ready:            boolean;\n}\n","import { ILevel, ILevels } from \"./types\";\n\nimport { Demo } from \"./Demo/Demo\";\nimport { Level1 } from \"./1/Level.1\";\nimport { Level2 } from \"./2/Level.2\";\nimport { Level3 } from \"./3/Level.3\";\nimport { Level4 } from \"./4/Level.4\";\nimport { End } from \"./End/End\";\n\nexport const Levels = {\n\tdemo: \t\t{\n    level: Demo,\n    next: 'level1',\n  },\n\tlevel1: \t{\n    level: Level1,\n    next: 'level2',\n  },\n\tlevel2: \t{\n    level: Level2,\n    next: 'level3',\n  },\n\tlevel3: \t{\n    level: Level3,\n    next: 'level4',\n  },\n\tlevel4: \t{\n    level: Level4,\n    next: 'end',\n  },\n\tend: \t{\n    level: End,\n    next: 'demo',\n  },\n}\n\nexport const humanizedLevelNames = {\n  demo:   'Demo',\n  level1: '1',\n  level2: '2',\n  level3: '3',\n  level4: '4',\n  end:    'End',\n}\n\nexport function getThisLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].level;\n}\n\nexport function getNextLevel(current: ILevel, directory: ILevels = Levels) {\n  return directory[current].next as ILevel;\n}\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Demo = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],\n    [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0],\n    [0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],\n  ],\n  levelId: 'Demo',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level1 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '1',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level2 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n    [0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0],\n  ],\n  levelId: '2',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\n\nexport const Level3 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 5, 5, 5, 5, 5, 5, 0, 0, 0],\n    [0, 0, 0, 3, 3, 0, 0, 3, 3, 0, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0],\n  ],\n  levelId: '3',\n});\n","import { withGameLevel } from '../../Hoc/withGameLevel';\nimport { ON_GAME_OVER } from '../../../events';\n\nexport const Level4 = withGameLevel({\n  enemyPositions: [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n    [0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0],\n  ],\n  levelId: '4',\n\n  completeEvent: ON_GAME_OVER,\n});\n","import { LevelProps } from '../types';\nimport * as React from 'react';\n\nimport { ConnectedPlayer } from '../../Containers/Player/Player';\n\nimport { Level } from '../Base';\n\n\nexport function End(props: LevelProps) {\n  const {player, system} = props.state;\n  return (\n    <Level>\n      <ConnectedPlayer entity={player} system={system} />\n    </Level>\n  )\n}\n","import * as React from 'react';\nimport { classNames } from '../Development/Dev';\n\ninterface Props {\n  level:    string;\n  onReady:  () => void;\n}\n\nexport function Countdown(props: Props) {\n  const [time, setTime] = React.useState(5);\n  const [ready, setReady] = React.useState(false);\n\n  React.useEffect(() => {\n    let END = 5;\n    \n    setTime(END);\n    setReady(false);\n  \n    for (let i = 0; i <= END; i++) {\n\n      setTimeout(() => setTime(END - i), i * 1000);\n    }\n  \n    setTimeout(() => {\n      setReady(true);\n      props.onReady();\n    }, END * 1000);\n  }, [props.level])\n\n  return (\n    <div className={classNames(\"center-content\", \"absolute-fit\", ready ? 'fadeout' : 'fadeout-visible')}>\n      <p className=\"neon green\">\n        <span>{time}</span>\n      </p>\n    </div>\n  );\n}\n","import { ISystemManager } from '../../engine/types';\nimport { IGameState } from '../../game/types';\nimport { ILevels, ILevel } from './types';\nimport * as React from 'react';\n\nimport { Countdown } from '../Components/Countdown'\nimport { Levels, getThisLevel } from './Directory';\nimport { loadLevel } from '../utils';\nimport { ON_LEVEL_BEGIN, ON_LEVEL_LOAD } from '../../events';\n\ninterface Props {\n\tlevels?:  \t\tILevels;\n\tcurrentLevel: ILevel;\n\tstate:    \t\tIGameState;\n\tsystem:   \t\tISystemManager;\n}\n\nexport function Loader({\n\tlevels = Levels,\n\t...rest\n}: Props) {\n\tconst [ready, setReady] = React.useState(false);\n\tconst [level, setLevel] = React.useState(rest.currentLevel);\n\n  const GameLevel = getThisLevel(rest.currentLevel);\n\t\n\tReact.useEffect(() => {\n\t\trest.system.events.emit(ON_LEVEL_LOAD)\n\t\tsetLevel(rest.currentLevel);\n\t\tsetReady(false);\n\t}, [rest.currentLevel])\n\n\tconst onCountdownFinished = () => {\n\t\trest.system.events.emit(ON_LEVEL_BEGIN, level)\n\t\tsetReady(true);\n\t}\n\n  return (\n\t\t<>\n\t\t\t<GameLevel\n\t\t\t\tloadLevel={loadLevel}\n\t\t\t\t{...rest}\n\t\t\t/>\n\n\t\t\t<Countdown\n\t\t\t\tlevel={level}\n\t\t\t\tonReady={onCountdownFinished}\n\t\t\t/>\n\t\t</>\n  );\n}\n","import { ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\n\nimport { humanizedLevelNames } from '../Levels';\nimport { once } from '../../engine/utils';\n\ninterface Props {\n  currentLevel: ILevel;\n  state:        ICurrentGameState;\n  onNextLevel:  () => void;\n}\n\nexport function LevelSummary(props: Props) {\n  withEnterKeyEffect(once(props.onNextLevel));\n  return (\n    <div className=\"complete container with-title is-center is-dark fade-in\">\n      <label className=\"title\">{`Level ${humanizedLevelNames[props.currentLevel]} Complete`}</label>\n\n      <p>{`Score:  ${props.state.score}`}</p>\n      <p>{`Shots:  ${props.state.shots}`}</p>\n      <p>{`Hits:   ${props.state.hits}`}</p>\n      <p>{`Ratio:  ${Math.round(props.state.hits / props.state.shots * 100)}%`}</p>\n\n      <button className=\"btn is-primary\" onClick={props.onNextLevel}>Press Enter</button>\n    </div>\n  )\n}\n","import { IVector, IEntity, IComponent } from '../../engine/types';\nimport { IGameState, IPointsLoot, ICurrentGameState } from '../../game/types';\nimport { ILevel } from '../Levels/types';\nimport * as React from 'react';\n\nimport StarField from '../Backgrounds/StarField';\nimport { Gui } from '../Layouts/Gui';\n\nimport { ProjectileModel } from '../../game/Domain/projectile';\nimport { WithHealthState } from '../../engine/components/killable';\nimport { IsLootable } from '../../engine/components/lootable';\n\nimport { Loader, humanizedLevelNames } from '../Levels';\nimport { LevelSummary } from '../Components/LevelSummary';\n\nimport { first, mkEntity } from '../../engine/utils';\n\nimport { ON_LEVEL_COMPLETE, ON_ENEMY_DEATH, ON_COLLISION, ON_GAME_OVER, ON_PLAYER_ATTACK, ON_LEVEL_LOAD, ON_LEVEL_BEGIN, ON_START_ENGINE, ON_STOP_ENGINE } from '../../events';\nimport { getNextLevel } from '../Levels/Directory';\nimport { Sfx, Songs } from '../../game/catalogue';\nimport { Screens } from '../Screens';\n\n\ninterface Props extends IGameState {\n  onRestart:    () => void;\n  onFinalScore: (stats: ICurrentGameState) => void;\n  nav:          (screen: Screens) => void;\n}\n\nexport class Game extends React.PureComponent<Props, ICurrentGameState> {\n  constructor(props: Props) {\n    super(props);\n\n    this.registerEvents();\n  }\n\n  state = {\n    score:              0,\n    credits:            1,\n    lives:              3,\n    shots:              0,\n    hits:               0,\n    complete:           false,\n    completed:          [],\n    currentLevel:       'level1' as ILevel,\n  }\n\n  componentDidMount() {\n    this.props.system.audio.playSong(Songs.GAME);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (!this.props.player.attacking && nextProps.player.attacking) {\n      this.fireBullet(this.props.player.center);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.system.audio.stopSong(Songs.GAME);\n    this.unRegisterEvents();\n  }\n\n  registerEvents = () => {\n    this.props.system.events.registerEvent(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.registerEvent(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.registerEvent(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.registerEvent(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.registerEvent(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.registerEvent(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  unRegisterEvents = () => {\n    this.props.system.events.unRegisterEvent(ON_LEVEL_LOAD,     this.handleLevelLoading);\n    this.props.system.events.unRegisterEvent(ON_LEVEL_BEGIN,    this.handleLevelBegin);\n    this.props.system.events.unRegisterEvent(ON_LEVEL_COMPLETE, this.handleLevelComplete);\n    this.props.system.events.unRegisterEvent(ON_ENEMY_DEATH,    this.handleEnemyDeath);\n    this.props.system.events.unRegisterEvent(ON_COLLISION,      this.handleBulletCollisions);\n    this.props.system.events.unRegisterEvent(ON_GAME_OVER,      this.handleGameOver);\n  }\n\n  handleBulletCollisions = (): void => { // !!! Move to system component\n    const { bullet1, bullet2 } = this.props;\n    if (bullet1.collisions.length || bullet2.collisions.length) {\n\n      const collisions = [ \n        ...bullet1.collisions, \n        ...bullet2.collisions,\n      ];\n\n      const deadpool = [...new Set(collisions)].map(mkEntity);\n\n      deadpool.forEach(this.killEntity);\n    }\n  }\n\n  getBullet = (): ProjectileModel => {\n    return first([\n      this.props.bullet1,\n      this.props.bullet2,\n    ].filter(model => !!model.offscreen ))\n  }\n\n  fireBullet = (pos: IVector): void => {\n    const bullet = this.getBullet();\n\n    if (!bullet) {\n      return;\n    }\n\n    bullet.position.x = pos.x;\n    bullet.position.y = pos.y;\n\n    this.reviveEntity(bullet, 1);\n\n    this.setState(state => ({\n      ...state,\n      shots: state.shots + 1,\n    }));\n\n    this.props.system.events.emit(ON_PLAYER_ATTACK, this.props.player)\n  }\n\n  killEntity = (entity: IEntity) => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n\n    component.state.health.value = 0;\n  }\n\n  reviveEntity = (entity: IEntity, health: number): void => {\n    const component = this.props.system\n      .getEntityComponent<WithHealthState>(entity, 'health');\n\n    if (component === undefined) {\n      return;\n    }\n  \n    component.state.health.value = health;\n  }\n\n  handleEnemyDeath = (source: IComponent): void => {\n    const component = this.props.system\n      .getEntityComponent<IsLootable<IPointsLoot>>({ id: source.entityId }, 'loot');\n\n    if (component === undefined) {\n      return;\n    }\n  \n    const points = component.state.loot!.points;\n\n    this.setState(state => ({\n      score: state.score + points,\n      hits: state.hits + 1,\n    }));\n  }\n\n  handleLevelLoading = (): void => {\n    this.props.system.events.emit(ON_STOP_ENGINE)\n  }\n  \n  handleLevelBegin = (): void => {\n    this.props.system.events.emit(ON_START_ENGINE)\n  }\n\n  handleLevelComplete = (level: string | number): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 750);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.SUMMARY);\n\n      this.setState(state => ({\n        complete: true,\n        completed: state.completed.concat(level),\n      }));\n    }, 1500);\n  }\n\n  handleGameOver = (): void => {\n    this.props.system.audio.stopSong(Songs.GAME);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.LEVEL_WIN);\n    }, 1500);\n\n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.GAMEOVER);\n    }, 2250);\n\n    setTimeout(() => {\n      this.props.onFinalScore(this.state);\n    }, 3000);\n  }\n\n  startNewGame = (): void => {\n    this.props.system.audio.playSound(Sfx.NEW_GAME);\n\n    setTimeout(() => this.setState({ currentLevel: 'level1' }), 5);\n  }\n\n  onNextLevel = (): void => {\n    this.props.system.audio.stopSong(Songs.SUMMARY);\n    \n    setTimeout(() => {\n      this.props.system.audio.playSound(Sfx.NEXT_LEVEL);\n    }, 350);\n\n    setTimeout(() => {\n      const currentLevel = this.state.currentLevel;\n      const nextLevel = getNextLevel(currentLevel);\n\n      this.setState({ currentLevel: nextLevel as ILevel, complete: false })\n    }, 1200);\n\n    setTimeout(() => {\n      this.props.system.audio.playSong(Songs.GAME);\n    }, 3000);\n  }\n\n  render() {\n    const {currentLevel, score, credits, lives} = this.state;\n    return (\n      <Gui\n        id=\"gui\"\n        className=\"game\"\n        level={humanizedLevelNames[currentLevel]}\n        score={score}\n        credits={credits}\n        lives={lives}\n        onRestart={this.props.onRestart}\n        background={<StarField />}\n      >\n        <Loader\n          currentLevel={currentLevel}\n          state={this.props}\n          system={this.props.system}\n        />\n\n        {this.state.complete ? (\n          <div className=\"center-content absolute-fit\">\n            <LevelSummary\n              currentLevel={currentLevel}\n              state={this.state}\n              onNextLevel={this.onNextLevel}\n            />\n          </div>\n        ) : null}\n      </Gui>\n    )\n  }\n}\n","import * as React from 'react';\nimport './styles/StarField.style.css';\nimport './styles/GameOver.style.css';\n\nexport function GameOver() {\n  return (\n    <div id=\"starfield\" className=\"background\">\n      <div id=\"stars\"></div>\n      <div id=\"stars2\"></div>\n      <div id=\"stars3\"></div>\n      <div id=\"gameover-container\" className=\"slide-up\">\n        <div id=\"gameover\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default GameOver;\n","import { IGameState } from '../../game/types';\nimport * as React from 'react';\nimport {useEffect, useState} from 'react';\n\nimport { Gui } from '../Layouts/Gui';\nimport GameOver from '../Backgrounds/GameOver';\n\nimport { classNames } from '../Development/Dev';\nimport { withEnterKeyEffect } from '../hooks/withEnterKeyEffect';\nimport { Songs } from '../../game/catalogue';\nimport { once } from '../../engine/utils';\nimport { Screens } from '../Screens';\n\ninterface FinalScore {\n  score:    number;\n  hits:     number;\n  shots:    number;\n  lives:    number;\n  credits:  number;\n}\n\ntype Props = {\n  nav:    (screen: Screens) => void;\n  final?: FinalScore\n}\nexport function Outro(props: Props & IGameState) {\n  const [ready, setReady] = useState(false);\n  const [final, setFinalScore] = useState<FinalScore>({} as FinalScore);\n\n  function handleStartNewGame() {\n    props.nav('game');\n  }\n  \n  function handleRestartGame() {\n    props.nav('menu');\n  }\n\n  useEffect(() => {\n    props.system.audio.playSong(Songs.END);\n    return () => {\n      props.system.audio.stopSong(Songs.END);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (props.final) {\n      try {\n        setFinalScore(props.final);\n      } catch (e) {\n        // meh\n      }\n    }\n\n    const timer = setTimeout(() => setReady(true), 3000);\n\n    return () => {\n      clearTimeout(timer)\n    }\n  }, []);\n\n  withEnterKeyEffect(once(handleStartNewGame));\n\n  return (\n    <Gui\n      id=\"gui\"\n      className=\"gameover\"\n      score={final.score}\n      credits={final.credits}\n      lives={final.lives}\n      background={<GameOver />}\n      onRestart={handleRestartGame}\n    >\n      <div className=\"screen menu\">\n        <div id=\"press-enter\" className=\"center-content\">\n          <p className={classNames(!ready && 'hidden', 'fade-in')}>\n            Press Enter to Play Again\n          </p>\n        </div>\n      </div>\n    </Gui>\n  )\n}\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter, clamp, ifStateProp } from \"../utils\";\nimport { WithControls } from \"./controllable\";\nimport { WithBoundary } from \"./withBoundary\";\nimport { WithGeometry } from \"./withGeometry\";\n\nconst COMPONENT_NAMESPACE = 'position';\n\nexport type WithPosition = { position: IVector; }\nexport type WithCenter = { center: IVector; }\nexport type WithPositionState = WithPosition & WithCenter;\n\nexport function withPositionFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPosition, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPositionState>>({\n        id,\n        name: COMPONENT_NAMESPACE,\n        entityId: entity.id,\n        state: { position: { ...state.position }, center: { ...state.position } },\n        update: (system: ISystemManager, component: IComponent<WithPositionState>) => {\n          handleMovementState(entity, system, component, events);\n        },\n      }))\n    }\n  }\n  \nfunction handleMovementState(entity: IEntity, system: ISystemManager, component: IComponent<WithPositionState>, events: IComponentEvents) {\n\n  const controls = system.getEntityComponent<WithControls>(entity, 'controls');\n\n  if (!controls || !controls.state.moving) {\n    return;\n  }\n\n  // ai yai yai, wtf is this doing here\n  const {direction, speed} = controls.state;\n\n  component.state.position.x += direction.x * speed.x;\n  component.state.position.y += direction.y * speed.y;\n  // !! ??? ^^^^^^^^\n\n  const boundaryComponent = system.getEntityComponent<WithBoundary>(entity, 'boundary');\n  const geometryComponent = system.getEntityComponent<WithGeometry>(entity, 'geometry');\n  \n  if (ifStateProp(boundaryComponent) && ifStateProp(boundaryComponent)) {\n\n    const {width, height} = geometryComponent.state.geometry;\n    const {boundary}      = boundaryComponent.state;\n    \n    const clampedX = clamp(boundary.left, boundary.right - width,   component.state.position.x)\n    const clampedY = clamp(boundary.top,  boundary.bottom - height, component.state.position.y)\n\n    component.state.position.x = clampedX;\n    component.state.position.y = clampedY;\n\n    component.state.center.x = component.state.position.x - width / 2;\n    component.state.center.y = component.state.position.y - height / 2;\n\n  }\n};\n\nexport const selectPositionState = createSelector<WithPosition>(COMPONENT_NAMESPACE);\nexport const setPositionState    = createSetter<WithPosition>(selectPositionState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\n\nconst COMPONENT_NAMESPACE = 'attack';\n\nexport type WithAttack = { attacking: boolean; attackPower: number; };\n\nexport function combatableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithAttack, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAttack>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { attacking: state.attacking, attackPower: state.attackPower },\n        update: (system: ISystemManager, component: IAttackableEntity) => {\n            handleAttack(component, system);\n        },\n      }))\n  }\n}\n\ntype IAttackableEntity = IComponent<WithAttack>\n\nfunction handleAttack(component: IAttackableEntity, system: ISystemManager) {\n  if (system.input.keyPressed(system.input.KeyCodes.SPACEBAR)) {\n    component.state.attacking = true;\n  } else {\n    component.state.attacking = false;\n  }\n}\n\nexport const selectCombatableState = createSelector<IAttackableEntity>(COMPONENT_NAMESPACE);\nexport const setCombatableState    = createSetter<IAttackableEntity>(selectCombatableState);\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithPlayerControls = { direction: IVector; moving: boolean; speed: IVector; };\n\nexport function withPlayerControlsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithPlayerControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithPlayerControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n        },\n        update: (system: ISystemManager, component: IPlayerControllableEntity) => {\n          handleVerticalMovement(entity, component, system);\n          handleHorizontalMovement(entity, component, system);\n          \n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\nexport type IPlayerControllableEntity = IComponent<WithPlayerControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleVerticalMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system, 'vertical');\n}\n\nfunction handleHorizontalMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system);\n}\n\nfunction handleMovement(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IPlayerControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { createCharacter } from \"../Domain/character\";\nimport { ISystemManager } from \"../../engine/types\";\nimport { defaultBoundary } from \"../../engine/utils\";\nimport { SpriteTextureIds } from \"../catalogue\";\n\nexport function createPlayer(\n  system:           ISystemManager,\n  name:             string = 'player 1',\n) {\n\n  const playerEntity = createCharacter(system, {\n    name,\n\n    texture: SpriteTextureIds.Player,\n\n    health: {\n      value: 100,\n      immortal: true,\n    },\n\n    attackPower: 10,\n\n    speed: {\n      y: 0,\n      x: 6,\n    },\n  \n    position: {\n      x: 400,\n      y: 475,\n    },\n  \n    direction: {\n      x: 0,\n      y: 0,\n    },\n  \n    geometry: {\n      width:  64,\n      height: 64,\n    },\n  \n    moving: false,\n  \n    attacking: false,\n\n    boundary: defaultBoundary\n  });\n\n  return playerEntity;\n}\n","import { IEntity, ISystemManager } from \"../../engine/types\";\nimport { nameableFactory,           WithName } from \"../../engine/components/nameable\";\nimport { killableFactory,           WithHealth, WithHealthState } from \"../../engine/components/killable\";\nimport { withPositionFactory,       WithPosition, WithPositionState } from \"../../engine/components/withPosition\";\nimport { combatableFactory,         WithAttack } from \"../../engine/components/combatable\";\nimport { withGeometryFactory,       WithGeometry } from \"../../engine/components/withGeometry\";\nimport { isCollidableFactory,       IsCollidable } from \"../../engine/components/isCollidable\";\nimport { withBoundaryFactory,       WithBoundary } from \"../../engine/components/withBoundary\";\nimport { withPlayerControlsFactory, WithPlayerControls } from \"../../engine/components/withPlayerControls\";\nimport { withTextureFactory, WithTexture } from \"../../engine/components/withTexture\";\n\nexport function createCharacter(\n  system:   ISystemManager,\n  options:  CharacterModelArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withHealth      = killableFactory(system);\n  const withPosition    = withPositionFactory(system);\n  const withControls    = withPlayerControlsFactory(system);\n  const withAttack      = combatableFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withTexture     = withTextureFactory(system);\n  const isCollidable    = isCollidableFactory(system);\n  const withBoundary    = withBoundaryFactory(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withHealth(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withTexture(entity, options, system.events)\n  );\n  system.registerComponent(\n    withAttack(entity, options, system.events)\n  );\n  system.registerComponent(\n    isCollidable(entity, options, system.events)\n  );\n  system.registerComponent(\n    withBoundary(entity, options, system.events)\n  );\n  system.registerComponent(\n    withControls(entity, {\n      direction: options.direction,\n      moving: options.moving,\n      speed: options.speed,\n    }, system.events)\n  );\n  return entity;\n}\n\nexport type CharacterModelArgs =\n  WithName          &\n  WithHealth        &\n  WithPosition      &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithPlayerControls;\n\nexport type CharacterModel =\n  WithName          &\n  WithHealthState   &\n  WithPositionState &\n  WithGeometry      &\n  WithTexture       &\n  WithAttack        &\n  WithBoundary      &\n  IsCollidable      &\n  WithPlayerControls;\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithOffscreen } from \"./withOffscreen\";\n\nconst COMPONENT_NAMESPACE = 'momentum';\n\nexport type WithMomentum = { momentum: { direction: IVector; speed: number; vertical?: boolean; horizontal?: boolean; } };\n\nexport function withMomentumFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithMomentum, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithMomentum>>({\n        id,\n        entityId: entity.id,\n        name:     COMPONENT_NAMESPACE,\n        state: { momentum: {\n          direction:    state.momentum.direction,\n          speed:        state.momentum.speed,\n        } },\n        update: (system: ISystemManager, component: IWithMomentumEntity) => {\n          handleMovement(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithMomentumEntity = IComponent<WithMomentum & Partial<WithPosition>>\n\nfunction handleMovement(entity: IEntity, component: IWithMomentumEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {state: { offscreen }} = system.getEntityComponent<WithOffscreen>(entity, 'offscreen');\n\n  if (offscreen) {\n    return;\n  }\n\n  const { momentum: { direction, speed } } = component.state;\n\n  position.y += direction.y * speed;\n  position.x += direction.x * speed;\n}\n\nexport const selectMomentumState = createSelector<WithMomentum>(COMPONENT_NAMESPACE);\nexport const setMomentumState    = createSetter<WithMomentum>(selectMomentumState);\n","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\n\nexport type WithOffscreen = { offscreen?: boolean; };\n\nexport function withOffscreenFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithOffscreen & Partial<WithPosition>, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithOffscreen>>({\n        id,\n        entityId: entity.id,\n        name: 'offscreen',\n        state: { offscreen: state.offscreen || false },\n        update: (system: ISystemManager, component: IWithOffscreenEntity) => {\n          handleOffscreenFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IWithOffscreenEntity = IComponent<WithOffscreen & WithPosition>\n\nfunction handleOffscreenFlag(entity: IEntity, component: IWithOffscreenEntity, system: ISystemManager) {\n  const {state: { position }} = system.getEntityComponent<WithPosition>(entity, 'position');\n  const {screenSize} = system.config;\n\n  if (position.x < 0 || position.y < 0) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  if (position.x > screenSize!.x || position.y > screenSize!.y) {\n    component.state.offscreen = true;\n    return;\n  } \n  \n  if (position.x > window.innerWidth || position.y > window.innerHeight) {\n    component.state.offscreen = true;\n    return;\n  }\n\n  component.state.offscreen = false;\n};\n","import { IComponent, ISystemManager, IEntity, EntityIdType, Bounds, IVector, IDimensions, IComponentEvents } from \"../types\";\nimport { factory, createSelector, createSetter } from \"../utils\";\nimport { WithGeometry } from \"./withGeometry\";\nimport { WithPosition } from \"./withPosition\";\nimport { ON_COLLISION } from \"../../events\";\n\nconst COMPONENT_NAMESPACE = 'collisions';\n\nexport type WithCollisionArgs = Partial<WithCollisions>;\nexport type WithCollisions = { collisions: EntityIdType[]; };\n\nexport function withCollisionsFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithCollisionArgs, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithCollisionArgs>>({\n        id,\n        entityId: entity.id,\n        name: COMPONENT_NAMESPACE,\n        state: { collisions: state.collisions || [] },\n        update: (system: ISystemManager, component: ICollidableEntity) => {\n          handleCollisions(entity, component, system, events);\n        },\n      }))\n  }\n}\n\ntype ICollidableEntity = IComponent<WithCollisions & WithGeometry & WithPosition>\n\nfunction handleCollisions(entity: IEntity, component: ICollidableEntity, system: ISystemManager, events: IComponentEvents) {\n  const position = system.getEntityModel<WithGeometry & WithPosition>({ id: component.entityId });\n\n  const collidableEntities = system\n    .getEntitiesByComponentTypes(['geometry', 'position', 'collidable'])\n    .filter(id => id !== component.entityId)\n    .map(id => system.getEntityModel<WithGeometry & WithPosition>({ id }));\n\n  const ownBounds = getBounds(position.position, position.geometry);\n\n  const collisions: EntityIdType[] = [];\n\n  collidableEntities.forEach(o => {\n    const otherBounds = getBounds(o.position, o.geometry);\n    if (overlap(ownBounds, otherBounds) && otherBounds !== undefined) {\n      collisions.push(o.id);\n    }\n  });\n\n  const lastCollisions = component.state.collisions\n    ? component.state.collisions.map(o => o)\n    : [];\n\n  component.state.collisions = collisions;\n\n  if (new Set(lastCollisions) !== new Set(collisions) && collisions.length > 0) {\n    events.onChange(ON_COLLISION, component, entity);\n  }\n}\n\nexport const selectCollidableState = createSelector<ICollidableEntity>(COMPONENT_NAMESPACE);\nexport const setCollidableState    = createSetter<ICollidableEntity>(selectCollidableState);\n\nfunction getBounds(pos: IVector, dimensions: IDimensions) {\n  return {\n    left: pos.x - (dimensions.width / 2),\n    right: pos.x + (dimensions.width / 2),\n    top: pos.y,\n    bottom: pos.y + dimensions.height,\n  }\n}\n\nfunction overlap(a: Bounds, b: Bounds) {\n  // If one rectangle is on left side of other\n  if (a.left > b.right || b.left > a.right)\n    return false;\n\n  // If one rectangle is above other\n  if (a.bottom < b.top || b.bottom < a.top)\n    return false;\n\n  return true;\n}\n","import { ISystemManager } from \"../../engine/types\";\nimport { createProjectile } from \"../Domain/projectile\";\n\nexport function createBullet(\n  system: ISystemManager,\n  name: string,\n  x: number = -100,\n  speed: number = 8,\n) {\n\n  const entity = createProjectile(system, {\n    name,\n\n    momentum: {\n      direction: {\n        x: 0,\n        y: -1,\n      },\n      speed,\n    },\n\n    position: {\n      x: x,\n      y: 440,\n    },\n\n    geometry: {\n      width:  2,\n      height: 32,\n    },\n  });\n\n  return entity;\n}\n","import { IEntity, ISystemManager, IComponent } from \"../../engine/types\";\nimport { withPositionFactory,     WithPosition, WithPositionState } from \"../../engine/components/withPosition\";\nimport { withMomentumFactory,     WithMomentum } from \"../../engine/components/withMomentum\";\nimport { withOffscreenFactory,    WithOffscreen } from \"../../engine/components/withOffscreen\";\nimport { withGeometryFactory,     WithGeometry } from \"../../engine/components/withGeometry\";\nimport { withCollisionsFactory,   WithCollisionArgs, WithCollisions } from \"../../engine/components/withCollisions\";\nimport { nameableFactory,         WithName } from \"../../engine/components/nameable\";\n\n\nexport function createProjectile(\n  system:   ISystemManager,\n  options:  ProjectileBaseArgs,\n): IEntity {\n  const withName        = nameableFactory(system);\n  const withPosition    = withPositionFactory(system);\n  const withMomentum    = withMomentumFactory(system);\n  const withOffscreen   = withOffscreenFactory(system);\n  const withGeometry    = withGeometryFactory(system);\n  const withCollisions  = withCollisionsFactory(system);\n\n  const entity = system.registerEntity();\n\n  system.registerComponent(\n    withName(entity, options, system.events)\n  );\n  system.registerComponent(\n    withPosition(entity, options, system.events)\n  );\n  system.registerComponent(\n    withGeometry(entity, options, system.events)\n  );\n  system.registerComponent(\n    withMomentum(entity, options, system.events)\n  );\n  system.registerComponent(\n    withCollisions(entity, options, system.events)\n  );\n  system.registerComponent(\n    withOffscreen(entity, options, system.events)\n  );\n  return entity;\n}\n\nexport type ProjectileBaseArgs =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisionArgs   &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileBase =\n  WithPosition        &\n  WithMomentum        &\n  WithGeometry        &\n  WithCollisions      &\n  WithName            &\n  WithOffscreen;\n\nexport type ProjectileModel = \n  IComponent &\n  ProjectileBase;\n","import {Howl, Howler} from 'howler';\nimport { IBasicConfig, IAudioManager, IAudioCollection } from \"../types\";\n\nconst configDefaults = {\n  name: 'AudioManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass AudioManager implements IAudioManager {\n  public config:            IBasicConfig;\n  public sounds:            IAudioCollection;\n  public songs:             IAudioCollection;\n\n  private soundFactory:     HowlStatic;\n  private audioEngine:      HowlerGlobal;\n\n  constructor(config: IBasicConfig) {\n    this.config       = { ...configDefaults, ...config };\n    this.sounds       = {};\n    this.songs        = {};\n\n    this.soundFactory = Howl;\n    this.audioEngine  = Howler;\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerSound(name: string, options: IHowlProperties) {\n    this.sounds[name] = new this.soundFactory(options);\n  }\n\n  public unRegisterSound(name: string) {\n    this.sounds[name].stop();\n    this.sounds[name].unload();\n    delete this.sounds[name];\n  }\n\n  public registerSong(name: string, options: IHowlProperties) {\n    this.songs[name] = new this.soundFactory({\n      loop: true,\n      ...options\n    });\n  }\n\n  public unRegisterSong(name: string) {\n    this.songs[name].stop();\n    this.songs[name].unload();\n    delete this.songs[name];\n  }\n\n  public playSound(name: string, sprite?: string | number) {\n    try {\n      this.sounds[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSound(name: string, id?: number) {\n    try {\n      this.sounds[name].stop(id)\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Sound: \"${name}\" not found..`)\n    }\n  }\n\n  public playSong(name: string, sprite?: string | number) {\n    try {\n      this.songs[name].play(sprite);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public stopSong(name: string, id?: number) {\n    try {\n      this.songs[name].stop(id);\n    } catch (e) {\n      throw new Error(`[AudioManager:ERROR]: Song: \"${name}\" not found..`)\n    }\n  }\n\n  public registerListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].on(event, callback);\n  }\n\n  public registerOnceListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].once(event, callback);\n  }\n\n  public unRegisterListener(name: string, event: string, callback: (soundId: number) => void) {\n    this.sounds[name].off(event, callback);\n  }\n\n  public changeVolume(volume: number): void {\n    this.audioEngine.volume(volume);\n  }\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n    }, null, '  ')\n  };\n}\n\nexport default AudioManager;\n","import { IComponent, IdGeneratorFunc, EntityIdType, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\nconst configDefaults = {\n  name: 'componentManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass ComponentManager {\n  public config:             IBasicConfig;\n\n  public components:         IComponent[];\n  private idGenerator:       IdGeneratorFunc;\n\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.components  = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerComponent = <T>(component: IComponent<T>) => {\n    component.id = (component.id === -1)\n      ? this.idGenerator().next()\n      : component.id;\n\n    const model = factory<IComponent>(component);\n    this.components[component.id] = model;\n    return model;\n  };\n\n  public unRegisterComponent = (componentId: EntityIdType) => {\n    delete this.components[componentId];\n  };\n\n  public get = <T>(component: IComponent<T> | number) => {\n    const path = typeof component === 'number' ? component : component && component.id;\n    return this.components[path];\n  };\n\n  public get getState(): IComponent[] {\n    return this.components;\n  };\n\n  public getSerializableState = () => {\n    const { config, components } = this;\n    return {\n      config,\n      components,\n    };\n  };\n\n  public loadHydratedState = (state: any) => {\n    this.config     = state.config;\n    this.components = state.components;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      config:     this.config,\n      components: this.components,\n    }, null, '  ')\n  };\n\n  static isSameComponent(a: IComponent, b: IComponent) {\n    return a.id === b.id;\n  }\n}\n\nexport default ComponentManager;\n\n// const manager = new ComponentManager(system.system, configDefaults, [], defaultIdGenerator());\n","import { EntityIdType, IEntity, IdGeneratorFunc, IBasicConfig } from \"../types\";\nimport { defaultIdGenerator, factory } from \"../utils\";\n\ninterface IEntityManagerSerializableState {\n  config:   IBasicConfig,\n  entities: IEntity[],\n}\n\nconst configDefaults = {\n  name: 'EntityManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EntityManager {\n  public config:              IBasicConfig;\n  public entities:           IEntity[];\n  private idGenerator:        IdGeneratorFunc;\n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.entities    = [];\n    this.idGenerator = defaultIdGenerator();\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerEntity = (): IEntity => {\n    const entityId = this.idGenerator().next()\n    const model    = factory<IEntity>({ id: entityId });\n    this.entities[entityId] = model;\n    return model;\n  };\n\n  public unRegisterEntity = (entityId: EntityIdType): void => {\n    delete this.entities[entityId];\n  };\n\n  public get = (entity: IEntity | number) => {\n    const path = typeof entity === 'number' ? entity : entity.id;\n    return this.entities[path];\n  };\n\n  public get getState(): IEntity[] {\n    return this.entities;\n  };\n\n  public getSerializableState = (): IEntityManagerSerializableState => {\n    const { config, entities } = this;\n    return {\n      config,\n      entities,\n    };\n  };\n\n  public loadHydratedState = (state: IEntityManagerSerializableState): void => {\n    this.config  = state.config;\n    this.entities = state.entities;\n  };\n\n  public toString = (): string => {\n    return JSON.stringify({\n      config:   this.config,\n      entities: this.entities,\n    }, null, '  ')\n  };\n\n  static isSameEntity(a: IEntity, b: IEntity): boolean {\n    return a.id === b.id;\n  }\n}\n\nexport default EntityManager;\n","import { IBasicConfig, IComponentEvents, IOnUpdateHandler, IOnChangeHandler, IComponent, IEventManager, AnonymousCB, IEntity } from \"../types\";\nimport {EventEmitter2} from 'eventemitter2';\n\nconst configDefaults = {\n  name: 'EventManager',\n  debug: true,\n  logging: true,\n  version: '1',\n}\n\nclass EventManager implements IEventManager {\n  public config:        IBasicConfig;\n  public emitter:       EventEmitter2;\n \n  constructor(config: IBasicConfig) {\n    this.config      = { ...configDefaults, ...config };\n    this.emitter     = new EventEmitter2({\n      delimiter:  ':',\n      wildcard:   true,\n      maxListeners: 20,\n    });\n  }\n\n  public init = (config?: IBasicConfig) => null;\n\n  public registerEvent = (name: string, callback: AnonymousCB) => {\n    this.emitter.addListener(name, callback)\n  };\n\n  public unRegisterEvent = (name: string, callback: AnonymousCB): void => {\n    this.emitter.removeListener(name, callback);\n  };\n\n  public emit = <T>(eventName: string, data?: T) => {\n    this.emitter.emit(eventName, data);\n  };\n\n  public onUpdate = (component: IComponent, entity: IEntity) => {\n    this.emitter.emit('updateComponent', component, entity);\n  };\n\n  public onChange = (eventName: string, component: IComponent, entity: IEntity): void => {\n    this.emitter.emit(eventName, component, entity);\n  };\n}\n\nexport default EventManager;\n","\nexport function Vector2(x, y)\n{\n\tthis.x = (x !== undefined) ? x : 0;\n\tthis.y = (y !== undefined) ? y : 0;\n}\n\nVector2.prototype.set = function(x, y)\n{\n\tthis.x = x;\n\tthis.y = y;\n}\n","import {Vector2} from './Vector2';\nimport {Key} from './Key';\n\nexport function Mouse()\n{\n\t//Raw data\n\tthis._keys = [];\n\tthis._position = new Vector2(0, 0);\n\tthis._positionUpdated = false;\n\tthis._delta = new Vector2(0, 0);\n\tthis._wheel = 0;\n\tthis._wheelUpdated = false;\n\tthis._doubleClicked = false;\n\n\t//Position, delta, and scroll speed\n\tthis.keys = [];\n\tthis.position = new Vector2(0,0);\n\tthis.delta = new Vector2(0,0);\n\tthis.wheel = 0;\n\tthis.doubleClicked = false;\n\n\t//Canvas (use to calculate coordinates relative to it)\n\tthis.canvas = null;\n\t\n\t//Events\n\tthis.events = [];\n\n\t//Initialize key instances\n\tfor(let i = 0; i < 3; i++)\n\t{\n\t\tthis._keys.push(new Key());\n\t\tthis.keys.push(new Key());\n\t}\n\n\t//Self pointer\n\tlet self = this;\n\n\t//Scroll wheel\n\tif(window.onmousewheel !== undefined)\n\t{\n\t\t//Chrome, edge\n\t\tthis.events.push([window, \"mousewheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse if(window.addEventListener !== undefined)\n\t{\n\t\t//Firefox\n\t\tthis.events.push([window, \"DOMMouseScroll\", function(event)\n\t\t{\n\t\t\tself._wheel = event.detail * 30;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\telse\n\t{\n\t\tthis.events.push([window, \"wheel\", function(event)\n\t\t{\n\t\t\tself._wheel = event.deltaY;\n\t\t\tself._wheelUpdated = true;\n\t\t}]);\n\t}\n\n\t//Touchscreen input\n\tif(\"ontouchstart\" in window || navigator.msMaxTouchPoints > 0)\n\t{\n\t\t//Auxiliar variables to calculate touch delta\n\t\tvar lastTouch = new Vector2(0, 0);\n\n\t\t//Touch screen pressed event\n\t\tthis.events.push([window, \"touchstart\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t\tself.updateKey(Mouse.LEFT, Key.DOWN);\n\t\t}]);\n\n\t\t//Touch screen released event\n\t\tthis.events.push([window, \"touchend\", function(event)\n\t\t{\n\t\t\tself.updateKey(Mouse.LEFT, Key.UP);\n\t\t}]);\n\n\t\t//Touch screen move event\n\t\tthis.events.push([window, \"touchmove\", function(event)\n\t\t{\n\t\t\tvar touch = event.touches[0];\n\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(touch.clientX - rect.left, touch.clientY - rect.top, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(touch.clientX, touch.clientY, touch.clientX - lastTouch.x, touch.clientY - lastTouch.y);\n\t\t\t}\n\n\t\t\tlastTouch.set(touch.clientX, touch.clientY);\n\t\t}]);\n\t}\n\t//Input\n\telse\n\t{\n\t\t//Move event\n\t\tthis.events.push([window, \"mousemove\", function(event)\n\t\t{\n\t\t\tif(self.canvas !== null)\n\t\t\t{\n\t\t\t\tvar rect = self.canvas.getBoundingClientRect();\n\t\t\t\tself.updatePosition(event.clientX - rect.left, event.clientY - rect.top, event.movementX, event.movementY);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.updatePosition(event.clientX, event.clientY, event.movementX, event.movementY);\n\t\t\t}\n\t\t}]);\n\n\t\t//Button pressed event\n\t\tthis.events.push([window, \"mousedown\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.DOWN);\n\t\t}]);\n\n\t\t//Button released event\n\t\tthis.events.push([window, \"mouseup\", function(event)\n\t\t{\n\t\t\tself.updateKey(event.which - 1, Key.UP);\n\t\t}]);\n\t}\n\n\t//Mouse double click\n\tthis.events.push([window, \"dblclick\", function(event)\n\t{\n\t\tself._doubleClicked = true;\n\t}]);\n\n\t//Initialize events\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].addEventListener(event[1], event[2]);\n\t}\n}\n\n//Mouse Buttons\nMouse.LEFT = 0;\nMouse.MIDDLE = 1;\nMouse.RIGHT = 2;\n\n//Canvas to be used for relative coordinates calculation\nMouse.prototype.setCanvas = function(canvas)\n{\n\tthis.canvas = canvas;\n\n\tcanvas.mouseInside = false;\n\n\tcanvas.addEventListener(\"mouseenter\", function()\n\t{\n\t\tthis.mouseInside = true;\n\t});\n\n\tcanvas.addEventListener(\"mouseleave\", function()\n\t{\n\t\tthis.mouseInside = false;\n\t});\n}\n\n//Check if mouse is inside attached canvas\nMouse.prototype.insideCanvas = function()\n{\n\tif(this.canvas === null)\n\t{\n\t\treturn false;\n\t}\n\t\n\treturn this.canvas.mouseInside;\n}\n\n//Set if mouse locked\nMouse.prototype.setLock = function(value)\n{\n\tif(this.canvas !== null)\n\t{\n\t\tif(value)\n\t\t{\n\t\t\tif(this.canvas.requestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.requestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.mozRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.mozRequestPointerLock();\n\t\t\t}\n\t\t\telse if(this.canvas.webkitRequestPointerLock)\n\t\t\t{\n\t\t\t\tthis.canvas.webkitRequestPointerLock();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(document.exitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.exitPointerLock();\n\t\t\t}\n\t\t\telse if(document.mozExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.mozExitPointerLock();\n\t\t\t}\n\t\t\telse if(document.webkitExitPointerLock)\n\t\t\t{\n\t\t\t\tdocument.webkitExitPointerLock();\n\t\t\t}\n\t\t}\n\t}\n}\n\n//Check if mouse button is pressed\nMouse.prototype.buttonPressed = function(button)\n{\n\treturn this.keys[button].pressed;\n}\n\n//Check if Mouse button was double clicked\nMouse.prototype.buttonDoubleClicked = function()\n{\n\treturn this.doubleClicked;\n}\n\n//Check if a mouse button was just pressed\nMouse.prototype.buttonJustPressed = function(button)\n{\n\treturn this.keys[button].justPressed;\n}\n\n//Check if a mouse button was just released\nMouse.prototype.buttonJustReleased = function(button)\n{\n\treturn this.keys[button].justReleased;\n}\n\n//Update mouse Position\nMouse.prototype.updatePosition = function(x, y, xDiff, yDiff)\n{\n\tthis._position.set(x, y);\n\tthis._delta.x += xDiff;\n\tthis._delta.y += yDiff;\n\tthis._positionUpdated = true;\n}\n\n//Update mouse Key\nMouse.prototype.updateKey = function(button, action)\n{\n\tif(button > -1)\n\t{\n\t\tthis._keys[button].update(action);\n\t}\n}\n\n//Update mouse State (Calculate position diff)\nMouse.prototype.update = function()\n{\n\t//Update mouse keys state\n\tfor(let i = 0; i < this._keys.length; i++)\n\t{\n\t\tif(this._keys[i].justPressed && this.keys[i].justPressed)\n\t\t{\n\t\t\tthis._keys[i].justPressed = false;\n\t\t}\n\t\tif(this._keys[i].justReleased && this.keys[i].justReleased)\n\t\t{\n\t\t\tthis._keys[i].justReleased = false;\n\t\t}\n\t\tthis.keys[i].set(this._keys[i].justPressed, this._keys[i].pressed, this._keys[i].justReleased);\n\t}\n\n\t//Update mouse wheel\n\tif(this._wheelUpdated)\n\t{\n\t\tthis.wheel = this._wheel;\n\t\tthis._wheelUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.wheel = 0;\n\t}\n\n\t//Update mouse double click\n\tif(this._doubleClicked)\n\t{\n\t\tthis.doubleClicked = true;\n\t\tthis._doubleClicked = false;\n\t}\n\telse\n\t{\n\t\tthis.doubleClicked = false;\n\t}\n\n\t//Update mouse Position if needed\n\tif(this._positionUpdated)\n\t{\n\t\tthis.delta.x = this._delta.x;\n\t\tthis.delta.y = this._delta.y;\n\t\tthis._delta.set(0,0);\n\n\t\tthis.position.x = this._position.x;\n\t\tthis.position.y = this._position.y;\n\n\t\tthis._positionUpdated = false;\n\t}\n\telse\n\t{\n\t\tthis.delta.x = 0;\n\t\tthis.delta.y = 0;\n\t}\n}\n\n//Dispose mouse object\nMouse.prototype.dispose = function()\n{\n\tfor(let i = 0; i < this.events.length; i++)\n\t{\n\t\tvar event = this.events[i];\n\t\tevent[0].removeEventListener(event[1], event[2]);\n\t}\n}\n","import { IInputManager, IMouse, IKeyboard} from '../types';\nimport { Mouse } from \"../../extern/Mouse\";\nimport { Keyboard } from \"../../extern/Keyboard\";\n\nclass InputManager implements IInputManager {\n  public KeyCodes: Keyboard = Keyboard;\n  constructor(\n    private mouse: IMouse = new Mouse(),\n    private keyboard: IKeyboard = new Keyboard(),\n  ) {}\n  \n  public buttonPressed = (button: number) => this.mouse.buttonPressed(button);\n\n  public keyPressed = (key: number) => this.keyboard.keyPressed(key);\n  public keyJustPressed = (key: number) => this.keyboard.keyJustPressed(key);\n  public keyJustReleased = (key: number) => this.keyboard.keyJustReleased(key);\n\n  update = () => {\n    this.mouse.update();\n    this.keyboard.update();\n  };\n}\n\nexport default InputManager;\n","import { ISerializableState, IComponent, ISystemManager, IComponentFactoryInitializer, IStorageManager, IComponentFactory } from \"../types\";\nimport { defaultComponentEvents } from \"../utils\";\n\nclass StorageManager implements IStorageManager {\n  constructor( \n    private system: ISystemManager,\n  ) {}\n\n  public saveGame = () => {\n    this.saveState('ecs', this.system.getSerializableState());\n  }\n  \n  public loadGame = () => {\n    const loadedFromStorage = this.loadStateFromKey('ecs');\n  \n    if (loadedFromStorage) {\n      const hydratedComponents = this.hydrateLoadedComponents(this.system, loadedFromStorage);\n      loadedFromStorage.system.components = hydratedComponents;\n  \n      this.system.loadHydratedState(loadedFromStorage);\n    }\n  }\n  \n  private saveState<T extends ISerializableState>(key: string, value: T): void {\n    const serialized = JSON.stringify(value);\n    window.localStorage.setItem(key, serialized);\n  }\n  \n  private loadStateFromKey(key: string): ISerializableState | null {\n    const serialized = window.localStorage.getItem(key);\n  \n    if (!serialized) {\n      return null;\n    }\n  \n    return JSON.parse(serialized) as ISerializableState;\n  }\n  \n  private hydrateLoadedComponents(system: ISystemManager, state: ISerializableState): IComponent[] {\n    const { system: { components } } = state;\n  \n    const componentInitializerCache: { [key: string]: IComponentFactoryInitializer } = {};\n  \n    return components.map((component: IComponent) => {\n      const cached = componentInitializerCache[component.name];\n  \n      let componentInitializer: IComponentFactoryInitializer;\n  \n      if (cached) {\n        componentInitializer = cached;\n      } else {\n        componentInitializer = this.system.getComponentFactory(component.name)(system);\n        componentInitializerCache[component.name] = componentInitializer;\n      }\n  \n      const entity = { id: component.entityId }\n      return componentInitializer(entity, component.state, defaultComponentEvents(), component.id); // !!! HACK FIX ME TODO ACHTUNG\n    });\n  }\n}\n\nexport default StorageManager;\n","import { IComponent, ISystemManager, IVector, IEntity, IComponentEvents } from \"../types\";\nimport { WithPosition } from \"./withPosition\";\nimport { factory } from \"../utils\";\nimport { WithBoundary } from \"./withBoundary\";\n\nexport type WithControls = { direction: IVector; moving: boolean; speed: IVector; };\n\nexport function controllableFactory(system: ISystemManager) {\n  return (entity: IEntity, state: WithControls, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithControls>>({\n        id,\n        entityId: entity.id,\n        name: 'controls',\n        state: {\n          direction: state.direction,\n          moving: state.moving,\n          speed: state.speed,\n        },\n        update: (system: ISystemManager, component: IControllableEntity) => {\n          handleVerticalMovement(entity, component, system);\n          handleHorizontalMovement(entity, component, system);\n          \n          handleMovingFlag(entity, component, system);\n        },\n      }))\n  }\n}\n\ntype IControllableEntity = IComponent<WithControls & Partial<WithPosition> & Partial<WithBoundary>>\n\nfunction handleVerticalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system, 'vertical');\n}\n\nfunction handleHorizontalMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  handleMovement(entity, component, system);\n}\n\nfunction handleMovement(entity: IEntity, component: IControllableEntity, system: ISystemManager, direction: 'vertical' | 'horizontal' = 'horizontal') {\n\n  const key = direction === 'horizontal' ? 'x' : 'y';\n  const [neg, pos] = direction === 'horizontal'\n    ? [system.input.KeyCodes.LEFT, system.input.KeyCodes.RIGHT]\n    : [system.input.KeyCodes.UP,   system.input.KeyCodes.DOWN];\n\n  if (system.input.keyPressed(pos)) {\n    component.state.direction[key] = 1;\n  } else\n  if (system.input.keyPressed(neg)) {\n    component.state.direction[key] = -1;\n  } else {\n    component.state.direction[key] = 0;\n  }\n}\n\nfunction handleMovingFlag(entity: IEntity, component: IControllableEntity, system: ISystemManager) {\n  const {x, y} = component.state.direction;\n  if (x === 0 && y === 0) {\n    component.state.moving = false;\n  } else {\n    component.state.moving = true;\n  }\n}\n","import { IComponentFactories, IComponentFactoryKey } from \"../types\";\nimport { ageableFactory } from \"./ageable\";\nimport { controllableFactory } from \"./controllable\";\nimport { combatableFactory } from \"./combatable\";\nimport { killableFactory } from \"./killable\";\nimport { withPositionFactory } from \"./withPosition\";\nimport { nameableFactory } from \"./nameable\";\nimport { isCollidableFactory } from \"./isCollidable\";\nimport { withCollisionsFactory } from \"./withCollisions\";\nimport { withGeometryFactory } from \"./withGeometry\";\nimport { withMomentumFactory } from \"./withMomentum\";\nimport { withOffscreenFactory } from \"./withOffscreen\";\nimport { lootableFactory } from \"./lootable\";\nimport { withBoundaryFactory } from \"./withBoundary\";\nimport { withTextureFactory } from \"./withTexture\";\nimport { withBugWiggleFactory } from \"./withBugWiggle\";\n\nexport const defaultComponentFactories: IComponentFactories = {\n  name:         nameableFactory,\n  health:       killableFactory,\n  position:     withPositionFactory,\n  age:          ageableFactory,\n  controls:     controllableFactory,\n  collisions:   withCollisionsFactory,\n  collidable:   isCollidableFactory,\n  attack:       combatableFactory,\n  momentum:     withMomentumFactory,\n  offscreen:    withOffscreenFactory,\n  geometry:     withGeometryFactory,\n  loot:         lootableFactory,\n  boundary:     withBoundaryFactory,\n  texture:      withTextureFactory,\n  wiggle:       withBugWiggleFactory,\n}\n\nexport function getComponentFactory<T extends IComponentFactoryKey>(name: T): IComponentFactories[T] {\n  return  defaultComponentFactories[name];\n}\n  ","import { IComponent, ISystemManager, IEntity, IComponentEvents } from \"../types\";\nimport { factory } from \"../utils\";\n\nexport type WithAge = { age: number };\n\nexport function ageableFactory(system: ISystemManager) {\n  let GAME_YEAR = 2 * 1000;\n  return (entity: IEntity, state: WithAge, events: IComponentEvents, id = -1) => {\n    return system.registerComponent(\n      factory<IComponent<WithAge>>({\n        id,\n        name: 'age',\n        entityId: entity.id,\n        state: { age: state.age },\n        update: (system: ISystemManager, component: IAgeableEntity) => {\n            const {epoch} = system;\n            const remainder = epoch % GAME_YEAR;\n            if (remainder === 0 && epoch > 0) {\n              component.state.age++; \n            }\n        },\n      }))\n  }\n}\n\ntype IAgeableEntity = IComponent<WithAge>;\n","import { IComponent, ISystem, ISystemManager, EntityIdType, IConfigDefaults, IEntity, WithId, IEntityComponents, ISerializableState, IInputManager, IStorageManager, IObjectConfig, IComponentFactory, IComponentFactories, IComponentFactoryKey, IEventManager, IAudioManager } from \"../types\";\nimport AudioManager from \"./AudioManager\";\nimport ComponentManager from \"./ComponentManager\";\nimport EntityManager from \"./EntityManager\";\nimport EventManager from \"./EventManager\";\nimport InputManager from \"./InputManager\";\nimport StorageManager from \"./StorageManager\";\n\nimport { defaultComponentFactories } from \"../components\";\nimport { values, partialSetValue } from \"../utils\";\n\nconst configDefaults: IConfigDefaults = {\n  debug: false,\n  logging: true,\n}\n\nclass SystemManager implements ISystemManager {\n  public system:                ISystem;\n  public config:                IObjectConfig;\n  public input:                 IInputManager;\n  public storage:               IStorageManager;\n  public events:                IEventManager;\n  public audio:                 IAudioManager;\n  public epoch:                 number;\n\n  private entityComponents:     IEntityComponents;\n  private componentFactories:   IComponentFactories;\n  private entityManager:        EntityManager;\n  private componentManager:     ComponentManager;\n\n  private entityModelCache:       { [key: string]: Array<IComponent> } = {};\n  private entityComponentCache:   { [key: string]: number[] } = {};\n  private entityComponentSetter:  (path: (string | number)[], value: any) => void;\n\n  constructor(\n    config:              IObjectConfig,\n    input?:              IInputManager,\n    epochs?:             number,\n  ) {\n    this.config               = { ...configDefaults, ...config };\n    this.input                = input ? input : new InputManager();\n    this.storage              = new StorageManager(this);\n    this.events               = new EventManager(config);\n    this.audio                = new AudioManager(config);\n    this.epoch                = epochs ? epochs : 0;\n    \n    this.componentFactories   = defaultComponentFactories;\n    \n    this.entityManager        = new EntityManager(config);\n    this.componentManager     = new ComponentManager(config);\n    this.entityComponents     = {};\n\n    this.system = {\n      entities:   this.entityManager.entities,\n      components: this.componentManager.components,\n    }\n\n    this.entityComponentSetter = partialSetValue(this.entityComponents);\n  }\n\n  public init = (config?: IObjectConfig) => null;\n\n  public registerEntity = () => {\n    return this.entityManager.registerEntity();\n  };\n\n  public registerComponent = <T>(component: IComponent) => {\n    const registered = this.componentManager\n      .registerComponent<T>(component)\n\n    this.entityComponentSetter(\n      [registered.entityId, registered.name],\n      registered.id,\n    )\n\n    return registered;\n  };\n\n  public getComponent = <T>(component: IComponent): IComponent<T> => {\n    return this.componentManager.get(component);\n  };\n  public getComponentById = <T>(componentId: EntityIdType): IComponent<T> => {\n    return this.componentManager.get(componentId);\n  };\n  public getComponentIdsForEntity = (entity: IEntity): Array<EntityIdType> => {\n    if(entity === undefined) {\n      return [];\n    }\n    return values(this.entityComponents[entity.id]);\n  };\n  public getComponentsForEntity = (entity: IEntity): Array<IComponent> => {\n    return this.getComponentIdsForEntity(entity)\n      .map(this.componentManager.get);\n  };\n  public getComponentFactory = (name: IComponentFactoryKey): IComponentFactory => {\n    return this.componentFactories[name];\n  };\n  private getCachedComponentsForEntity = (entity: IEntity): Array<IComponent> => {\n\n    const cached = this.entityModelCache[entity.id];\n\n    if (cached) {\n      return cached;\n    }\n\n    const entityModels = this.getComponentsForEntity(entity);\n\n    this.entityModelCache[entity.id] = entityModels;\n\n    return entityModels;\n  }\n\n  public unRegisterEntity = (entityId: EntityIdType) => {\n    this.unRegisterComponentsForEntity(entityId);\n    this.deleteEntityComponents(entityId);\n    this.clearEntityComponentCache();\n    this.clearEntityModelCache();\n    this.entityManager.unRegisterEntity(entityId);\n  };\n  public unRegisterComponent = (entityId: EntityIdType) => {\n    this.componentManager.unRegisterComponent(entityId);\n  };\n \n  private unRegisterComponentsForEntity = (entityId: EntityIdType) => {\n    const componentIds = this.getComponentIdsForEntity({ id: entityId });\n    componentIds.forEach(id => this.componentManager.unRegisterComponent(id));\n  };\n  private deleteEntityComponents = (entityId: EntityIdType) => {\n    delete this.entityComponents[entityId];\n  };\n  private clearEntityComponentCache = () => {\n    delete this.entityComponentCache;\n    this.entityComponentCache = {};\n  };\n  private clearEntityModelCache = () => {\n    delete this.entityModelCache;\n    this.entityModelCache = {};\n  };\n\n  public getEntityComponent = <T>(entity: IEntity, componentName: string): IComponent<T> => {\n    return this.getComponentById<T>(this.entityComponents[entity.id][componentName]);\n  }\n  public getEntityModel = <T>(entity: IEntity): WithId<T> => {\n    return groupEntityComponents<T>(entity, this.system.components);\n  };\n  public getEntitiesByComponentTypes = (componentNames: IComponentFactoryKey[]): EntityIdType[] => {\n    const cacheKey = componentNames.join('-');\n\n    if (this.entityComponentCache[cacheKey] !== undefined) {\n      return this.entityComponentCache[cacheKey];\n    }\n\n    const isValidComponent = (component: IComponent) => componentNames.indexOf(component.name) !== -1;\n\n    const entities: EntityIdType[] = [];\n    \n    for (let i = 0; i < this.system.entities.length; i++) {\n      const entity = this.system.entities[i];\n      const components = this.getComponentIdsForEntity(entity)\n        .map(this.getComponentById)\n        .filter(isValidComponent);\n\n      if (components.length === componentNames.length) {\n        entities.push(entity.id);\n      }\n    }\n\n    this.entityComponentCache[cacheKey] = entities;\n\n    return entities;\n  }\n\n  public step = () => {\n    this.input.update();\n    this.updateSystemEntities();\n    this.entityComponentCache = {};\n    this.epoch++;\n    return this.system;\n  };\n  private updateSystemEntities = (): void => {\n    this.system.entities.forEach(this.updateComponentsForEntity);\n  }\n  private updateComponentsForEntity = (entity: IEntity): void => {\n    const components = this.getCachedComponentsForEntity(entity);\n    for (let i = 0; i < components.length; i++) {\n      this.updateComponent(components[i])\n    }\n  }\n  private updateComponent = (o: IComponent) => o.update(this, o);\n\n  public getSerializableState = (): ISerializableState => {\n    const { system, config, epoch, entityComponents } = this;\n    return {\n      system,\n      config,\n      epoch,\n      entityComponents,\n    };\n  };\n  public loadHydratedState = (state: ISerializableState) => {\n    this.system = state.system;\n    this.config = state.config;\n    this.epoch  = state.epoch;\n    this.entityComponents = state.entityComponents;\n  };\n\n  public getState = (): ISystem => {\n    return this.system;\n  };\n\n  public toString = () => {\n    return JSON.stringify({\n      system: this.system,\n      config: this.config,\n    }, null, '  ')\n  };\n}\n\nexport default SystemManager;\n\nfunction groupEntityComponents<T>(entity: IEntity, components: IComponent[]) {\n  return components\n    .filter(o => o && o.entityId === entity.id)\n    .reduce((acc, val) => {\n      return { ...acc, ...val.state };\n    }, { id: entity.id }) as WithId<T>;\n}\n","import { createSystem } from \"./factories/system\";\n\nconst system = createSystem({ name: 'Galaga' })\n\nexport { system };\n","import SystemManager from \"../../engine/services/SystemManager\";\n\ntype SystemArgs = { name: string; version?: string; logging?: boolean; }\n\nexport function createSystem({\n  name,\n  version = '1',\n  logging = true,\n}: SystemArgs) {\n\n  const system = new SystemManager({\n    name,\n    version,\n    logging,\n    screenSize: {\n      x: 800,\n      y: 600,\n    }\n  })\n\n  return system;\n}\n","import * as React from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport './styles/App.style.css';\nimport './styles/FontGlow.style.css';\n\nimport { DevScreen } from './Development/Dev';\n\nimport { Intro } from './Containers/Intro';\nimport { Menu } from './Containers/Menu';\nimport { Game } from './Containers/Game';\nimport { Outro } from './Containers/Outro';\n\nimport { CharacterModel } from '../game/Domain/character';\nimport { ProjectileModel } from '../game/Domain/projectile';\n\nimport { createPlayer } from '../game/factories/player';\nimport { createBullet } from '../game/factories/bullet';\n\nimport { system } from '../game';\n\nimport { ON_START_GAME, ON_START_ENGINE, ON_STOP_ENGINE } from '../events';\nimport { keys } from '../engine/utils';\nimport { SfxLibrary, SongLibrary } from '../game/catalogue';\nimport { ICurrentGameState } from '../game/types';\nimport { Screens } from './Screens';\n\ninterface State {\n  epoch:    number;\n  player:   CharacterModel;\n  bullet1:  ProjectileModel;\n  bullet2:  ProjectileModel;\n  final?:   ICurrentGameState;\n  screen:   Screens;\n}\n\nclass App extends React.PureComponent<{}, State> {\n  private handler: number | undefined;\n\n  private player  = createPlayer(system, 'Odin');\n  private bullet1 = createBullet(system, 'Bullet of Destiny');\n  private bullet2 = createBullet(system, 'Bullet of Greater Truth');\n\n  constructor(props: {}) {\n    super(props);\n\n    this.gameAudioInitialize();\n\n    system.events.registerEvent(ON_START_GAME,    this.startNewGame);\n    system.events.registerEvent(ON_START_ENGINE,  this.start);\n    system.events.registerEvent(ON_STOP_ENGINE,   this.stop);\n  }\n\n  state = {\n    epoch:   system.epoch,\n    player:  system.getEntityModel<CharacterModel>(this.player),\n    bullet1: system.getEntityModel<ProjectileModel>(this.bullet1),\n    bullet2: system.getEntityModel<ProjectileModel>(this.bullet2),\n    final:   undefined,\n    screen:  'intro' as Screens,\n  }\n  \n\n  componentDidMount() {\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  componentWillUnmount() {\n    this.gameAudioCleanup();\n\n    system.events.unRegisterEvent(ON_START_GAME,  this.startNewGame)\n    system.events.registerEvent(ON_START_ENGINE,  this.start);\n    system.events.registerEvent(ON_STOP_ENGINE,   this.stop);\n\n    this.stop();\n\n    delete this.handler;\n  }\n\n  gameAudioInitialize = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      system.audio.registerSong(`${key}`, { ...SongLibrary[key], volume: 0.6 })\n    });\n\n    keys(SfxLibrary).forEach((key: string | number) => {\n      system.audio.registerSound(`${key}`, { ...SfxLibrary[key], volume: 0.3 })\n    });\n  }\n\n  gameAudioCleanup = () => {\n\n    keys(SongLibrary).forEach((key: string | number) => {\n      system.audio.unRegisterSong(`${key}`)\n    });\n    \n    keys(SfxLibrary).forEach((key: string | number) => {\n      system.audio.unRegisterSound(`${key}`)\n    });\n  }\n\n  moUntWOrld = () => {\n    this.setState({ epoch: system.epoch });\n  }\n\n  tick = () => {\n    system.step();\n\n    this.setState(_ => ({\n      epoch:   system.epoch,\n      player:  system.getEntityModel(this.player),\n      bullet1: system.getEntityModel<ProjectileModel>(this.bullet1),\n      bullet2: system.getEntityModel<ProjectileModel>(this.bullet2),\n    }));\n  }\n\n  startNewGame = () => {\n    this.gotoScreen('game')\n  }\n\n  start = () => {\n    this.stop();\n\n    this._update();\n  }\n\n  _update = () => {\n    this.handler = requestAnimationFrame(this._update);\n\n    this.tick();\n  }\n\n  stop = () => {\n    if (this.handler) cancelAnimationFrame(this.handler);\n  }\n\n  save = () => {\n    system.storage.saveGame();\n  }\n\n  load = () => {\n    this.stop();\n\n    system.storage.loadGame();\n\n    this.moUntWOrld();\n\n    this.start();\n  }\n\n  restart = () => {\n    this.gotoScreen('menu');\n  }\n\n  gotoScreen = (screen: Screens) => {\n    this.setState({ screen});\n  }\n\n  setFinalScore = (score: ICurrentGameState) => {\n    this.setState(state => ({ ...state, final: score }));\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App container with-title is-center is-dark\">\n          <label className=\"title\">Galaga.ts</label>\n\n          {this.state.screen === 'intro'\n            ? <Intro\n                onPlayerInput={this.startNewGame}\n                nav={this.gotoScreen}\n                {...this.state}\n              />\n            : null\n          }\n          {this.state.screen === 'menu'\n            ? <Menu\n                system={system}\n                {...this.state}\n              />\n            : null\n          }\n          {this.state.screen === 'game'\n            ? <Game\n                system={system}\n                onRestart={this.restart}\n                onFinalScore={this.setFinalScore}\n                nav={this.gotoScreen}\n                {...this.state}\n              />\n            : null\n          }\n          {this.state.screen === 'end'\n            ? <Outro\n                system={system}\n                nav={this.gotoScreen}\n\n                {...this.state}\n              />\n            : null\n          }\n\n          <DevScreen\n            system={system}\n            onStart={this.start}\n            onStop={this.stop}\n            onTick={this.tick}\n            onSave={this.save}\n            onLoad={this.load}\n            nav={this.gotoScreen}\n          />\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './client/styles/index.css';\n\nimport App from './client/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}